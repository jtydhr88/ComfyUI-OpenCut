"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{4600:(e,t,a)=>{a.d(t,{a:()=>n,s:()=>r});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:MM:SS:CS",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60),l=Math.floor(e%1*100),s=Math.floor(e%1*a);switch(t){case"MM:SS":return"".concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"));case"HH:MM:SS":return"".concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"));case"HH:MM:SS:CS":return"".concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"),":").concat(l.toString().padStart(2,"0"));case"HH:MM:SS:FF":return"".concat(r.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))}},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:MM:SS:CS",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(!e||"string"!=typeof e)return null;let r=e.trim();try{switch(t){case"MM:SS":{let e=r.split(":");if(2!==e.length)return null;let[t,a]=e.map(e=>parseInt(e,10));if(isNaN(t)||isNaN(a)||t<0||a<0||a>=60)return null;return 60*t+a}case"HH:MM:SS":{let e=r.split(":");if(3!==e.length)return null;let[t,a,n]=e.map(e=>parseInt(e,10));if(isNaN(t)||isNaN(a)||isNaN(n)||t<0||a<0||n<0||a>=60||n>=60)return null;return 3600*t+60*a+n}case"HH:MM:SS:CS":{let e=r.split(":");if(4!==e.length)return null;let[t,a,n,i]=e.map(e=>parseInt(e,10));if(isNaN(t)||isNaN(a)||isNaN(n)||isNaN(i)||t<0||a<0||n<0||i<0||a>=60||n>=60||i>=100)return null;return 3600*t+60*a+n+i/100}case"HH:MM:SS:FF":{let e=r.split(":");if(4!==e.length)return null;let[t,n,i,l]=e.map(e=>parseInt(e,10));if(isNaN(t)||isNaN(n)||isNaN(i)||isNaN(l)||t<0||n<0||i<0||l<0||n>=60||i>=60||l>=a)return null;return 3600*t+60*n+i+l/a}}}catch(e){}return null}},4976:(e,t,a)=>{a.d(t,{K:()=>q});var r=a(28064),n=a(10952),i=a(61309),l=a(15482),s=a(87537),o=a(9061),d=a(16224),c=a(43589),u=a(81450),m=a(53093),f=a(45440),h=a(47888),p=a(82549),x=a(26796),g=a(65763),v=a(56139),j=a(79899),y=a(87134),b=a(73539),w=a(20288),N=a(26530),C=a(19884),S=a(43811),k=a(46438),E=a(86434),T=a(91685),R=a(80196),A=a(81925),M=a(82337),P=a(74188),I=a(47165),D=a(61557),L=a(64889),z=a(61275),F=a(85531),_=a(41662),O=a(90617);let B=e=>{let{audioUrl:t,height:a=32,className:n=""}=e,i=(0,P.useRef)(null),l=(0,P.useRef)(null),[s,o]=(0,P.useState)(!0),[d,c]=(0,P.useState)(!1);return((0,P.useEffect)(()=>{let e=!0,r=l.current,n=async()=>{if(i.current&&t)try{r&&(l.current=null);let n=O.A.create({container:i.current,waveColor:"rgba(255, 255, 255, 0.6)",progressColor:"rgba(255, 255, 255, 0.9)",cursorColor:"transparent",barWidth:2,barGap:1,height:a,normalize:!0,interact:!1});if(e)l.current=n;else{try{n.destroy()}catch(e){}return}n.on("ready",()=>{e&&(o(!1),c(!1))}),n.on("error",t=>{e&&(c(!0),o(!1))}),await n.load(t)}catch(t){e&&(c(!0),o(!1))}};return r?(l.current=null,requestAnimationFrame(()=>{try{r.destroy()}catch(e){}e&&n()})):n(),()=>{e=!1;let t=l.current;l.current=null,t&&requestAnimationFrame(()=>{try{t.destroy()}catch(e){}})}},[t,a]),d)?(0,r.jsx)("div",{className:"flex items-center justify-center ".concat(n),style:{height:a},children:(0,r.jsx)("span",{className:"text-xs text-foreground/60",children:"Audio unavailable"})}):(0,r.jsxs)("div",{className:"relative ".concat(n),children:[s&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs text-foreground/60",children:"Loading..."})}),(0,r.jsx)("div",{ref:i,className:"w-full transition-opacity duration-200 ".concat(s?"opacity-0":"opacity-100"),style:{height:a}})]})};var U=a(87100);function X(e){let{element:t,track:a,zoomLevel:n,isSelected:i,onElementMouseDown:l,onElementClick:s}=e,{mediaItems:o}=(0,R.B)(),{updateElementTrim:c,updateElementDuration:u,removeElementFromTrack:m,removeElementFromTrackWithRipple:f,dragState:h,splitElement:x,addElementToTrack:g,replaceElementMedia:v,rippleEditingEnabled:y,toggleElementHidden:w}=(0,T.A)(),{currentTime:N}=(0,A.E)(),C="media"===t.type?o.find(e=>e.id===t.mediaId):null,S=(null==C?void 0:C.type)==="audio",{resizing:k,handleResizeStart:I,handleResizeMove:O,handleResizeEnd:X}=function(e){let{element:t,track:a,zoomLevel:r,onUpdateTrim:n,onUpdateDuration:i}=e,[l,s]=(0,P.useState)(null),{mediaItems:o}=(0,R.B)(),{updateElementStartTime:d,updateElementTrim:c,updateElementDuration:u,pushHistory:m}=(0,T.A)();(0,P.useEffect)(()=>{if(!l)return;let e=e=>{h({clientX:e.clientX})},t=()=>{p()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[l]);let f=()=>{if("text"===t.type)return!0;if("media"===t.type){let e=o.find(e=>e.id===t.mediaId);if(!e)return!1;if("image"===e.type)return!0}return!1},h=e=>{var n;if(!l)return;let i=(e.clientX-l.startX)/(50*r),s=(null==(n=M.I.getState().activeProject)?void 0:n.fps)||30;if("left"===l.side){let e=t.duration-l.initialTrimEnd-.1,r=l.initialTrimStart+i;if(r>=0){let n=(0,U.gY)(Math.min(e,r),s),i=n-l.initialTrimStart,o=(0,U.gY)(t.startTime+i,s);c(a.id,t.id,n,l.initialTrimEnd,!1),d(a.id,t.id,o,!1)}else if(f()){let e=Math.min(Math.abs(r),t.startTime),n=(0,U.gY)(t.startTime-e,s),i=(0,U.gY)(t.duration+e,s);c(a.id,t.id,0,l.initialTrimEnd,!1),u(a.id,t.id,i,!1),d(a.id,t.id,n,!1)}else{let e=0-l.initialTrimStart,r=(0,U.gY)(t.startTime+e,s);c(a.id,t.id,0,l.initialTrimEnd,!1),d(a.id,t.id,r,!1)}}else{let e=l.initialTrimEnd-i;if(e<0)if(f()){let r=Math.abs(e),n=(0,U.gY)(t.duration+r,s);u(a.id,t.id,n,!1),c(a.id,t.id,l.initialTrimStart,0,!1)}else c(a.id,t.id,l.initialTrimStart,0,!1);else{let e=t.startTime+t.duration-t.trimStart-t.trimEnd,r=(0,U.gY)(e+i,s),n=Math.max(0,t.duration-t.trimStart-(r-t.startTime)),l=Math.min(t.duration-t.trimStart-.1,n);c(a.id,t.id,t.trimStart,l,!1)}}},p=()=>{s(null)};return{resizing:l,isResizing:null!==l,handleResizeStart:(e,a,r)=>{e.stopPropagation(),e.preventDefault(),m(),s({elementId:a,side:r,startX:e.clientX,initialTrimStart:t.trimStart,initialTrimEnd:t.trimEnd})},handleResizeMove:()=>{},handleResizeEnd:()=>{}}}({element:t,track:a,zoomLevel:n,onUpdateTrim:c,onUpdateDuration:u}),H=t.duration-t.trimStart-t.trimEnd,$=Math.max(U.of.ELEMENT_MIN_WIDTH,H*U.of.PIXELS_PER_SECOND*n),V=h.elementId===t.id,Y=50*(V&&h.isDragging?h.currentTime:t.startTime)*n;return(0,r.jsxs)(E.tz,{children:[(0,r.jsx)(E.Rc,{asChild:!0,children:(0,r.jsx)("div",{className:"absolute top-0 h-full select-none timeline-element ".concat(V?"z-50":"z-10"),style:{left:"".concat(Y,"px"),width:"".concat($,"px")},"data-element-id":t.id,"data-track-id":a.id,onMouseMove:k?O:void 0,onMouseUp:k?X:void 0,onMouseLeave:k?X:void 0,children:(0,r.jsxs)("div",{className:"relative h-full rounded-[0.15rem] cursor-pointer overflow-hidden ".concat((0,U.A0)(a.type)," ").concat(""," ").concat(V?"z-50":"z-10"," ").concat(t.hidden?"opacity-50":""),onClick:e=>s&&s(e,t),onMouseDown:e=>{l&&l(e,t)},onContextMenu:e=>l&&l(e,t),children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center h-full",children:(()=>{if("text"===t.type)return(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-start pl-2",children:(0,r.jsx)("span",{className:"text-xs text-white truncate",children:t.content})});let e=o.find(e=>e.id===t.mediaId);if(!e)return(0,r.jsx)("span",{className:"text-xs text-foreground/80 truncate",children:t.name});if("image"===e.type||"video"===e.type&&e.thumbnailUrl){let t=(0,U.t_)(a.type),n=16/9*t,l="image"===e.type?e.url:e.thumbnailUrl,s="image"===e.type;return(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-full h-full relative ".concat(i?"bg-primary":"bg-transparent"),children:(0,r.jsx)("div",{className:"absolute top-[0.15rem] bottom-[0.15rem] left-0 right-0",style:{backgroundImage:l?"url(".concat(l,")"):"none",backgroundRepeat:"repeat-x",backgroundSize:"".concat(n,"px ").concat(t,"px"),backgroundPosition:"left center",pointerEvents:"none"},"aria-label":"Tiled ".concat(s?"background":"thumbnail"," of ").concat(e.name)})})})}return"audio"===e.type?(0,r.jsx)("div",{className:"w-full h-full flex items-center gap-2",children:(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)(B,{audioUrl:e.url||"",height:24,className:"w-full"})})}):(0,r.jsx)("span",{className:"text-xs text-foreground/80 truncate",children:t.name})})()}),t.hidden&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center pointer-events-none",children:S?(0,r.jsx)(L.A,{className:"h-6 w-6 text-white"}):(0,r.jsx)(z.A,{className:"h-6 w-6 text-white"})}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-[0.2rem] cursor-w-resize bg-primary z-50",onMouseDown:e=>I(e,t.id,"left")}),(0,r.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-[0.2rem] cursor-e-resize bg-primary z-50",onMouseDown:e=>I(e,t.id,"right")})]})]})})}),(0,r.jsxs)(E.Ip,{className:"z-200",children:[(0,r.jsxs)(E.kt,{onClick:e=>{e.stopPropagation();let r=t.startTime,n=t.startTime+(t.duration-t.trimStart-t.trimEnd);N>r&&N<n?x(a.id,t.id,N)||D.oR.error("Failed to split element"):D.oR.error("Playhead must be within element to split")},children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Split at playhead"]}),(0,r.jsxs)(E.kt,{onClick:e=>{e.stopPropagation(),w(a.id,t.id)},children:[S?t.hidden?(0,r.jsx)(F.A,{className:"h-4 w-4 mr-2"}):(0,r.jsx)(L.A,{className:"h-4 w-4 mr-2"}):t.hidden?(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}):(0,r.jsx)(z.A,{className:"h-4 w-4 mr-2"}),(0,r.jsxs)("span",{children:[S?t.hidden?"Unmute":"Mute":t.hidden?"Show":"Hide"," ","text"===t.type?"text":"clip"]})]}),(0,r.jsxs)(E.kt,{onClick:e=>{e.stopPropagation();let{id:r,...n}=t;g(a.id,{...n,name:t.name+" (copy)",startTime:t.startTime+(t.duration-t.trimStart-t.trimEnd)+.1})},children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Duplicate ","text"===t.type?"text":"clip"]}),"media"===t.type&&(0,r.jsxs)(E.kt,{onClick:e=>{if(e.stopPropagation(),"media"!==t.type)return void D.oR.error("Replace is only available for media clips");let r=document.createElement("input");r.type="file",r.accept="video/*,audio/*,image/*",r.onchange=async e=>{var r;let n=null==(r=e.target.files)?void 0:r[0];if(n)try{let e=await v(a.id,t.id,n);e.success?D.oR.success("Clip replaced successfully"):D.oR.error(e.error||"Failed to replace clip")}catch(e){D.oR.error("Unexpected error: ".concat(e instanceof Error?e.message:"Unknown error"))}},r.click()},children:[(0,r.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Replace clip"]}),(0,r.jsx)(E.K5,{}),(0,r.jsxs)(E.kt,{onClick:e=>{e.stopPropagation(),y?f(a.id,t.id):m(a.id,t.id)},className:"text-destructive focus:text-destructive",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Delete ","text"===t.type?"text":"clip"]})]})]})}var H=a(14700);function $(e){let{track:t,zoomLevel:a,onSnapPointChange:n}=e,{mediaItems:i}=(0,R.B)(),{tracks:l,addTrack:s,moveElementToTrack:o,updateElementStartTime:d,updateElementStartTimeWithRipple:c,addElementToTrack:u,selectedElements:m,selectElement:f,dragState:h,startDrag:p,updateDragTime:x,endDrag:g,clearSelectedElements:v,insertTrackAt:j,snappingEnabled:y,rippleEditingEnabled:b}=(0,T.A)(),{currentTime:w}=(0,A.E)(),{snapElementPosition:N,snapElementEdge:C}=function(){let{snapThreshold:e=10,enableElementSnapping:t=!0,enablePlayheadSnapping:a=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,P.useCallback)((e,r,n,i,l)=>{let s=[];return t&&e.forEach(e=>{e.elements.forEach(t=>{if(t.id===l)return;let a=t.startTime,r=t.startTime+(t.duration-t.trimStart-t.trimEnd);s.push({time:a,type:"element-start",elementId:t.id,trackId:e.id},{time:r,type:"element-end",elementId:t.id,trackId:e.id})})}),a&&s.push({time:n,type:"playhead"}),s},[t,a]),n=(0,P.useCallback)((t,a,r)=>{let n=e/(U.of.PIXELS_PER_SECOND*r),i=null,l=1/0;return a.forEach(e=>{let a=Math.abs(t-e.time);a<n&&a<l&&(l=a,i=e)}),{snappedTime:i?i.time:t,snapPoint:i,snapDistance:l}},[e]);return{snapElementPosition:(0,P.useCallback)((e,t,a,i,l)=>{let s=r(t,e,a,i,l);return n(e,s,i)},[r,n]),snapElementEdge:(0,P.useCallback)(function(e,t,a,i,l,s){let o=!(arguments.length>6)||void 0===arguments[6]||arguments[6],d=r(a,e,i,l,s),c=n(o?e:e+t,d,l);return!o&&c.snapPoint&&(c.snappedTime=c.snappedTime-t),c},[r,n]),findSnapPoints:r,snapToNearestPoint:n}}({snapThreshold:10,enableElementSnapping:y,enablePlayheadSnapping:y}),S=(e,t,r)=>{var n;let i=(null==(n=M.I.getState().activeProject)?void 0:n.fps)||30,s=(0,U.gY)(e,i);if(y){let n=C(e,t,l,w,a,r,!0),i=C(e,t,l,w,a,r,!1),o=n;i.snapPoint&&(!n.snapPoint||i.snapDistance<n.snapDistance)&&(o=i),o.snapPoint&&(s=o.snappedTime)}return s},k=(0,P.useRef)(null),[E,L]=(0,P.useState)(!1),[z,F]=(0,P.useState)(null),[_,O]=(0,P.useState)(!1),B=(0,P.useRef)(0),[$,V]=(0,P.useState)(null);(0,P.useEffect)(()=>{if(!h.isDragging)return;let e=e=>{var t;if(!k.current)return;h.elementId&&h.trackId&&(m.some(e=>e.trackId===h.trackId&&e.elementId===h.elementId)||f(h.trackId,h.elementId,!1));let r=k.current.getBoundingClientRect(),i=Math.max(0,Math.max(0,(e.clientX-r.left)/(U.of.PIXELS_PER_SECOND*a))-h.clickOffsetTime),s=(null==(t=M.I.getState().activeProject)?void 0:t.fps)||30,o=(0,U.gY)(i,s),d=null;if(y){let e=5;if(h.elementId&&h.trackId){let t=l.find(e=>e.id===h.trackId),a=null==t?void 0:t.elements.find(e=>e.id===h.elementId);a&&(e=a.duration-a.trimStart-a.trimEnd)}let t=C(i,e,l,w,a,h.elementId||void 0,!0),r=C(i,e,l,w,a,h.elementId||void 0,!1),s=t;r.snapPoint&&(!t.snapPoint||r.snapDistance<t.snapDistance)&&(s=r),s.snapPoint&&(o=s.snappedTime,d=s.snapPoint),null==n||n(d)}else null==n||n(null);x(o)},r=e=>{var a;if(!h.elementId||!h.trackId)return;let r=h.trackId===t.id,i=null==(a=k.current)?void 0:a.getBoundingClientRect();if(!i){r&&(b?c(t.id,h.elementId,h.currentTime):d(t.id,h.elementId,h.currentTime),g(),null==n||n(null));return}let s=e.clientY>=i.top&&e.clientY<=i.bottom;if(!s&&!r)return;let u=h.currentTime;if(s){let e=l.find(e=>e.id===h.trackId),a=null==e?void 0:e.elements.find(e=>e.id===h.elementId);if(a){let e=u+(a.duration-a.trimStart-a.trimEnd),r=l.find(e=>e.id===t.id);(null==r?void 0:r.elements.some(a=>{if(h.trackId===t.id&&a.id===h.elementId)return!1;let r=a.startTime;return u<a.startTime+(a.duration-a.trimStart-a.trimEnd)&&e>r}))||(h.trackId===t.id?b?c(t.id,h.elementId,u):d(t.id,h.elementId,u):(o(h.trackId,t.id,h.elementId),requestAnimationFrame(()=>{b?c(t.id,h.elementId,u):d(t.id,h.elementId,u)})))}}else if(r){let e=l.find(e=>e.id===h.trackId),a=null==e?void 0:e.elements.find(e=>e.id===h.elementId);if(a){let e=u+(a.duration-a.trimStart-a.trimEnd);t.elements.some(t=>{if(t.id===h.elementId)return!1;let a=t.startTime;return u<t.startTime+(t.duration-t.trimStart-t.trimEnd)&&e>a})||(b?c(t.id,h.elementId,u):d(t.id,h.elementId,u))}}r&&(g(),null==n||n(null))};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r)}},[h.isDragging,h.clickOffsetTime,h.elementId,h.trackId,h.currentTime,a,l,t.id,x,d,o,g,m,f,n]);let Y=(e,r)=>{V({x:e.clientX,y:e.clientY});let n=2===e.button,i=e.metaKey||e.ctrlKey||e.shiftKey;if(n){m.some(e=>e.trackId===t.id&&e.elementId===r.id)||f(t.id,r.id,i);return}i&&f(t.id,r.id,!0);let l=e.currentTarget.getBoundingClientRect(),s=(e.clientX-l.left)/(U.of.PIXELS_PER_SECOND*a);p(r.id,t.id,e.clientX,r.startTime,s)},W=(e,a)=>{if(e.stopPropagation(),$){let t=Math.abs(e.clientX-$.x),a=Math.abs(e.clientY-$.y);if(t>5||a>5)return void V(null)}e.metaKey||e.ctrlKey||e.shiftKey||m.some(e=>e.trackId===t.id&&e.elementId===a.id)||f(t.id,a.id,!1)};return(0,r.jsx)("div",{className:"w-full h-full hover:bg-muted/20",onClick:e=>{e.target.closest(".timeline-element")||v()},onDragOver:e=>{e.preventDefault();let r=e.dataTransfer.types.includes("application/x-timeline-element"),n=e.dataTransfer.types.includes("application/x-media-item");if(!r&&!n)return;let s=e.currentTarget.querySelector(".track-elements-container"),o=0;if(s){let t=s.getBoundingClientRect();o=Math.max(0,e.clientX-t.left)/(U.of.PIXELS_PER_SECOND*a)}let d=!1;if(n)try{let a=e.dataTransfer.getData("application/x-media-item");if(a){let e=JSON.parse(a);if("text"===e.type){let e=S(o,5),a=e+5;d=t.elements.some(t=>{let r=t.startTime,n=t.startTime+(t.duration-t.trimStart-t.trimEnd);return e<n&&a>r})}else{let a=i.find(t=>t.id===e.id);if(a){let e=a.duration||5,r=S(o,e),n=r+e;d=t.elements.some(e=>{let t=e.startTime,a=e.startTime+(e.duration-e.trimStart-e.trimEnd);return r<a&&n>t})}}}}catch(e){}else if(r)try{let a=e.dataTransfer.getData("application/x-timeline-element");if(a){let{elementId:e,trackId:r}=JSON.parse(a),n=l.find(e=>e.id===r),i=null==n?void 0:n.elements.find(t=>t.id===e);if(i){let a=i.duration-i.trimStart-i.trimEnd,n=S(o,a,e),l=n+a;d=t.elements.some(a=>{if(r===t.id&&a.id===e)return!1;let i=a.startTime,s=a.startTime+(a.duration-a.trimStart-a.trimEnd);return n<s&&l>i})}}}catch(e){}if(d){e.dataTransfer.dropEffect="none",O(!0),F(S(o,5));return}e.dataTransfer.dropEffect=r?"move":"copy",O(!1),F(S(o,5))},onDragEnter:e=>{e.preventDefault();let t=e.dataTransfer.types.includes("application/x-timeline-element"),a=e.dataTransfer.types.includes("application/x-media-item");(t||a)&&(B.current++,L(!0))},onDragLeave:e=>{e.preventDefault();let t=e.dataTransfer.types.includes("application/x-timeline-element"),a=e.dataTransfer.types.includes("application/x-media-item");(t||a)&&(B.current--,0===B.current&&(L(!1),O(!1),F(null)))},onDrop:e=>{var r,n;let m;e.preventDefault(),e.stopPropagation(),B.current=0,L(!1),O(!1);let f=e.dataTransfer.types.includes("application/x-timeline-element"),h=e.dataTransfer.types.includes("application/x-media-item"),p=(null==(r=e.dataTransfer.files)?void 0:r.length)>0;if(!f&&!h&&!p)return;let x=e.currentTarget.querySelector(".track-elements-container");if(!x)return;let g=x.getBoundingClientRect(),v=Math.max(0,e.clientX-g.left),y=e.clientY-g.top,N=v/(U.of.PIXELS_PER_SECOND*a),C=(null==(n=M.I.getState().activeProject)?void 0:n.fps)||30;(0,U.gY)(N,C);let k=l.findIndex(e=>e.id===t.id);m=y<20?"above":y>40?"below":"on";try{if(f){let a=e.dataTransfer.getData("application/x-timeline-element");if(!a)return;let{elementId:r,trackId:n,clickOffsetTime:i=0}=JSON.parse(a),s=l.find(e=>e.id===n),u=null==s?void 0:s.elements.find(e=>e.id===r);if(!u)return void D.oR.error("Element not found");let m=u.duration-u.trimStart-u.trimEnd,f=N-i,h=S(f,m,r),p=Math.max(0,h),x=p+m;if(t.elements.some(e=>{if(n===t.id&&e.id===r)return!1;let a=e.startTime,i=e.startTime+(e.duration-e.trimStart-e.trimEnd);return p<i&&x>a}))return void D.oR.error("Cannot move element here - it would overlap with existing elements");n===t.id?b?c(t.id,r,p):d(t.id,r,p):(o(n,t.id,r),requestAnimationFrame(()=>{b?c(t.id,r,p):d(t.id,r,p)}))}else if(h){let a=e.dataTransfer.getData("application/x-media-item");if(!a)return;let r=JSON.parse(a);if("text"===r.type){let e=t.id,a=t;if("text"!==t.type||"on"!==m){let t,r=(0,H.xK)(l);t="above"===m?k:"below"===m?k+1:r?l.findIndex(e=>e.id===r.id):0,e=j("text",t);let n=T.A.getState().tracks.find(t=>t.id===e);if(!n)return;a=n}let n=S(N,5),i=n+5;if(a.elements.some(e=>{let t=e.startTime,a=e.startTime+(e.duration-e.trimStart-e.trimEnd);return n<a&&i>t}))return void D.oR.error("Cannot place element here - it would overlap with existing elements");u(e,{type:"text",name:r.name||"Text",content:r.content||"Default Text",duration:U.of.DEFAULT_TEXT_DURATION,startTime:n,trimStart:0,trimEnd:0,fontSize:48,fontFamily:"Arial",color:"#ffffff",backgroundColor:"transparent",textAlign:"center",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",x:0,y:0,rotation:0,opacity:1})}else{let e=i.find(e=>e.id===r.id);if(!e)return void D.oR.error("Media item not found");let a=t.id,n="video"===r.type||"image"===r.type,o="audio"===r.type,d=n?(0,H.hX)("media",t.type):!!o&&(0,H.hX)("media",t.type),c=l.find(e=>e.id===a);if(!d||"on"!==m){if(n){let e=(0,H.xK)(l);if(e)if(0===e.elements.length&&"on"===m)a=e.id,c=e;else{let t;t="above"===m?k:"below"===m?k+1:l.findIndex(t=>t.id===e.id),a=j("media",t);let r=T.A.getState().tracks.find(e=>e.id===a);if(!r)return;c=r}else{a=s("media");let e=T.A.getState().tracks.find(e=>e.id===a);if(!e)return;c=e}}else if(o){let e,t=(0,H.xK)(l);e="above"===m?k:"below"===m?k+1:t?l.findIndex(e=>e.id===t.id)+1:l.length,a=j("audio",e);let r=T.A.getState().tracks.find(e=>e.id===a);if(!r)return;c=r}}if(!c)return;let f=e.duration||5,h=S(N,f),p=h+f;if(c.elements.some(e=>{let t=e.startTime,a=e.startTime+(e.duration-e.trimStart-e.trimEnd);return h<a&&p>t}))return void D.oR.error("Cannot place element here - it would overlap with existing elements");u(a,{type:"media",mediaId:e.id,name:e.name,duration:e.duration||5,startTime:h,trimStart:0,trimEnd:0})}}else if(p){let{activeProject:t}=M.I.getState(),{addMediaItem:a}=R.B.getState(),{addElementToTrack:r}=T.A.getState();if(!t)return void D.oR.error("No active project");(0,I.T)(e.dataTransfer.files).then(async e=>{for(let n of e){await a(t.id,n);let e=R.B.getState().mediaItems.find(e=>e.name===n.name&&e.url===n.url);if(e){let t="audio"===e.type?"audio":"media",a=j(t,0);r(a,{type:"media",mediaId:e.id,name:e.name,duration:e.duration||5,startTime:w,trimStart:0,trimEnd:0})}}}).catch(e=>{D.oR.error("Failed to process dropped files")})}}catch(e){D.oR.error("Failed to add media to track")}},children:(0,r.jsx)("div",{ref:k,className:"h-full relative track-elements-container min-w-full",children:0===t.elements.length?(0,r.jsx)("div",{className:"h-full w-full rounded-sm border-2 border-dashed flex items-center justify-center text-xs text-muted-foreground transition-colors ".concat(E?_?"border-red-500 bg-red-500/10 text-red-600":"border-blue-500 bg-blue-500/10 text-blue-600":"border-muted/30"),children:E?_?"Cannot drop - would overlap":"Drop element here":""}):(0,r.jsx)(r.Fragment,{children:t.elements.map(e=>{let n=m.some(a=>a.trackId===t.id&&a.elementId===e.id);return(0,r.jsx)(X,{element:e,track:t,zoomLevel:a,isSelected:n,onElementMouseDown:Y,onElementClick:W},e.id)})})})})}function V(e){let{currentTime:t,duration:a,zoomLevel:r,seek:n,rulerRef:i,rulerScrollRef:l,tracksScrollRef:s,playheadRef:o}=e,[d,c]=(0,P.useState)(!1),[u,m]=(0,P.useState)(null),[f,h]=(0,P.useState)(!1),[p,x]=(0,P.useState)(!1),g=(0,P.useRef)(null),v=(0,P.useRef)(0),j=d&&null!==u?u:t,y=(0,P.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(!0),w(e)},[a,r]),b=(0,P.useCallback)(e=>{var t;0===e.button&&(null!=o&&null!=(t=o.current)&&t.contains(e.target)||(e.preventDefault(),h(!0),x(!1),c(!0),w(e)))},[a,r]),w=(0,P.useCallback)(e=>{var t;let l=i.current;if(!l)return;let s=l.getBoundingClientRect(),o=e.clientX-s.left,d=Math.max(0,Math.min(50*a*r,o)),c=Math.max(0,Math.min(a,d/(50*r))),u=(null==(t=M.I.getState().activeProject)?void 0:t.fps)||30,f=(0,U.gY)(c,u);m(f),n(f),v.current=e.clientX},[a,r,n,i]),N=(0,P.useCallback)(()=>{let e=l.current,t=s.current;if(!e||!t||!d)return;let n=e.getBoundingClientRect(),i=v.current-n.left,o=e.clientWidth,c=Math.max(0,50*a*r-o),u=0;if(i<100&&e.scrollLeft>0?u=-15*(1-Math.max(0,i)/100):i>o-100&&e.scrollLeft<c&&(u=15*(1-Math.max(0,o-100-i)/100)),0!==u){let a=Math.max(0,Math.min(c,e.scrollLeft+u));e.scrollLeft=a,t.scrollLeft=a}d&&(g.current=requestAnimationFrame(N))},[d,l,s,a,r]);return(0,P.useEffect)(()=>{if(!d)return;let e=e=>{w(e),f&&x(!0)},t=e=>{c(!1),null!==u&&n(u),m(null),g.current&&(cancelAnimationFrame(g.current),g.current=null),f&&(h(!1),p||w(e),x(!1))};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),g.current=requestAnimationFrame(N),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t),g.current&&(cancelAnimationFrame(g.current),g.current=null)}},[d,u,n,w,f,p,N]),(0,P.useEffect)(()=>{let{isPlaying:e}=A.E.getState();if(!e||d)return;let t=l.current,a=s.current;if(!t||!a)return;let n=50*j*r,i=t.clientWidth,o=t.scrollWidth-i;(n<t.scrollLeft||n>t.scrollLeft+i)&&(t.scrollLeft=a.scrollLeft=Math.max(0,Math.min(o,n-i/2)))},[j,a,r,l,s,d]),{playheadPosition:j,handlePlayheadMouseDown:y,handleRulerMouseDown:b,isDraggingRuler:f}}function Y(e){var t;let{currentTime:a,duration:n,zoomLevel:i,tracks:l,seek:s,rulerRef:o,rulerScrollRef:d,tracksScrollRef:c,trackLabelsRef:u,timelineRef:m,playheadRef:f,isSnappingToPlayhead:h=!1}=e,p=(0,P.useRef)(null),x=f||p,[g,v]=(0,P.useState)(0),{playheadPosition:j,handlePlayheadMouseDown:y}=V({currentTime:a,duration:n,zoomLevel:i,seek:s,rulerRef:o,rulerScrollRef:d,tracksScrollRef:c,playheadRef:x});(0,P.useEffect)(()=>{let e=c.current;if(!e)return;let t=()=>{v(e.scrollLeft)};return v(e.scrollLeft),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[c]);let b=(null==(t=m.current)?void 0:t.offsetHeight)||400,w=l.length>0&&(null==u?void 0:u.current)?u.current.offsetWidth:0,N=w+j*U.of.PIXELS_PER_SECOND*i-g,C=n*U.of.PIXELS_PER_SECOND*i,S=c.current,k=Math.min(w+C-g,w+((null==S?void 0:S.clientWidth)||1e3)),E=Math.max(w,Math.min(k,N));return(0,r.jsxs)("div",{ref:x,className:"absolute pointer-events-auto z-40",style:{left:"".concat(E,"px"),top:0,height:"".concat(b-4,"px"),width:"2px"},onMouseDown:y,children:[(0,r.jsx)("div",{className:"absolute left-0 w-0.5 cursor-col-resize h-full ".concat("bg-foreground")}),(0,r.jsx)("div",{className:"absolute top-1 left-1/2 transform -translate-x-1/2 w-3 h-3 rounded-full border-2 shadow-xs ".concat(h?"bg-foreground border-foreground":"bg-foreground border-foreground/50")})]})}function W(e){let{startPos:t,currentPos:a,containerRef:n,isActive:i}=e,l=(0,P.useRef)(null);return((0,P.useEffect)(()=>{if(!i||!t||!a||!n.current)return;let e=n.current.getBoundingClientRect(),r=t.x-e.left,s=t.y-e.top,o=a.x-e.left,d=a.y-e.top,c=Math.min(r,o),u=Math.min(s,d),m=Math.abs(o-r),f=Math.abs(d-s);l.current&&(l.current.style.left="".concat(c,"px"),l.current.style.top="".concat(u,"px"),l.current.style.width="".concat(m,"px"),l.current.style.height="".concat(f,"px"))},[t,a,i,n]),i&&t&&a)?(0,r.jsx)("div",{ref:l,className:"absolute pointer-events-none z-50 bg-foreground/10"}):null}function Z(e){var t;let{snapPoint:a,zoomLevel:n,isVisible:i,tracks:l,timelineRef:s,trackLabelsRef:o,tracksScrollRef:d}=e,[c,u]=(0,P.useState)(0);if((0,P.useEffect)(()=>{let e=d.current;if(!e)return;let t=()=>{u(e.scrollLeft)};return u(e.scrollLeft),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[d]),!i||!a)return null;let m=(null==(t=s.current)?void 0:t.offsetHeight)||400,f=l.length>0&&(null==o?void 0:o.current)?o.current.offsetWidth:0,h=a.time*U.of.PIXELS_PER_SECOND*n;return(0,r.jsx)("div",{className:"absolute pointer-events-none z-90",style:{left:"".concat(f+h-c,"px"),top:0,height:"".concat(m-8,"px"),width:"2px"},children:(0,r.jsx)("div",{className:"w-0.5 h-full bg-primary/40 opacity-80"})})}var K=a(14138);function q(){var e;let{tracks:t,getTotalDuration:a,clearSelectedElements:i,snappingEnabled:c,setSelectedElements:u,toggleTrackMute:m,dragState:f}=(0,T.A)(),{mediaItems:h,addMediaItem:p}=(0,R.B)(),{activeProject:x}=(0,M.I)(),{currentTime:g,duration:v,seek:j,setDuration:y,isPlaying:b,toggle:w}=(0,A.E)(),[N,C]=(0,P.useState)(!1),[S,k]=(0,P.useState)(!1),[L,z]=(0,P.useState)(0),F=(0,P.useRef)(0),_=(0,P.useRef)(null),O=(0,P.useRef)(null),[B,X]=(0,P.useState)(!1),H=(0,P.useRef)({isMouseDown:!1,downX:0,downY:0,downTime:0}),{zoomLevel:K,setZoomLevel:q,handleWheel:J}=function(e){let{containerRef:t,isInTimeline:a=!1}=e,[r,n]=(0,P.useState)(1),i=(0,P.useCallback)(e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();let t=e.deltaY>0?-.15:.15;n(e=>Math.max(.1,Math.min(10,e+t)))}else if(e.shiftKey||Math.abs(e.deltaX)>Math.abs(e.deltaY))return},[]);return(0,P.useEffect)(()=>{let e=e=>{var r;a&&(e.ctrlKey||e.metaKey)&&(null==(r=t.current)?void 0:r.contains(e.target))&&e.preventDefault()};return document.addEventListener("wheel",e,{passive:!1}),()=>{document.removeEventListener("wheel",e)}},[a,t]),{zoomLevel:r,setZoomLevel:n,handleWheel:i}}({containerRef:_,isInTimeline:B}),ee=Math.max((v||0)*U.of.PIXELS_PER_SECOND*K,(g+30)*U.of.PIXELS_PER_SECOND*K,(null==(e=_.current)?void 0:e.clientWidth)||1e3),et=(0,P.useRef)(null),ea=(0,P.useRef)(null),er=(0,P.useRef)(null),en=(0,P.useRef)(null),ei=(0,P.useRef)(null),el=(0,P.useRef)(!1),es=(0,P.useRef)(0),eo=(0,P.useRef)(0),ed=(0,P.useRef)(0),{handleRulerMouseDown:ec}=function(e){let{currentTime:t,duration:a,zoomLevel:r,seek:n,rulerRef:i,rulerScrollRef:l,tracksScrollRef:s,playheadRef:o}=e,{handleRulerMouseDown:d,isDraggingRuler:c}=V({currentTime:t,duration:a,zoomLevel:r,seek:n,rulerRef:i,rulerScrollRef:l,tracksScrollRef:s,playheadRef:o});return{handleRulerMouseDown:d,isDraggingRuler:c}}({currentTime:g,duration:v,zoomLevel:K,seek:j,rulerRef:O,rulerScrollRef:et,tracksScrollRef:ea,playheadRef:en}),eu=(0,P.useRef)(null),{selectionBox:em,handleMouseDown:ef,isSelecting:eh,justFinishedSelecting:ep}=function(e){let{containerRef:t,playheadRef:a,onSelectionComplete:r,isEnabled:n=!0}=e,[i,l]=(0,P.useState)(null),[s,o]=(0,P.useState)(!1),d=(0,P.useCallback)(e=>{var t;!(!n||e.target.closest(".timeline-element")||(null==a||null==(t=a.current)?void 0:t.contains(e.target))||e.target.closest("[data-track-labels]"))&&(e.target.closest("[data-ruler-area]")||l({startPos:{x:e.clientX,y:e.clientY},currentPos:{x:e.clientX,y:e.clientY},isActive:!1}))},[n,a]),c=(0,P.useCallback)((e,a)=>{if(!t.current)return;let n=t.current,i=n.getBoundingClientRect();e.x,i.left,e.y,i.top,a.x,i.left,a.y,i.top;let l=n.querySelectorAll(".timeline-element"),s=[];l.forEach(t=>{let r=t.getBoundingClientRect(),n={left:r.left,top:r.top,right:r.right,bottom:r.bottom},i={left:e.x,top:e.y,right:a.x,bottom:a.y},l={left:Math.min(i.left,i.right),top:Math.min(i.top,i.bottom),right:Math.max(i.left,i.right),bottom:Math.max(i.top,i.bottom)},o=t.getAttribute("data-element-id"),d=t.getAttribute("data-track-id");!(n.right<l.left||n.left>l.right||n.bottom<l.top||n.top>l.bottom)&&o&&d&&s.push({trackId:d,elementId:o})}),r(s)},[t,r]);return(0,P.useEffect)(()=>{if(!i)return;let e=e=>{let t=Math.abs(e.clientX-i.startPos.x),a=Math.abs(e.clientY-i.startPos.y),r={...i,currentPos:{x:e.clientX,y:e.clientY},isActive:t>5||a>5||i.isActive};l(r),r.isActive&&c(r.startPos,r.currentPos)},t=()=>{(null==i?void 0:i.isActive)&&(o(!0),setTimeout(()=>{o(!1)},50)),l(null)};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[i,c]),{selectionBox:i,handleMouseDown:d,isSelecting:(null==i?void 0:i.isActive)||!1,justFinishedSelecting:s}}({containerRef:eu,playheadRef:en,onSelectionComplete:e=>{u(e)}}),[ex,eg]=(0,P.useState)(null),ev=f.isDragging&&c&&null!==ex,ej=(0,P.useCallback)(e=>{eg(e)},[]),ey=(0,P.useCallback)(e=>{var t;let a=e.target;a.closest(".timeline-element")||(null==(t=en.current)?void 0:t.contains(a))||a.closest("[data-track-labels]")||(H.current={isMouseDown:!0,downX:e.clientX,downY:e.clientY,downTime:e.timeStamp})},[]),eb=(0,P.useCallback)(e=>{var t;let a,{isMouseDown:r,downX:n,downY:l,downTime:s}=H.current;if(H.current={isMouseDown:!1,downX:0,downY:0,downTime:0},!r)return;let o=Math.abs(e.clientX-n),d=Math.abs(e.clientY-l),c=e.timeStamp-s;if(o>5||d>5||c>500||eh||ep||e.target.closest(".timeline-element")||(null==(t=en.current)?void 0:t.contains(e.target)))return;if(e.target.closest("[data-track-labels]"))return void i();i();let u=e.target.closest("[data-ruler-area]"),m=0;if(u){let t=et.current;if(!t)return;let r=t.getBoundingClientRect();a=e.clientX-r.left,m=t.scrollLeft}else{let t=ea.current;if(!t)return;let r=t.getBoundingClientRect();a=e.clientX-r.left,m=t.scrollLeft}let f=Math.max(0,Math.min(v,(a+m)/(U.of.PIXELS_PER_SECOND*K))),h=(null==x?void 0:x.fps)||30;j((0,U.gY)(f,h))},[v,K,j,et,ea,i,eh,ep]);(0,P.useEffect)(()=>{y(Math.max(a(),10))},[t,y,a]);let ew=async e=>{var t;if(e.preventDefault(),C(!1),F.current=0,e.dataTransfer.types.includes("application/x-timeline-element"))return;let a=e.dataTransfer.getData("application/x-media-item");if(a)try{let e=JSON.parse(a);if("text"===e.type)T.A.getState().addTextToNewTrack(e);else{let t=h.find(t=>t.id===e.id);if(!t)return void D.oR.error("Media item not found");T.A.getState().addMediaToNewTrack(t)}}catch(e){D.oR.error("Failed to add item to timeline")}else if((null==(t=e.dataTransfer.files)?void 0:t.length)>0){if(!x)return void D.oR.error("No active project");k(!0),z(0);try{for(let t of(await (0,I.T)(e.dataTransfer.files,e=>z(e)))){await p(x.id,t);let e=R.B.getState().mediaItems.find(e=>e.name===t.name&&e.url===t.url);if(e){let t="audio"===e.type?"audio":"media",a=T.A.getState().insertTrackAt(t,0);T.A.getState().addElementToTrack(a,{type:"media",mediaId:e.id,name:e.name,duration:e.duration||5,startTime:g,trimStart:0,trimEnd:0})}}}catch(e){D.oR.error("Failed to process dropped files")}finally{k(!1),z(0)}}};return(0,P.useEffect)(()=>{let e=et.current,t=ea.current,a=ei.current;if(!e||!t)return;let r=()=>{let a=Date.now();el.current||a-es.current<16||(es.current=a,el.current=!0,t.scrollLeft=e.scrollLeft,el.current=!1)},n=()=>{let a=Date.now();el.current||a-eo.current<16||(eo.current=a,el.current=!0,e.scrollLeft=t.scrollLeft,el.current=!1)};if(e.addEventListener("scroll",r),t.addEventListener("scroll",n),a){let i=()=>{let e=Date.now();el.current||e-ed.current<16||(ed.current=e,el.current=!0,t.scrollTop=a.scrollTop,el.current=!1)},l=()=>{let e=Date.now();el.current||e-ed.current<16||(ed.current=e,el.current=!0,a.scrollTop=t.scrollTop,el.current=!1)};return a.addEventListener("scroll",i),t.addEventListener("scroll",l),()=>{e.removeEventListener("scroll",r),t.removeEventListener("scroll",n),a.removeEventListener("scroll",i),t.removeEventListener("scroll",l)}}return()=>{e.removeEventListener("scroll",r),t.removeEventListener("scroll",n)}},[]),(0,r.jsxs)("div",{className:"h-full flex flex-col transition-colors duration-200 relative bg-panel rounded-sm overflow-hidden",...{onDragEnter:e=>{e.preventDefault(),!e.dataTransfer.types.includes("application/x-timeline-element")&&(F.current+=1,N||C(!0))},onDragOver:e=>{e.preventDefault()},onDragLeave:e=>{e.preventDefault(),e.dataTransfer.types.includes("application/x-timeline-element")||(F.current-=1,0===F.current&&C(!1))},onDrop:ew},onMouseEnter:()=>X(!0),onMouseLeave:()=>X(!1),children:[(0,r.jsx)(Q,{zoomLevel:K,setZoomLevel:q}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden relative",ref:_,children:[(0,r.jsx)(Y,{currentTime:g,duration:v,zoomLevel:K,tracks:t,seek:j,rulerRef:O,rulerScrollRef:et,tracksScrollRef:ea,trackLabelsRef:er,timelineRef:_,playheadRef:en,isSnappingToPlayhead:ev&&(null==ex?void 0:ex.type)==="playhead"}),(0,r.jsx)(Z,{snapPoint:ex,zoomLevel:K,tracks:t,timelineRef:_,trackLabelsRef:er,tracksScrollRef:ea,isVisible:ev}),(0,r.jsxs)("div",{className:"flex bg-panel sticky top-0 z-10",children:[(0,r.jsx)("div",{className:"w-28 shrink-0 bg-panel border-r flex items-center justify-between px-3 py-2",children:(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground opacity-0",children:"."})}),(0,r.jsx)("div",{className:"flex-1 relative overflow-hidden h-10",onWheel:e=>{e.shiftKey||Math.abs(e.deltaX)>Math.abs(e.deltaY)||J(e)},onMouseDown:ef,onClick:eb,"data-ruler-area":!0,children:(0,r.jsx)(n.F,{className:"w-full",ref:et,children:(0,r.jsxs)("div",{ref:O,className:"relative h-10 select-none cursor-default",style:{width:"".concat(ee,"px")},onMouseDown:ec,children:[(()=>{let e=(e=>{let t=U.of.PIXELS_PER_SECOND*e;return t>=200?.1:t>=100?.5:t>=50?1:t>=25?2:t>=12?5:t>=6?10:30})(K);return Array.from({length:Math.ceil(v/e)+1},(t,a)=>{let n=a*e;if(n>v)return null;let i=n%(e>=1?Math.max(1,e):1)==0;return(0,r.jsx)("div",{className:"absolute top-0 h-4 ".concat(i?"border-l border-muted-foreground/40":"border-l border-muted-foreground/20"),style:{left:"".concat(n*U.of.PIXELS_PER_SECOND*K,"px")},children:(0,r.jsx)("span",{className:"absolute top-1 left-1 text-[0.6rem] ".concat(i?"text-muted-foreground font-medium":"text-muted-foreground/70"),children:(()=>{let t=Math.floor(n/3600),a=Math.floor(n%3600/60),r=n%60;return t>0?"".concat(t,":").concat(a.toString().padStart(2,"0"),":").concat(Math.floor(r).toString().padStart(2,"0")):a>0?"".concat(a,":").concat(Math.floor(r).toString().padStart(2,"0")):e>=1?"".concat(Math.floor(r),"s"):"".concat(r.toFixed(1),"s")})()})},a)}).filter(Boolean)})(),(()=>{var e;let{activeProject:t}=M.I.getState();return(null==t||null==(e=t.bookmarks)?void 0:e.length)?t.bookmarks.map((e,t)=>(0,r.jsx)("div",{className:"absolute top-0 h-10 w-0.5 !bg-primary cursor-pointer",style:{left:"".concat(e*U.of.PIXELS_PER_SECOND*K,"px")},onClick:t=>{t.stopPropagation(),A.E.getState().seek(e)},children:(0,r.jsx)("div",{className:"absolute top-[-1px] left-[-5px] text-primary",children:(0,r.jsx)(l.A,{className:"h-3 w-3 fill-primary"})})},"bookmark-".concat(t))):null})()]})})})]}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[t.length>0&&(0,r.jsx)("div",{ref:er,className:"w-28 shrink-0 border-r overflow-y-auto z-100 bg-panel","data-track-labels":!0,children:(0,r.jsx)(n.F,{className:"w-full h-full",ref:ei,children:(0,r.jsx)("div",{className:"flex flex-col gap-1",children:t.map(e=>(0,r.jsx)("div",{className:"flex items-center px-3 group",style:{height:"".concat((0,U.t_)(e.type),"px")},children:(0,r.jsxs)("div",{className:"flex items-center justify-end flex-1 min-w-0 gap-2",children:[e.muted?(0,r.jsx)(s.A,{className:"h-4 w-4 text-destructive cursor-pointer",onClick:()=>m(e.id)}):(0,r.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground cursor-pointer",onClick:()=>m(e.id)}),(0,r.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)(G,{track:e})]})},e.id))})})}),(0,r.jsxs)("div",{className:"flex-1 relative overflow-hidden",onWheel:e=>{e.shiftKey||Math.abs(e.deltaX)>Math.abs(e.deltaY)||J(e)},onMouseDown:e=>{ey(e),ef(e)},onClick:eb,ref:eu,children:[(0,r.jsx)(W,{startPos:(null==em?void 0:em.startPos)||null,currentPos:(null==em?void 0:em.currentPos)||null,containerRef:eu,isActive:(null==em?void 0:em.isActive)||!1}),(0,r.jsx)(n.F,{className:"w-full h-full",ref:ea,children:(0,r.jsx)("div",{className:"relative flex-1",style:{height:"".concat(Math.max(200,Math.min(800,(0,U.Ij)(t))),"px"),width:"".concat(ee,"px")},children:0===t.length?(0,r.jsx)("div",{}):(0,r.jsx)(r.Fragment,{children:t.map((e,a)=>(0,r.jsxs)(E.tz,{children:[(0,r.jsx)(E.Rc,{asChild:!0,children:(0,r.jsx)("div",{className:"absolute left-0 right-0",style:{top:"".concat((0,U.sn)(t,a),"px"),height:"".concat((0,U.t_)(e.type),"px")},onClick:e=>{e.target.closest(".timeline-element")||i()},children:(0,r.jsx)($,{track:e,zoomLevel:K,onSnapPointChange:ej})})}),(0,r.jsxs)(E.Ip,{className:"z-200",children:[(0,r.jsx)(E.kt,{onClick:t=>{t.stopPropagation(),m(e.id)},children:e.muted?"Unmute Track":"Mute Track"}),(0,r.jsx)(E.kt,{onClick:e=>e.stopPropagation(),children:"Track settings (soon)"})]})]},e.id))})})})]})]})]})]})}function G(e){let{track:t}=e;return(0,r.jsxs)(r.Fragment,{children:["media"===t.type&&(0,r.jsx)(c.A,{className:"w-4 h-4 shrink-0 text-muted-foreground"}),"text"===t.type&&(0,r.jsx)(u.A,{className:"w-4 h-4 shrink-0 text-muted-foreground"}),"audio"===t.type&&(0,r.jsx)(m.A,{className:"w-4 h-4 shrink-0 text-muted-foreground"})]})}function Q(e){let{zoomLevel:t,setZoomLevel:a}=e,{tracks:n,addTrack:s,addElementToTrack:o,removeElementFromTrack:d,removeElementFromTrackWithRipple:c,selectedElements:u,clearSelectedElements:m,splitElement:E,splitAndKeepLeft:R,splitAndKeepRight:P,separateAudio:I,snappingEnabled:L,toggleSnapping:z,rippleEditingEnabled:F,toggleRippleEditing:_}=(0,T.A)(),{currentTime:O,duration:B,isPlaying:X,toggle:H}=(0,A.E)(),{toggleBookmark:$,isBookmarked:V}=(0,M.I)(),Y=async()=>{await $(O)},W=V(O);return(0,r.jsxs)("div",{className:"border-b flex items-center justify-between px-2 py-1",children:[(0,r.jsx)("div",{className:"flex items-center gap-1 w-full",children:(0,r.jsxs)(k.Bc,{delayDuration:500,children:[(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:H,className:"mr-2",children:X?(0,r.jsx)(f.A,{className:"h-4 w-4"}):(0,r.jsx)(h.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:X?"Pause (Space)":"Play (Space)"})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground font-mono px-2",style:{minWidth:"18ch",textAlign:"center"},children:[O.toFixed(1),"s / ",B.toFixed(1),"s"]}),0===n.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{o(s("media"),{type:"media",mediaId:"test",name:"Test Clip",duration:U.of.DEFAULT_TEXT_DURATION,startTime:0,trimStart:0,trimEnd:0})},className:"text-xs",children:"Add Test Clip"})}),(0,r.jsx)(k.ZI,{children:"Add a test clip to try playback"})]})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{if(0===u.length)return;let e=0;u.forEach(t=>{let{trackId:a,elementId:r}=t,i=n.find(e=>e.id===a),l=null==i?void 0:i.elements.find(e=>e.id===r);if(l&&i){let t=l.startTime,n=l.startTime+(l.duration-l.trimStart-l.trimEnd);O>t&&O<n&&E(a,r,O)&&e++}}),0===e&&D.oR.error("Playhead must be within selected elements to split")},children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Split element (Ctrl+S)"})]}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{if(1!==u.length)return void D.oR.error("Select exactly one element");let{trackId:e,elementId:t}=u[0],a=n.find(t=>t.id===e),r=null==a?void 0:a.elements.find(e=>e.id===t);if(!r)return;let i=r.startTime,l=r.startTime+(r.duration-r.trimStart-r.trimEnd);if(O<=i||O>=l)return void D.oR.error("Playhead must be within selected element");R(e,t,O)},children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Split and keep left (Ctrl+Q)"})]}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{if(1!==u.length)return void D.oR.error("Select exactly one element");let{trackId:e,elementId:t}=u[0],a=n.find(t=>t.id===e),r=null==a?void 0:a.elements.find(e=>e.id===t);if(!r)return;let i=r.startTime,l=r.startTime+(r.duration-r.trimStart-r.trimEnd);if(O<=i||O>=l)return void D.oR.error("Playhead must be within selected element");P(e,t,O)},children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Split and keep right (Ctrl+W)"})]}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{if(1!==u.length)return void D.oR.error("Select exactly one media element to separate audio");let{trackId:e,elementId:t}=u[0],a=n.find(t=>t.id===e);if(!a||"media"!==a.type)return void D.oR.error("Select a media element to separate audio");I(e,t)},children:(0,r.jsx)(v.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Separate audio (Ctrl+D)"})]}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{0!==u.length&&1===u.length&&(u.forEach(e=>{let{trackId:t,elementId:a}=e,r=n.find(e=>e.id===t),i=null==r?void 0:r.elements.find(e=>e.id===a);if(i){let e=i.startTime+(i.duration-i.trimStart-i.trimEnd)+.1,{id:a,...r}=i;o(t,{...r,startTime:e})}}),m())},children:(0,r.jsx)(j.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Duplicate element (Ctrl+D)"})]}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{D.oR.info("Freeze frame functionality coming soon!")},children:(0,r.jsx)(y.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Freeze frame (F)"})]}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{0!==u.length&&(u.forEach(e=>{let{trackId:t,elementId:a}=e;F?c(t,a):d(t,a)}),m())},children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Delete element (Delete)"})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:Y,children:(0,r.jsx)(l.A,{className:"h-4 w-4 ".concat(W?"fill-primary text-primary":"")})})}),(0,r.jsx)(k.ZI,{children:W?"Remove bookmark":"Add bookmark"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)(k.Bc,{delayDuration:500,children:[(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:z,children:L?(0,r.jsx)(w.A,{className:"h-4 w-4 text-primary"}):(0,r.jsx)(w.A,{className:"h-4 w-4"})})}),(0,r.jsx)(k.ZI,{children:"Auto snapping"})]}),(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:_,children:(0,r.jsx)(N.A,{className:"h-4 w-4 ".concat(F?"text-primary":"")})})}),(0,r.jsx)(k.ZI,{children:F?"Disable Ripple Editing":"Enable Ripple Editing"})]})]}),(0,r.jsx)("div",{className:"h-6 w-px bg-border mx-1"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{a(Math.max(.25,t-.25))},children:(0,r.jsx)(C.A,{className:"h-4 w-4"})}),(0,r.jsx)(K.A,{className:"w-24",value:[t],onValueChange:e=>{a(e[0])},min:.25,max:4,step:.25}),(0,r.jsx)(i.$,{variant:"text",size:"icon",onClick:()=>{a(Math.min(4,t+.25))},children:(0,r.jsx)(S.A,{className:"h-4 w-4"})})]})]})]})}},8435:(e,t,a)=>{a.d(t,{z:()=>j});var r=a(28064),n=a(74188),i=a(26880),l=a(75141);class s{subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}emit(e){this.listeners.forEach(t=>t(e))}constructor(){this.listeners=[]}}let o=new s,d={};function c(){let e=Object.keys(d);o.emit(e)}function u(e,t){if(d[e]){var a;null==(a=d[e])||a.push(t)}else d[e]=[t];c()}function m(e,t){var a,r;d[e]=null==(a=d[e])?void 0:a.filter(e=>e!==t),(null==(r=d[e])?void 0:r.length)===0&&delete d[e],c()}function f(e,t,a){let r=(0,n.useRef)(t),[i,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{r.current=t},[t]);let s=(0,n.useCallback)((e,t)=>{r.current(e,t)},[]);(0,n.useEffect)(()=>{let t=void 0===a||("boolean"==typeof a?a:a.current);return t&&!i?(u(e,s),l(!0)):!t&&i&&(m(e,s),l(!1)),()=>{i&&(m(e,s),l(!1))}},[e,s,a,i]),(0,n.useEffect)(()=>{if(a&&"object"==typeof a&&"current"in a){let t=setInterval(()=>{let t=a.current;t!==i&&(t?u(e,s):m(e,s),l(t))},100);return()=>clearInterval(t)}},[e,s,a,i])}var h=a(13893),p=a(91685),x=a(81925),g=a(82337),v=a(61557);function j(e){let{children:t}=e,{isInitializing:a,isPanelsReady:s,initializeApp:o}=(0,l.U)(),{disableKeybindings:c,enableKeybindings:u}=function(){let{disableKeybindings:e,enableKeybindings:t}=(0,h.y)();return{disableKeybindings:e,enableKeybindings:t}}(),{tracks:m,selectedElements:j,clearSelectedElements:y,setSelectedElements:b,removeElementFromTrack:w,splitElement:N,addElementToTrack:C,snappingEnabled:S,toggleSnapping:k,undo:E,redo:T}=(0,p.A)(),{currentTime:R,duration:A,isPlaying:M,toggle:P,seek:I}=(0,x.E)(),{activeProject:D}=(0,g.I)();f("toggle-play",()=>{P()},void 0),f("stop-playback",()=>{M&&P(),I(0)},void 0),f("seek-forward",e=>{var t;I(Math.min(A,R+(null!=(t=null==e?void 0:e.seconds)?t:1)))},void 0),f("seek-backward",e=>{var t;I(Math.max(0,R-(null!=(t=null==e?void 0:e.seconds)?t:1)))},void 0),f("frame-step-forward",()=>{I(Math.min(A,R+1/((null==D?void 0:D.fps)||30)))},void 0),f("frame-step-backward",()=>{I(Math.max(0,R-1/((null==D?void 0:D.fps)||30)))},void 0),f("jump-forward",e=>{var t;I(Math.min(A,R+(null!=(t=null==e?void 0:e.seconds)?t:5)))},void 0),f("jump-backward",e=>{var t;I(Math.max(0,R-(null!=(t=null==e?void 0:e.seconds)?t:5)))},void 0),f("goto-start",()=>{I(0)},void 0),f("goto-end",()=>{I(A)},void 0),f("split-element",()=>{if(1!==j.length)return void v.oR.error("Select exactly one element to split");let{trackId:e,elementId:t}=j[0],a=m.find(t=>t.id===e),r=null==a?void 0:a.elements.find(e=>e.id===t);if(r){let a=r.startTime,n=r.startTime+(r.duration-r.trimStart-r.trimEnd);R>a&&R<n?N(e,t,R):v.oR.error("Playhead must be within selected element")}},void 0),f("delete-selected",()=>{0!==j.length&&(j.forEach(e=>{let{trackId:t,elementId:a}=e;w(t,a)}),y())},void 0),f("select-all",()=>{b(m.flatMap(e=>e.elements.map(t=>({trackId:e.id,elementId:t.id}))))},void 0),f("duplicate-selected",()=>{if(1!==j.length)return void v.oR.error("Select exactly one element to duplicate");let{trackId:e,elementId:t}=j[0],a=m.find(t=>t.id===e),r=null==a?void 0:a.elements.find(e=>e.id===t);if(r){let t=r.startTime+(r.duration-r.trimStart-r.trimEnd)+.1,{id:a,...n}=r;C(e,{...n,startTime:t})}},void 0),f("toggle-snapping",()=>{k()},void 0),f("undo",()=>{E()},void 0),f("redo",()=>{T()},void 0);let{keybindings:L,getKeybindingString:z,keybindingsEnabled:F,isRecording:_}=(0,h.y)();return((0,n.useEffect)(()=>{let e=e=>{let t;if(!F||_)return;let a=z(e);if(!a)return;let r=L[a];if(!r)return;let n=document.activeElement;if(!(n&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable))){var i,l;e.preventDefault(),"seek-forward"===r||"seek-backward"===r?t={seconds:1}:"jump-forward"===r?t={seconds:5}:"jump-backward"===r&&(t={seconds:5}),i=t,null==(l=d[r])||l.forEach(e=>e(i,"keypress"))}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[L,z,F,_]),(0,n.useEffect)(()=>{a||!s?c():u()},[a,s,c,u]),(0,n.useEffect)(()=>{o()},[o]),a||!s)?(0,r.jsx)("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(i.A,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading editor..."})]})}):(0,r.jsx)(r.Fragment,{children:t})}},9466:(e,t,a)=>{a.d(t,{v:()=>l});var r=a(59467),n=a(20159);let i={default:{toolsPanel:25,previewPanel:50,propertiesPanel:25,mainContent:70,timeline:30},media:{toolsPanel:30,previewPanel:45,propertiesPanel:25,mainContent:100,timeline:25},inspector:{toolsPanel:30,previewPanel:70,propertiesPanel:30,mainContent:75,timeline:25},"vertical-preview":{toolsPanel:30,previewPanel:40,propertiesPanel:30,mainContent:75,timeline:25}},l=(0,r.v)()((0,n.Zr)((e,t)=>({...i.default,activePreset:"default",presetCustomSizes:{default:{},media:{},inspector:{},"vertical-preview":{}},resetCounter:0,mediaViewMode:"grid",setToolsPanel:a=>{let{activePreset:r,presetCustomSizes:n}=t();e({toolsPanel:a,presetCustomSizes:{...n,[r]:{...n[r],toolsPanel:a}}})},setPreviewPanel:a=>{let{activePreset:r,presetCustomSizes:n}=t();e({previewPanel:a,presetCustomSizes:{...n,[r]:{...n[r],previewPanel:a}}})},setPropertiesPanel:a=>{let{activePreset:r,presetCustomSizes:n}=t();e({propertiesPanel:a,presetCustomSizes:{...n,[r]:{...n[r],propertiesPanel:a}}})},setMainContent:a=>{let{activePreset:r,presetCustomSizes:n}=t();e({mainContent:a,presetCustomSizes:{...n,[r]:{...n[r],mainContent:a}}})},setTimeline:a=>{let{activePreset:r,presetCustomSizes:n}=t();e({timeline:a,presetCustomSizes:{...n,[r]:{...n[r],timeline:a}}})},setMediaViewMode:t=>e({mediaViewMode:t}),setActivePreset:a=>{let{activePreset:r,presetCustomSizes:n,toolsPanel:l,previewPanel:s,propertiesPanel:o,mainContent:d,timeline:c}=t(),u={...n,[r]:{toolsPanel:l,previewPanel:s,propertiesPanel:o,mainContent:d,timeline:c}},m=i[a],f=u[a]||{};e({activePreset:a,presetCustomSizes:u,...m,...f})},resetPreset:a=>{let{presetCustomSizes:r,activePreset:n,resetCounter:l}=t(),s=i[a],o={presetCustomSizes:{...r,[a]:{}},resetCounter:l+1};a===n&&Object.assign(o,s),e(o)},getCurrentPresetSizes:()=>{let{toolsPanel:e,previewPanel:a,propertiesPanel:r,mainContent:n,timeline:i}=t();return{toolsPanel:e,previewPanel:a,propertiesPanel:r,mainContent:n,timeline:i}}}),{name:"panel-sizes"}))},13893:(e,t,a)=>{a.d(t,{y:()=>s});var r=a(59467),n=a(20159),i=a(93146);let l={space:"toggle-play",j:"seek-backward",k:"toggle-play",l:"seek-forward",left:"frame-step-backward",right:"frame-step-forward","shift+left":"jump-backward","shift+right":"jump-forward",home:"goto-start",end:"goto-end",s:"split-element",n:"toggle-snapping","ctrl+a":"select-all","ctrl+d":"duplicate-selected","ctrl+z":"undo","ctrl+shift+z":"redo","ctrl+y":"redo",delete:"delete-selected",backspace:"delete-selected"},s=(0,r.v)()((0,n.Zr)((e,t)=>({keybindings:{...l},isCustomized:!1,keybindingsEnabled:!0,isRecording:!1,updateKeybinding:(t,a)=>{e(e=>{let r={...e.keybindings};return r[t]=a,{keybindings:r,isCustomized:!0}})},removeKeybinding:t=>{e(e=>{let a={...e.keybindings};return delete a[t],{keybindings:a,isCustomized:!0}})},resetToDefaults:()=>{e({keybindings:{...l},isCustomized:!1})},enableKeybindings:()=>{e({keybindingsEnabled:!0})},disableKeybindings:()=>{e({keybindingsEnabled:!1})},importKeybindings:t=>{for(let[e,a]of Object.entries(t))if("string"!=typeof e||0===e.length)throw Error("Invalid key format: ".concat(e));e({keybindings:{...t},isCustomized:!0})},exportKeybindings:()=>t().keybindings,validateKeybinding:(e,a)=>{let{keybindings:r}=t(),n=r[e];return n&&n!==a?{key:e,existingAction:n,newAction:a}:null},setIsRecording:t=>{e({isRecording:t})},getKeybindingsForAction:e=>{let{keybindings:a}=t();return Object.keys(a).filter(t=>a[t]===e)},getKeybindingString:e=>(function(e){let t=e.target,a=function(e){let t={ctrl:(0,i.lg)()?e.metaKey:e.ctrlKey,alt:e.altKey,shift:e.shiftKey},a=Object.keys(t).filter(e=>t[e]).join("+");return""===a?null:a}(e),r=function(e){var t,a;let r=(null!=(t=e.key)?t:"").toLowerCase(),n=null!=(a=e.code)?a:"";if(r.startsWith("arrow"))return r.slice(5);if("tab"===r)return"tab";if(" "===r||"space"===r)return"space";if("home"===r)return"home";if("end"===r)return"end";if("delete"===r)return"delete";if("backspace"===r)return"backspace";if(n.startsWith("Key")){let e=n.slice(3).toLowerCase();if(1===e.length&&e>="a"&&e<="z")return e}if(n.startsWith("Digit")){let e=n.slice(5);if(1===e.length&&e>="0"&&e<="9")return e}return 1===r.length&&r>="0"&&r<="9"||"/"===r||"."===r||"enter"===r?r:null}(e);return r?a?"shift"===a&&(0,i.Fe)(t)&&(0,i.mr)(t)?null:"".concat(a,"+").concat(r):(0,i.Fe)(t)&&(0,i.mr)(t)?null:"".concat(r):null})(e)}),{name:"opencut-keybindings",version:1}))},14138:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(28064),n=a(74188),i=a(39124),l=a(93146);let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsxs)(i.Root,{ref:t,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",a),...n,children:[(0,r.jsx)(i.Track,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,r.jsx)(i.Range,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(i.Thumb,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow-sm transition-colors focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});s.displayName=i.Root.displayName},15467:(e,t,a)=>{a.d(t,{H:()=>i});var r=a(28064),n=a(93146);function i(e){let{leftContent:t,centerContent:a,rightContent:i,className:l,children:s}=e;return s?(0,r.jsx)("header",{className:(0,n.cn)("px-6 h-16 flex items-center",l),children:s}):(0,r.jsxs)("header",{className:(0,n.cn)("px-6 h-14 flex justify-between items-center",l),children:[t&&(0,r.jsx)("div",{className:"flex items-center",children:t}),a&&(0,r.jsx)("div",{className:"flex items-center",children:a}),i&&(0,r.jsx)("div",{className:"flex items-center",children:i})]})}},18873:(e,t,a)=>{a.d(t,{l:()=>eK});var r=a(28064),n=a(93146),i=a(43589),l=a(53093),s=a(81450),o=a(79649),d=a(38333),c=a(78456),u=a(40149),m=a(99469),f=a(26951),h=a(16219),p=a(59467);let x={media:{icon:i.A,label:"Media"},sounds:{icon:l.A,label:"Sounds"},text:{icon:s.A,label:"Text"},stickers:{icon:o.A,label:"Stickers"},effects:{icon:d.A,label:"Effects"},transitions:{icon:c.A,label:"Transitions"},captions:{icon:u.A,label:"Captions"},filters:{icon:m.A,label:"Filters"},adjustment:{icon:f.A,label:"Adjustment"},settings:{icon:h.A,label:"Settings"}},g=(0,p.v)(e=>({activeTab:"media",setActiveTab:t=>e({activeTab:t})}));var v=a(46438);function j(){let{activeTab:e,setActiveTab:t}=g();return(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"h-full px-4 flex flex-col justify-start items-center gap-5 overflow-x-auto scrollbar-x-hidden relative w-full py-4",children:Object.keys(x).map(a=>{let i=x[a];return(0,r.jsx)("div",{className:(0,n.cn)("flex z-[100] flex-col gap-0.5 items-center cursor-pointer",e===a?"text-primary !opacity-100":"text-muted-foreground"),onClick:()=>t(a),children:(0,r.jsxs)(v.m_,{delayDuration:10,children:[(0,r.jsx)(v.k$,{asChild:!0,children:(0,r.jsx)(i.icon,{className:"size-[1.1rem]! opacity-100 hover:opacity-75"})}),(0,r.jsx)(v.ZI,{side:"right",align:"center",variant:"sidebar",sideOffset:8,children:(0,r.jsx)("div",{className:"dark:text-base-gray-950 text-black text-sm font-medium leading-none dark:text-white",children:i.label})})]})},a)})})})}var y=a(74188);let b=e=>!e.types.includes("application/x-media-item")&&e.types.includes("Files");var w=a(47165),N=a(80196),C=a(93843),S=a(26880),k=a(83091),E=a(97946),T=a(57107),R=a(80965),A=a(61557),M=a(61309),P=a(95647);function I(e){let{isVisible:t,isProcessing:a=!1,progress:n=0,onClick:i,isEmptyState:l=!1}=e;return t?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 h-full text-center rounded-lg bg-foreground/5 hover:bg-foreground/10 transition-all duration-200 p-8",onClick:e=>{!a&&i&&(e.preventDefault(),e.stopPropagation(),i())},children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(P.A,{className:"h-10 w-10 text-foreground"})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)("p",{className:"text-xs text-muted-foreground max-w-sm",children:a?"Processing your files (".concat(n,"%)"):"Drag and drop videos, photos, and audio files here"})}),a&&(0,r.jsx)("div",{className:"w-full max-w-xs",children:(0,r.jsx)("div",{className:"w-full bg-muted/50 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:"".concat(n,"%")}})})})]}):null}var D=a(86434),L=a(54678);let z=a(26542).b;var F=a(82749),_=a(85794),O=a(81925);function B(e){let{name:t,preview:a,dragData:i,onDragStart:l,onAddToTimeline:s,aspectRatio:o=16/9,className:d="",showPlusOnDrag:c=!0,showLabel:u=!0,rounded:m=!0,variant:f="card"}=e,[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)({x:0,y:0}),v=(0,y.useRef)(null),j=(0,O.E)(e=>e.currentTime),b=()=>{null==s||s(j)},w=new window.Image;w.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",(0,y.useEffect)(()=>{if(!h)return;let e=e=>{g({x:e.clientX,y:e.clientY})};return document.addEventListener("dragover",e),()=>{document.removeEventListener("dragover",e)}},[h]);let N=e=>{e.dataTransfer.setDragImage(w,0,0),e.dataTransfer.setData("application/x-media-item",JSON.stringify(i)),e.dataTransfer.effectAllowed="copy",g({x:e.clientX,y:e.clientY}),p(!0),null==l||l(e)},C=()=>{p(!1)};return(0,r.jsxs)(r.Fragment,{children:["card"===f?(0,r.jsx)("div",{ref:v,className:"relative group w-28 h-28",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 p-0 h-auto w-full relative cursor-default ".concat(d),children:[(0,r.jsxs)(z,{ratio:o,className:(0,n.cn)("bg-panel-accent relative overflow-hidden",m&&"rounded-md","[&::-webkit-drag-ghost]:opacity-0"),draggable:!0,onDragStart:N,onDragEnd:C,children:[a,!h&&(0,r.jsx)(U,{className:"opacity-0 group-hover:opacity-100",onClick:b})]}),u&&(0,r.jsx)("span",{className:"text-[0.7rem] text-muted-foreground truncate w-full text-left","aria-label":t,title:t,children:t.length>8?"".concat(t.slice(0,16),"...").concat(t.slice(-3)):t})]})}):(0,r.jsx)("div",{ref:v,className:"relative group w-full",children:(0,r.jsxs)("div",{className:(0,n.cn)("h-10 flex items-center gap-3 cursor-default w-full","[&::-webkit-drag-ghost]:opacity-0",d),draggable:!0,onDragStart:N,onDragEnd:C,children:[(0,r.jsx)("div",{className:"w-6 h-6 flex-shrink-0 rounded overflow-hidden",children:a}),(0,r.jsx)("span",{className:"text-sm truncate flex-1 w-full",children:t})]})}),h&&"undefined"!=typeof document&&(0,F.createPortal)((0,r.jsx)("div",{className:"fixed pointer-events-none z-9999",style:{left:x.x-40,top:x.y-40},children:(0,r.jsx)("div",{className:"w-[80px]",children:(0,r.jsxs)(z,{ratio:1,className:"relative rounded-md overflow-hidden shadow-2xl ring-3 ring-primary",children:[(0,r.jsx)("div",{className:"w-full h-full [&_img]:w-full [&_img]:h-full [&_img]:object-cover [&_img]:rounded-none",children:a}),c&&(0,r.jsx)(U,{onClick:b,tooltipText:"Add to timeline or drag to position"})]})})}),document.body)]})}function U(e){let{className:t,onClick:a,tooltipText:i}=e,l=(0,r.jsx)(M.$,{size:"icon",className:(0,n.cn)("absolute bottom-2 right-2 size-4 bg-background text-foreground",t),onClick:e=>{e.preventDefault(),e.stopPropagation(),null==a||a()},title:i,children:(0,r.jsx)(_.A,{className:"size-3!"})});return i?(0,r.jsxs)(v.m_,{children:[(0,r.jsx)(v.k$,{asChild:!0,children:l}),(0,r.jsx)(v.ZI,{children:(0,r.jsx)("p",{children:i})})]}):l}var X=a(82337),H=a(91685),$=a(9466);function V(e){let{item:t,children:a,onRemove:n}=e;return(0,r.jsxs)(D.tz,{children:[(0,r.jsx)(D.Rc,{children:a}),(0,r.jsxs)(D.Ip,{children:[(0,r.jsx)(D.kt,{children:"Export clips"}),(0,r.jsx)(D.kt,{variant:"destructive",onClick:e=>n(e,t.id),children:"Delete"})]})]})}function Y(){let{mediaItems:e,addMediaItem:t,removeMediaItem:a}=(0,N.B)(),{activeProject:n}=(0,X.I)(),{mediaViewMode:s,setMediaViewMode:o}=(0,$.v)(),d=(0,y.useRef)(null),[c,u]=(0,y.useState)(!1),[m,f]=(0,y.useState)(0),[h,p]=(0,y.useState)(""),[x,g]=(0,y.useState)("all"),[j,P]=(0,y.useState)("name"),[D,z]=(0,y.useState)("asc"),F=async e=>{if(e&&0!==e.length){if(!n)return void A.oR.error("No active project");u(!0),f(0);try{for(let a of(await (0,w.T)(e,e=>f(e))))await t(n.id,a)}catch(e){A.oR.error("Failed to process files")}finally{u(!1),f(0)}}},{isDragOver:_,dragProps:O}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,y.useState)(!1),r=(0,y.useRef)(0);return{isDragOver:t,dragProps:{onDragEnter:e=>{e.preventDefault(),b(e.dataTransfer)&&(r.current+=1,t||a(!0))},onDragOver:e=>{if(e.preventDefault(),!b(e.dataTransfer))return},onDragLeave:e=>{e.preventDefault(),b(e.dataTransfer)&&(r.current-=1,0===r.current&&a(!1))},onDrop:t=>{t.preventDefault(),a(!1),r.current=0,e.onDrop&&t.dataTransfer.files&&b(t.dataTransfer)&&e.onDrop(t.dataTransfer.files)}}}}({onDrop:F}),B=()=>{var e;return null==(e=d.current)?void 0:e.click()},U=async(e,t)=>{if(e.stopPropagation(),!n)return void A.oR.error("No active project");await a(n.id,t)},H=e=>{let t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))},[V,Y]=(0,y.useState)(e);(0,y.useEffect)(()=>{let t=e.filter(e=>(!x||"all"===x||e.type===x)&&(!h||!!e.name.toLowerCase().includes(h.toLowerCase())));t.sort((e,t)=>{let a,r;switch(j){case"name":a=e.name.toLowerCase(),r=t.name.toLowerCase();break;case"type":a=e.type,r=t.type;break;case"duration":a=e.duration||0,r=t.duration||0;break;case"size":a=e.file.size,r=t.file.size;break;default:return 0}return a<r?"asc"===D?-1:1:a>r?"asc"===D?1:-1:0}),Y(t)},[e,x,h,j,D]);let K=(0,y.useMemo)(()=>{let e=new Map;return V.forEach(t=>{let a;a="image"===t.type?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("img",{src:t.url,alt:t.name,className:"max-w-full max-h-full object-contain",loading:"lazy"})}):"video"===t.type?t.thumbnailUrl?(0,r.jsxs)("div",{className:"relative w-full h-full",children:[(0,r.jsx)("img",{src:t.thumbnailUrl,alt:t.name,className:"w-full h-full object-cover rounded",loading:"lazy"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded",children:(0,r.jsx)(i.A,{className:"h-6 w-6 text-white drop-shadow-md"})}),t.duration&&(0,r.jsx)("div",{className:"absolute bottom-1 right-1 bg-black/70 text-white text-xs px-1 rounded",children:H(t.duration)})]}):(0,r.jsxs)("div",{className:"w-full h-full bg-muted/30 flex flex-col items-center justify-center text-muted-foreground rounded",children:[(0,r.jsx)(i.A,{className:"h-6 w-6 mb-1"}),(0,r.jsx)("span",{className:"text-xs",children:"Video"}),t.duration&&(0,r.jsx)("span",{className:"text-xs opacity-70",children:H(t.duration)})]}):"audio"===t.type?(0,r.jsxs)("div",{className:"w-full h-full bg-linear-to-br from-green-500/20 to-emerald-500/20 flex flex-col items-center justify-center text-muted-foreground rounded border border-green-500/20",children:[(0,r.jsx)(l.A,{className:"h-6 w-6 mb-1"}),(0,r.jsx)("span",{className:"text-xs",children:"Audio"}),t.duration&&(0,r.jsx)("span",{className:"text-xs opacity-70",children:H(t.duration)})]}):(0,r.jsxs)("div",{className:"w-full h-full bg-muted/30 flex flex-col items-center justify-center text-muted-foreground rounded",children:[(0,r.jsx)(C.A,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:"text-xs mt-1",children:"Unknown"})]}),e.set(t.id,a)}),e},[V]),q=e=>K.get(e.id);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:d,type:"file",accept:"image/*,video/*,audio/*",multiple:!0,className:"hidden",onChange:e=>{e.target.files&&F(e.target.files),e.target.value=""}}),(0,r.jsxs)("div",{className:"h-full flex flex-col gap-1 transition-colors relative ".concat(_?"bg-accent/30":""),...O,children:[(0,r.jsx)("div",{className:"p-3 pb-2 bg-panel",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(M.$,{variant:"outline",size:"lg",onClick:B,disabled:c,className:"!bg-background px-4 flex-1 justify-center items-center h-9 opacity-100 hover:opacity-75 transition-opacity",children:[c?(0,r.jsx)(S.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(k.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Upload"})]}),(0,r.jsx)("div",{className:"flex items-center gap-0",children:(0,r.jsx)(v.Bc,{children:(0,r.jsxs)(v.m_,{children:[(0,r.jsx)(v.k$,{asChild:!0,children:(0,r.jsx)(M.$,{size:"icon",variant:"text",onClick:()=>o("grid"===s?"list":"grid"),disabled:c,className:"justify-center items-center",children:"grid"===s?(0,r.jsx)(E.A,{strokeWidth:1.5,className:"!size-[1.05rem]"}):(0,r.jsx)(T.A,{strokeWidth:1.5,className:"!size-[1.05rem]"})})}),(0,r.jsx)(v.ZI,{children:(0,r.jsx)("p",{children:"grid"===s?"Switch to list view":"Switch to grid view"})}),(0,r.jsxs)(v.m_,{children:[(0,r.jsxs)(L.rI,{children:[(0,r.jsx)(v.k$,{asChild:!0,children:(0,r.jsx)(L.ty,{asChild:!0,children:(0,r.jsx)(M.$,{size:"icon",variant:"text",disabled:c,className:"justify-center items-center",children:(0,r.jsx)(R.A,{strokeWidth:1.5,className:"!size-[1.05rem]"})})})}),(0,r.jsxs)(L.SQ,{align:"end",children:[(0,r.jsxs)(L._2,{onClick:()=>{"name"===j?z("asc"===D?"desc":"asc"):(P("name"),z("asc"))},children:["Name"," ","name"===j&&("asc"===D?"":"")]}),(0,r.jsxs)(L._2,{onClick:()=>{"type"===j?z("asc"===D?"desc":"asc"):(P("type"),z("asc"))},children:["Type"," ","type"===j&&("asc"===D?"":"")]}),(0,r.jsxs)(L._2,{onClick:()=>{"duration"===j?z("asc"===D?"desc":"asc"):(P("duration"),z("asc"))},children:["Duration"," ","duration"===j&&("asc"===D?"":"")]}),(0,r.jsxs)(L._2,{onClick:()=>{"size"===j?z("asc"===D?"desc":"asc"):(P("size"),z("asc"))},children:["File Size"," ","size"===j&&("asc"===D?"":"")]})]})]}),(0,r.jsx)(v.ZI,{children:(0,r.jsxs)("p",{children:["Sort by ",j," (","asc"===D?"ascending":"descending",")"]})})]})]})})})]})}),(0,r.jsx)("div",{className:"h-full w-full overflow-y-auto scrollbar-thin",children:(0,r.jsx)("div",{className:"flex-1 p-3 pt-0 w-full",children:_||0===V.length?(0,r.jsx)(I,{isVisible:!0,isProcessing:c,progress:m,onClick:B,isEmptyState:0===V.length&&!_}):"grid"===s?(0,r.jsx)(W,{filteredMediaItems:V,renderPreview:q,handleRemove:U}):(0,r.jsx)(Z,{filteredMediaItems:V,renderPreview:q,handleRemove:U,formatDuration:H})})})]})]})}function W(e){let{filteredMediaItems:t,renderPreview:a,handleRemove:n}=e;return(0,r.jsx)("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, 160px)"},children:t.map(e=>(0,r.jsx)(V,{item:e,onRemove:n,children:(0,r.jsx)(B,{name:e.name,preview:a(e),dragData:{id:e.id,type:e.type,name:e.name},showPlusOnDrag:!1,onAddToTimeline:t=>H.A.getState().addMediaAtTime(e,t),rounded:!1,variant:"card"})},e.id))})}function Z(e){let{filteredMediaItems:t,renderPreview:a,handleRemove:n,formatDuration:i}=e;return(0,r.jsx)("div",{className:"space-y-1",children:t.map(e=>(0,r.jsx)(V,{item:e,onRemove:n,children:(0,r.jsx)(B,{name:e.name,preview:a(e),dragData:{id:e.id,type:e.type,name:e.name},showPlusOnDrag:!1,onAddToTimeline:t=>H.A.getState().addMediaAtTime(e,t),variant:"compact"})},e.id))})}var K=a(10952),q=a(67034),G=a(91048);let Q=G.Root,J=y.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(G.List,{ref:t,className:(0,n.cn)("inline-flex h-auto items-center justify-center gap-2 rounded-lg bg-transparent p-0 text-muted-foreground",a),...i})});J.displayName=G.List.displayName;let ee=y.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(G.Trigger,{ref:t,className:(0,n.cn)("inline-flex items-center cursor-pointer justify-center whitespace-nowrap rounded-lg px-3 py-1 text-sm font-medium ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-card data-[state=active]:text-foreground",a),...i})});ee.displayName=G.Trigger.displayName;let et=y.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(G.Content,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});function ea(e){let{children:t,className:a}=e;return(0,r.jsx)(K.F,{className:"flex-1",children:(0,r.jsx)("div",{className:"p-5 h-full ".concat(a),children:t})})}function er(e){let{children:t,defaultTab:a,tabs:n,className:i="",ref:l}=e;return(0,r.jsx)("div",{className:"h-full flex flex-col ".concat(i),ref:l,children:n&&0!==n.length?(0,r.jsxs)(Q,{defaultValue:a,className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"px-3 pt-4 pb-0",children:(0,r.jsx)(J,{children:n.map(e=>(0,r.jsx)(ee,{value:e.value,children:e.label},e.value))})}),(0,r.jsx)(q.Separator,{className:"mt-4"}),n.map(e=>(0,r.jsx)(et,{value:e.value,className:"mt-0 flex-1 flex flex-col min-h-0",children:(0,r.jsx)(ea,{children:e.content})},e.value))]}):(0,r.jsx)(ea,{className:i,children:t})})}et.displayName=G.Content.displayName;var en=a(87100);let ei={id:"default-text",type:"text",name:"Default text",content:"Default text",fontSize:48,fontFamily:"Arial",color:"#ffffff",backgroundColor:"transparent",textAlign:"center",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",x:0,y:0,rotation:0,opacity:1,duration:en.of.DEFAULT_TEXT_DURATION,startTime:0,trimStart:0,trimEnd:0};function el(){return(0,r.jsx)(er,{children:(0,r.jsx)(B,{name:"Default text",preview:(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full bg-panel-accent rounded",children:(0,r.jsx)("span",{className:"text-xs select-none",children:"Default text"})}),dragData:{id:ei.id,type:ei.type,name:ei.name,content:ei.content},aspectRatio:1,onAddToTimeline:e=>H.A.getState().addTextAtTime(ei,e),showLabel:!1})})}var es=a(84843),eo=a(37975),ed=a(11566),ec=a(45440),eu=a(47888),em=a(19439);let ef=(0,p.v)((e,t)=>({topSoundEffects:[],isLoading:!1,error:null,hasLoaded:!1,showCommercialOnly:!0,toggleCommercialFilter:()=>{e(e=>({showCommercialOnly:!e.showCommercialOnly}))},searchQuery:"",searchResults:[],isSearching:!1,searchError:null,lastSearchQuery:"",scrollPosition:0,currentPage:1,hasNextPage:!1,totalCount:0,isLoadingMore:!1,savedSounds:[],isSavedSoundsLoaded:!1,isLoadingSavedSounds:!1,savedSoundsError:null,setTopSoundEffects:t=>e({topSoundEffects:t}),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setHasLoaded:t=>e({hasLoaded:t}),setSearchQuery:t=>e({searchQuery:t}),setSearchResults:t=>e({searchResults:t,currentPage:1}),setSearching:t=>e({isSearching:t}),setSearchError:t=>e({searchError:t}),setLastSearchQuery:t=>e({lastSearchQuery:t}),setScrollPosition:t=>e({scrollPosition:t}),setCurrentPage:t=>e({currentPage:t}),setHasNextPage:t=>e({hasNextPage:t}),setTotalCount:t=>e({totalCount:t}),setLoadingMore:t=>e({isLoadingMore:t}),appendSearchResults:t=>e(e=>({searchResults:[...e.searchResults,...t]})),appendTopSounds:t=>e(e=>({topSoundEffects:[...e.topSoundEffects,...t]})),resetPagination:()=>e({currentPage:1,hasNextPage:!1,totalCount:0,isLoadingMore:!1}),loadSavedSounds:async()=>{if(!t().isSavedSoundsLoaded)try{e({isLoadingSavedSounds:!0,savedSoundsError:null});let t=await em.P.loadSavedSounds();e({savedSounds:t.sounds,isSavedSoundsLoaded:!0,isLoadingSavedSounds:!1})}catch(t){e({savedSoundsError:t instanceof Error?t.message:"Failed to load saved sounds",isLoadingSavedSounds:!1})}},saveSoundEffect:async t=>{try{await em.P.saveSoundEffect(t);let a=await em.P.loadSavedSounds();e({savedSounds:a.sounds})}catch(t){e({savedSoundsError:t instanceof Error?t.message:"Failed to save sound"}),A.oR.error("Failed to save sound")}},removeSavedSound:async t=>{try{await em.P.removeSavedSound(t),e(e=>({savedSounds:e.savedSounds.filter(e=>e.id!==t)}))}catch(t){e({savedSoundsError:t instanceof Error?t.message:"Failed to remove sound"}),A.oR.error("Failed to remove sound")}},isSoundSaved:e=>{let{savedSounds:a}=t();return a.some(t=>t.id===e)},toggleSavedSound:async e=>{let{isSoundSaved:a,saveSoundEffect:r,removeSavedSound:n}=t();a(e.id)?await n(e.id):await r(e)},clearSavedSounds:async()=>{try{await em.P.clearSavedSounds(),e({savedSounds:[],savedSoundsError:null})}catch(t){e({savedSoundsError:t instanceof Error?t.message:"Failed to clear saved sounds"}),A.oR.error("Failed to clear saved sounds")}},addSoundToTimeline:async e=>{let t=X.I.getState().activeProject;if(!t)return A.oR.error("No active project"),!1;let a=e.previewUrl;if(!a)return A.oR.error("Sound file not available"),!1;try{let r=await fetch(a);if(!r.ok)throw Error("Failed to download audio: ".concat(r.statusText));let n=await r.blob(),i=new File([n],"".concat(e.name,".mp3"),{type:"audio/mpeg"});await N.B.getState().addMediaItem(t.id,{name:e.name,type:"audio",file:i,duration:e.duration,url:URL.createObjectURL(i)});let l=N.B.getState().mediaItems.find(e=>e.file===i);if(!l)throw Error("Failed to create media item");if(H.A.getState().addMediaAtTime(l,O.E.getState().currentTime))return!0;throw Error("Failed to add to timeline - check for overlaps")}catch(t){return A.oR.error(t instanceof Error?t.message:"Failed to add sound to timeline",{id:"sound-".concat(e.id)}),!1}}}));var eh=a(66981);function ep(){return(0,r.jsx)("div",{className:"h-full flex flex-col",children:(0,r.jsxs)(Q,{defaultValue:"sound-effects",className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"px-3 pt-4 pb-0",children:(0,r.jsxs)(J,{children:[(0,r.jsx)(ee,{value:"sound-effects",children:"Sound effects"}),(0,r.jsx)(ee,{value:"songs",children:"Songs"}),(0,r.jsx)(ee,{value:"saved",children:"Saved"})]})}),(0,r.jsx)(q.Separator,{className:"my-4"}),(0,r.jsx)(et,{value:"sound-effects",className:"p-5 pt-0 mt-0 flex-1 flex flex-col min-h-0",children:(0,r.jsx)(ex,{})}),(0,r.jsx)(et,{value:"saved",className:"p-5 pt-0 mt-0 flex-1 flex flex-col min-h-0",children:(0,r.jsx)(eg,{})}),(0,r.jsx)(et,{value:"songs",className:"p-5 pt-0 mt-0 flex-1 flex flex-col min-h-0",children:(0,r.jsx)(ev,{})})]})})}function ex(){let{topSoundEffects:e,isLoading:t,searchQuery:a,setSearchQuery:i,scrollPosition:l,setScrollPosition:s,loadSavedSounds:o,isSoundSaved:d,toggleSavedSound:c,showCommercialOnly:u,toggleCommercialFilter:m}=ef(),{results:f,isLoading:h,loadMore:p,hasNextPage:x,isLoadingMore:g}=function(e,t){let{searchResults:a,isSearching:r,searchError:n,lastSearchQuery:i,currentPage:l,hasNextPage:s,isLoadingMore:o,totalCount:d,setSearchResults:c,setSearching:u,setSearchError:m,setLastSearchQuery:f,setCurrentPage:h,setHasNextPage:p,setTotalCount:x,setLoadingMore:g,appendSearchResults:v,appendTopSounds:j,resetPagination:b}=ef(),w=async()=>{if(!o&&s)try{g(!0);let a=l+1,r=new URLSearchParams({page:a.toString(),type:"effects"});e.trim()&&r.set("q",e),r.set("commercial_only",t.toString());let n=await fetch("/api/sounds/search?".concat(r.toString()));if(n.ok){let t=await n.json();e.trim()?v(t.results):j(t.results),h(a),p(!!t.next),x(t.count)}else m("Load more failed: ".concat(n.status))}catch(e){m(e instanceof Error?e.message:"Load more failed")}finally{g(!1)}};return(0,y.useEffect)(()=>{if(!e.trim()){c([]),m(null),f("");return}if(e===i&&a.length>0)return;let t=!1,r=setTimeout(async()=>{try{u(!0),m(null),b();let a=await fetch("/api/sounds/search?q=".concat(encodeURIComponent(e),"&type=effects&page=1"));if(!t)if(a.ok){let t=await a.json();c(t.results),f(e),p(!!t.next),x(t.count),h(1)}else m("Search failed: ".concat(a.status))}catch(e){t||m(e instanceof Error?e.message:"Search failed")}finally{t||u(!1)}},300);return()=>{clearTimeout(r),t=!0}},[e,i,a.length,c,u,m,f,h,p,x,b]),{results:a,isLoading:r,error:n,loadMore:w,hasNextPage:s,isLoadingMore:o,totalCount:d}}(a,u),[v,j]=(0,y.useState)(null),[b,w]=(0,y.useState)(null),N=(0,y.useRef)(null);(0,y.useEffect)(()=>{if(o(),N.current&&l>0){let e=setTimeout(()=>{var e;null==(e=N.current)||e.scrollTo({top:l})},100);return()=>clearTimeout(e)}},[]);let C=(0,y.useMemo)(()=>a?f:e,[a,f,e]);return(0,r.jsxs)("div",{className:"flex flex-col gap-5 mt-1 h-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(es.p,{placeholder:"Search sound effects",className:"bg-panel-accent w-full",containerClassName:"w-full",value:a,onChange:e=>i(e.target.value),showClearIcon:!0,onClear:()=>i("")}),(0,r.jsxs)(L.rI,{children:[(0,r.jsx)(L.ty,{asChild:!0,children:(0,r.jsx)(M.$,{variant:"text",size:"icon",className:(0,n.cn)(u&&"text-primary"),children:(0,r.jsx)(eo.A,{className:"w-4 h-4"})})}),(0,r.jsxs)(L.SQ,{align:"end",className:"w-56",children:[(0,r.jsx)(L.hO,{checked:u,onCheckedChange:m,children:"Show only commercially licensed"}),(0,r.jsx)("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:u?"Only showing sounds licensed for commercial use":"Showing all sounds regardless of license"})]})]})]}),(0,r.jsx)("div",{className:"relative h-full overflow-hidden",children:(0,r.jsx)(K.F,{className:"flex-1 h-full",ref:N,onScrollCapture:e=>{let{scrollTop:t,scrollHeight:a,clientHeight:r}=e.currentTarget;s(t),t+r>=a-200&&x&&!g&&!h&&p()},children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[t&&!a&&(0,r.jsx)("div",{className:"text-muted-foreground text-sm",children:"Loading sounds..."}),h&&a&&(0,r.jsx)("div",{className:"text-muted-foreground text-sm",children:"Searching..."}),C.map(e=>(0,r.jsx)(ej,{sound:e,isPlaying:v===e.id,onPlay:()=>(e=>{if(v===e.id){null==b||b.pause(),j(null);return}if(null==b||b.pause(),e.previewUrl){let t=new Audio(e.previewUrl);t.addEventListener("ended",()=>{j(null)}),t.addEventListener("error",e=>{j(null)}),t.play().catch(e=>{j(null)}),w(t),j(e.id)}})(e),isSaved:d(e.id),onToggleSaved:()=>c(e)},e.id)),!t&&!h&&0===C.length&&(0,r.jsx)("div",{className:"text-muted-foreground text-sm",children:a?"No sounds found":"No sounds available"}),g&&(0,r.jsx)("div",{className:"text-muted-foreground text-sm text-center py-4",children:"Loading more sounds..."})]})})})]})}function eg(){let{savedSounds:e,isLoadingSavedSounds:t,savedSoundsError:a,loadSavedSounds:n,isSoundSaved:i,toggleSavedSound:l,clearSavedSounds:s}=ef(),[o,d]=(0,y.useState)(null),[c,u]=(0,y.useState)(null),[m,f]=(0,y.useState)(!1);(0,y.useEffect)(()=>{n()},[n]);let h=e=>({id:e.id,name:e.name,description:"",url:"",previewUrl:e.previewUrl,downloadUrl:e.downloadUrl,duration:e.duration,filesize:0,type:"audio",channels:0,bitrate:0,bitdepth:0,samplerate:0,username:e.username,tags:e.tags,license:e.license,created:e.savedAt,downloads:0,rating:0,ratingCount:0});return t?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"text-muted-foreground text-sm",children:"Loading saved sounds..."})}):a?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-destructive text-sm",children:["Error: ",a]})}):0===e.length?(0,r.jsxs)("div",{className:"bg-panel h-full p-4 flex flex-col items-center justify-center gap-3",children:[(0,r.jsx)(ed.A,{className:"w-10 h-10 text-muted-foreground",strokeWidth:1.5}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-center",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:"No saved sounds"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-balance",children:"Click the heart icon on any sound to save it here"})]})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-5 mt-1 h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.length," saved"," ",1===e.length?"sound":"sounds"]}),(0,r.jsxs)(eh.lG,{open:m,onOpenChange:f,children:[(0,r.jsx)(eh.zM,{asChild:!0,children:(0,r.jsx)(M.$,{variant:"text",size:"sm",className:"h-auto text-muted-foreground hover:text-destructive !opacity-100",children:"Clear all"})}),(0,r.jsxs)(eh.Cf,{children:[(0,r.jsxs)(eh.c7,{children:[(0,r.jsx)(eh.L3,{children:"Clear all saved sounds?"}),(0,r.jsxs)(eh.rr,{children:["This will permanently remove all ",e.length," saved sounds from your collection. This action cannot be undone."]})]}),(0,r.jsxs)(eh.Es,{children:[(0,r.jsx)(M.$,{variant:"text",onClick:()=>f(!1),children:"Cancel"}),(0,r.jsx)(M.$,{variant:"destructive",onClick:async()=>{await s(),f(!1)},children:"Clear all sounds"})]})]})]})]}),(0,r.jsx)("div",{className:"relative h-full overflow-hidden",children:(0,r.jsx)(K.F,{className:"flex-1 h-full",children:(0,r.jsx)("div",{className:"flex flex-col gap-4",children:e.map(e=>(0,r.jsx)(ej,{sound:h(e),isPlaying:o===e.id,onPlay:()=>(e=>{if(o===e.id){null==c||c.pause(),d(null);return}if(null==c||c.pause(),e.previewUrl){let t=new Audio(e.previewUrl);t.addEventListener("ended",()=>{d(null)}),t.addEventListener("error",e=>{d(null)}),t.play().catch(e=>{d(null)}),u(t),d(e.id)}})(e),isSaved:i(e.id),onToggleSaved:()=>l(h(e))},e.id))})})})]})}function ev(){return(0,r.jsx)("div",{children:"Songs"})}function ej(e){let{sound:t,isPlaying:a,onPlay:n,isSaved:i,onToggleSaved:l}=e,{addSoundToTimeline:s}=ef(),o=async e=>{e.stopPropagation(),await s(t)};return(0,r.jsxs)("div",{className:"group flex items-center gap-3 opacity-100 hover:opacity-75 transition-opacity cursor-pointer",onClick:()=>{n()},children:[(0,r.jsxs)("div",{className:"relative w-12 h-12 bg-accent rounded-md flex items-center justify-center overflow-hidden shrink-0",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-transparent"}),a?(0,r.jsx)(ec.A,{className:"w-5 h-5"}):(0,r.jsx)(eu.A,{className:"w-5 h-5"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0 overflow-hidden",children:[(0,r.jsx)("p",{className:"font-medium truncate text-sm",children:t.name}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground truncate block",children:t.username})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 pr-2",children:[(0,r.jsx)(M.$,{variant:"text",size:"icon",className:"text-muted-foreground hover:text-foreground !opacity-100 w-auto",onClick:o,title:"Add to timeline",children:(0,r.jsx)(_.A,{className:"w-4 h-4"})}),(0,r.jsx)(M.$,{variant:"text",size:"icon",className:"hover:text-foreground !opacity-100 w-auto ".concat(i?"text-red-500 hover:text-red-600":"text-muted-foreground"),onClick:e=>{e.stopPropagation(),l()},title:i?"Remove from saved":"Save sound",children:(0,r.jsx)(ed.A,{className:"w-4 h-4 ".concat(i?"fill-current":"")})})]})]})}var ey=a(52801),eb=a(34248),ew=a(75141),eN=a(30461);let eC=["#ffffff","#000000","#ffe2e2","#ffc9c9","#ffa2a2","#ff6467","#fb2c36","#e7000b","#c10007","#9f0712","#82181a","#460809","#fff7ed","#ffedd4","#ffd6a7","#ffb86a","#ff8904","#ff6900","#f54900","#ca3500","#9f2d00","#7e2a0c","#441306","#fffbeb","#fef3c6","#fee685","#ffd230","#ffb900","#fe9a00","#e17100","#bb4d00","#973c00","#7b3306","#461901","#fefce8","#fef9c2","#fff085","#ffdf20","#fdc700","#f0b100","#d08700","#a65f00","#894b00","#733e0a","#432004","#f7fee7","#ecfcca","#d8f999","#bbf451","#9ae600","#7ccf00","#5ea500","#497d00","#3c6300","#35530e","#192e03","#f0fdf4","#dcfce7","#b9f8cf","#7bf1a8","#05df72","#00c950","#00a63e","#008236","#016630","#0d542b","#032e15","#ecfdf5","#d0fae5","#a4f4cf","#5ee9b5","#00d492","#00bc7d","#009966","#007a55","#006045","#004f3b","#002c22","#f0fdfa","#cbfbf1","#96f7e4","#46ecd5","#00d5be","#00bba7","#009689","#00786f","#005f5a","#0b4f4a","#022f2e","#ecfeff","#cefafe","#a2f4fd","#53eafd","#00d3f2","#00b8db","#0092b8","#007595","#005f78","#104e64","#053345","#f0f9ff","#dff2fe","#b8e6fe","#74d4ff","#00bcff","#00a6f4","#0084d1","#0069a8","#00598a","#024a70","#052f4a","#eff6ff","#dbeafe","#bedbff","#8ec5ff","#51a2ff","#2b7fff","#155dfc","#1447e6","#193cb8","#1c398e","#162456","#eef2ff","#e0e7ff","#c6d2ff","#a3b3ff","#7c86ff","#615fff","#4f39f6","#432dd7","#372aac","#312c85","#1e1a4d","#f5f3ff","#ede9fe","#ddd6ff","#c4b4ff","#a684ff","#8e51ff","#7f22fe","#7008e7","#5d0ec0","#4d179a","#2f0d68","#faf5ff","#f3e8ff","#e9d4ff","#dab2ff","#c27aff","#ad46ff","#9810fa","#8200db","#6e11b0","#59168b","#3c0366","#fdf4ff","#fae8ff","#f6cfff","#f4a8ff","#ed6aff","#e12afb","#c800de","#a800b7","#8a0194","#721378","#4b004f","#fdf2f8","#fce7f3","#fccee8","#fda5d5","#fb64b6","#f6339a","#e60076","#c6005c","#a3004c","#861043","#510424","#fff1f2","#ffe4e6","#ffccd3","#ffa1ad","#ff637e","#ff2056","#ec003f","#c70036","#a50036","#8b0836","#4d0218","#f8fafc","#f1f5f9","#e2e8f0","#cad5e2","#90a1b9","#62748e","#45556c","#314158","#1d293d","#0f172b","#020618","#f9fafb","#f3f4f6","#e5e7eb","#d1d5dc","#99a1af","#6a7282","#4a5565","#364153","#1e2939","#101828","#030712","#fafafa","#f4f4f5","#e4e4e7","#d4d4d8","#9f9fa9","#71717b","#52525c","#3f3f46","#27272a","#18181b","#09090b","#f5f5f5","#e5e5e5","#d4d4d4","#a1a1a1","#737373","#525252","#404040","#262626","#171717","#0a0a0a","#fafaf9","#f5f5f4","#e7e5e4","#d6d3d1","#a6a09b","#79716b","#57534d","#44403b","#292524","#1c1917","#0c0a09"],eS=["radial-gradient(circle at 30% 70%, rgba(173, 216, 230, 0.35), transparent 60%), radial-gradient(circle at 70% 30%, rgba(255, 182, 193, 0.4), transparent 60%)","radial-gradient(circle at 20% 80%, rgba(255, 182, 153, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 244, 214, 0.5) 0%, transparent 50%), radial-gradient(circle at 40% 40%, rgba(255, 182, 153, 0.1) 0%, transparent 50%), #fff8f0","radial-gradient(circle at 20% 80%, rgba(255, 160, 146, 0.25) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 244, 228, 0.3) 0%, transparent 50%), radial-gradient(circle at 40% 40%, rgba(255, 160, 146, 0.15) 0%, transparent 50%), #fef9f7","radial-gradient(circle at center, #8FFFB0, transparent), white","radial-gradient(circle at top right, rgba(173, 109, 244, 0.5), transparent 70%)","radial-gradient(circle at top right, rgba(56, 193, 182, 0.5), transparent 70%)","radial-gradient(circle at top right, rgba(255, 140, 60, 0.5), transparent 70%)","radial-gradient(circle at top right, rgba(70, 130, 180, 0.5), transparent 70%)","radial-gradient(circle at top left, rgba(173, 109, 244, 0.5), transparent 70%)","linear-gradient(120deg, #d5c5ff 0%, #a7f3d0 50%, #f0f0f0 100%)"];var ek=a(2245);let eE=["linear-gradient(to right, #22d3ee, #0ea5e9, #0284c7)","linear-gradient(to right, #bfdbfe, #a5f3fc)","linear-gradient(to right, #22d3ee, #0ea5e9, #0284c7)","linear-gradient(to right, #e9d5ff, #d8b4fe, #c084fc)","linear-gradient(to right, #c4b5fd, #a78bfa, #8b5cf6)","linear-gradient(to right, #93c5fd, #60a5fa, #3b82f6)","linear-gradient(to right, #93c5fd, #60a5fa, #3b82f6)","linear-gradient(to right, #6ee7b7, #34d399, #10b981)","linear-gradient(to right, #d1fae5, #a7f3d0, #6ee7b7)","linear-gradient(to right, #fca5a5, #f87171, #ef4444)","linear-gradient(to right, #fde68a, #fbbf24, #f59e0b)","linear-gradient(to right, #fbcfe8, #f9a8d4, #f472b6)","radial-gradient(circle at bottom left, #ff00ff, #00ffff)"];function eT(){return(0,r.jsx)(eR,{})}function eR(){return(0,r.jsx)(er,{defaultTab:"project-info",tabs:[{value:"project-info",label:"Project info",content:(0,r.jsx)(eA,{})},{value:"background",label:"Background",content:(0,r.jsx)(eI,{})}]})}function eA(){let{activeProject:e,updateProjectFps:t,updateCanvasSize:a}=(0,X.I)(),{canvasPresets:n}=(0,ew.U)(),{getDisplayName:i}=function(){let{canvasPresets:e}=(0,ew.U)(),{activeProject:t}=(0,X.I)(),{mediaItems:a}=(0,N.B)(),{tracks:r}=(0,H.A)(),n=(null==t?void 0:t.canvasSize)||X.l,i=(null==t?void 0:t.canvasMode)||"preset",l=e.find(e=>e.width===n.width&&e.height===n.height),s=()=>n.width/n.height,o=e=>{for(let{ratio:t,label:a}of[{ratio:16/9,label:"16:9"},{ratio:9/16,label:"9:16"},{ratio:1,label:"1:1"},{ratio:4/3,label:"4:3"},{ratio:3/4,label:"3:4"},{ratio:21/9,label:"21:9"}])if(.01>Math.abs(e-t))return a;return e.toFixed(2)};return{currentPreset:l,canvasMode:i,isOriginal:"original"===i,getCurrentAspectRatio:s,getOriginalAspectRatio:()=>{for(let e of r)for(let t of e.elements)if("media"===t.type){let e=a.find(e=>e.id===t.mediaId);if(e&&("video"===e.type||"image"===e.type))return(0,N.C)(e)}return 16/9},formatAspectRatio:o,getDisplayName:()=>"original"===i?"Original":l?l.name:o(s()),canvasSize:n,canvasPresets:e}}();return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)(eb.DC,{direction:"column",children:[(0,r.jsx)(eb.Tq,{children:"Name"}),(0,r.jsx)(eb.Wg,{children:(null==e?void 0:e.name)||"Untitled project"})]}),(0,r.jsxs)(eb.DC,{direction:"column",children:[(0,r.jsx)(eb.Tq,{children:"Aspect ratio"}),(0,r.jsx)(eb.Wg,{children:(0,r.jsxs)(ey.l6,{value:i(),onValueChange:e=>{let t=n.find(t=>t.name===e);t&&a({width:t.width,height:t.height},"preset")},children:[(0,r.jsx)(ey.bq,{className:"bg-panel-accent",children:(0,r.jsx)(ey.yv,{placeholder:"Select an aspect ratio"})}),(0,r.jsx)(ey.gC,{children:n.map(e=>(0,r.jsx)(ey.eb,{value:e.name,children:e.name},e.name))})]})})]}),(0,r.jsxs)(eb.DC,{direction:"column",children:[(0,r.jsx)(eb.Tq,{children:"Frame rate"}),(0,r.jsx)(eb.Wg,{children:(0,r.jsxs)(ey.l6,{value:((null==e?void 0:e.fps)||30).toString(),onValueChange:e=>{t(parseFloat(e))},children:[(0,r.jsx)(ey.bq,{className:"bg-panel-accent",children:(0,r.jsx)(ey.yv,{placeholder:"Select a frame rate"})}),(0,r.jsx)(ey.gC,{children:en.Tm.map(e=>(0,r.jsx)(ey.eb,{value:e.value,children:e.label},e.value))})]})})]})]})}let eM=(0,y.memo)(e=>{let{blur:t,isSelected:a,onSelect:i}=e;return(0,r.jsxs)("div",{className:(0,n.cn)("w-full aspect-square rounded-sm cursor-pointer border border-foreground/15 hover:border-primary relative overflow-hidden",a&&"border-2 border-primary"),onClick:i,children:[(0,r.jsx)(eN.default,{src:"https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Blur preview ".concat(t.label),fill:!0,className:"object-cover",style:{filter:"blur(".concat(t.value,"px)")},loading:"eager"}),(0,r.jsx)("div",{className:"absolute bottom-1 left-1 right-1 text-center",children:(0,r.jsx)("span",{className:"text-xs text-white bg-black/50 px-1 rounded",children:t.label})})]})});eM.displayName="BlurPreview";let eP=(0,y.memo)(e=>{let{backgrounds:t,currentBackgroundColor:a,isColorBackground:i,handleColorSelect:l,useBackgroundColor:s=!1}=e;return(0,y.useMemo)(()=>t.map(e=>(0,r.jsx)("div",{className:(0,n.cn)("w-full aspect-square rounded-sm cursor-pointer border border-foreground/15 hover:border-primary",i&&e===a&&"border-2 border-primary"),style:s?{backgroundColor:e}:{background:e,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},onClick:()=>l(e)},e)),[t,i,a,l,s])});function eI(){let{activeProject:e,updateBackgroundType:t}=(0,X.I)(),a=(0,y.useMemo)(()=>[{label:"Light",value:4},{label:"Medium",value:8},{label:"Heavy",value:18}],[]),n=(0,y.useCallback)(async e=>{await t("blur",{blurIntensity:e})},[t]),i=(0,y.useCallback)(async e=>{await t("color",{backgroundColor:e})},[t]),l=(null==e?void 0:e.blurIntensity)||8,s=(null==e?void 0:e.backgroundType)==="blur",o=(null==e?void 0:e.backgroundColor)||"#000000",d=(null==e?void 0:e.backgroundType)==="color",c=(0,y.useMemo)(()=>a.map(e=>(0,r.jsx)(eM,{blur:e,isSelected:s&&l===e.value,onSelect:()=>n(e.value)},e.value)),[a,s,l,n]);return(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(eb.Zf,{title:"Blur",defaultExpanded:!1,children:(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 w-full",children:c})}),(0,r.jsx)(eb.Zf,{title:"Colors",defaultExpanded:!1,children:(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 w-full",children:[(0,r.jsx)("div",{className:"w-full aspect-square rounded-sm cursor-pointer border border-foreground/15 hover:border-primary flex items-center justify-center",children:(0,r.jsx)(ek.A,{className:"size-4"})}),(0,r.jsx)(eP,{backgrounds:eC,currentBackgroundColor:o,isColorBackground:d,handleColorSelect:i,useBackgroundColor:!0})]})}),(0,r.jsx)(eb.Zf,{title:"Pattern Craft",defaultExpanded:!1,children:(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 w-full",children:(0,r.jsx)(eP,{backgrounds:eS,currentBackgroundColor:o,isColorBackground:d,handleColorSelect:i})})}),(0,r.jsx)(eb.Zf,{title:"Syntax UI",defaultExpanded:!1,children:(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 w-full",children:(0,r.jsx)(eP,{backgrounds:eE,currentBackgroundColor:o,isColorBackground:d,handleColorSelect:i})})})]})}eP.displayName="BackgroundPreviews";var eD=a(50587),eL=a(90320),ez=a(29584),eF=a(53791);function e_(e){let{languages:t}=e;return(0,r.jsx)("div",{className:"absolute -top-[9999px] left-0 pointer-events-none",children:t.map(e=>(0,r.jsx)(eF.A,{countryCode:e.code,svg:!0,style:{width:"1.05rem",height:"1.05rem"}},e.code))})}function eO(e){let{selectedCountry:t,onSelect:a,containerRef:i,languages:l}=e,[s,o]=(0,y.useState)(!1),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),f="2.5rem",h=(0,y.useRef)(null);(0,y.useEffect)(()=>{if(!s)return;let e=e=>{if(h.current&&!h.current.contains(e.target)){var t;m(!0),setTimeout(()=>m(!1),600),o(!1),null==(t=h.current)||t.blur()}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]);let p=l.find(e=>e.code===t),x=e=>{let{code:t,e:r}=e;r.stopPropagation(),r.preventDefault(),a(t),o(!1)};return(0,r.jsxs)("div",{className:"relative w-full h-9",children:[(0,r.jsx)(e_,{languages:l}),(0,r.jsx)(ez.P.button,{type:"button",className:(0,n.cn)("absolute w-full h-full flex flex-col overflow-hidden items-start justify-between z-10 rounded-lg px-3 cursor-pointer","!bg-foreground/10 backdrop-blur-md text-foreground py-0","transition-[color,box-shadow] focus:border-ring focus:ring-ring/50 focus:ring-[1px]"),initial:{height:f,scale:1},animate:{height:s?"12rem":f,scale:d?[1,.985,1]:1},transition:{height:{duration:.25,ease:[.4,0,.2,1]},scale:{duration:.6,ease:"easeOut"}},onClick:()=>{var e;c(!0),setTimeout(()=>c(!1),600),o(!0),null==(e=h.current)||e.focus()},ref:h,children:s?(0,r.jsxs)("div",{className:"flex flex-col gap-2 my-2.5 w-full overflow-y-auto scrollbar-hidden",children:[(0,r.jsx)(eB,{language:{code:"auto",name:"Auto"},onSelect:x,selectedCountry:t}),l.map(e=>(0,r.jsx)(eB,{language:e,onSelect:x,selectedCountry:t},e.code))]}):(0,r.jsx)("div",{className:"flex items-center justify-between w-full",style:{height:f},children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["auto"===t?(0,r.jsx)(eD.A,{className:"!size-[1.05rem]"}):(0,r.jsx)(eF.A,{countryCode:t,svg:!0,style:{width:"1.05rem",height:"1.05rem"}}),(0,r.jsx)("span",{className:"pt-[0.05rem]",children:"auto"===t?"Auto":null==p?void 0:p.name})]})})}),(0,r.jsx)(ez.P.div,{className:"absolute top-1/2 right-3 -translate-y-1/2 pointer-events-none z-20 mt-0.5",initial:{opacity:1},animate:{opacity:+!s},transition:{duration:.2,ease:"easeInOut"},children:(0,r.jsx)(eL.A,{className:"text-muted-foreground size-4"})})]})}function eB(e){let{language:t,onSelect:a,selectedCountry:n}=e;return(0,r.jsxs)("button",{type:"button",className:"flex items-center gap-2 cursor-pointer text-foreground hover:text-foreground/75",onClick:e=>a({code:t.code,e}),children:["auto"===t.code?(0,r.jsx)(eD.A,{className:"!size-[1.0rem]"}):(0,r.jsx)(eF.A,{countryCode:t.code,svg:!0,style:{width:"1.05rem",height:"1.05rem"}}),(0,r.jsx)("span",{className:"pt-[0.05rem]",children:t.name})]})}var eU=a(70028);async function eX(e){let t=crypto.getRandomValues(new Uint8Array(32)),a=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.importKey("raw",t,{name:" "},!1,["encrypt"]);return{encryptedData:await crypto.subtle.encrypt({name:"AES-GCM",iv:a},r,e),key:t.buffer,iv:a.buffer}}function eH(e){let t=new Uint8Array(e),a="";for(let e=0;e<t.byteLength;e++)a+=String.fromCharCode(t[e]);return btoa(a)}var e$=a(58671),eV=a(73539);let eY=[{code:"US",name:"English"},{code:"ES",name:"Spanish"},{code:"IT",name:"Italian"},{code:"FR",name:"French"},{code:"DE",name:"German"},{code:"PT",name:"Portuguese"},{code:"RU",name:"Russian"},{code:"JP",name:"Japanese"},{code:"CN",name:"Chinese"}],eW="opencut-transcription-privacy-accepted";function eZ(){let[e,t]=(0,y.useState)("auto"),[a,n]=(0,y.useState)(!1),[i,l]=(0,y.useState)(""),[s,o]=(0,y.useState)(null),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),f=(0,y.useRef)(null),{insertTrackAt:h,addElementToTrack:p}=(0,H.A)();(0,y.useEffect)(()=>{m("true"===localStorage.getItem(eW))},[]);let x=async()=>{try{n(!0),o(null),l("Extracting audio...");let t=await (0,eU.Pt)();l("Encrypting audio...");let a=await t.arrayBuffer(),r=await eX(a),i=new Blob([r.encryptedData]);l("Uploading...");let s=await fetch("/api/get-upload-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileExtension:"wav"})});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to get upload URL")}let{uploadUrl:d,fileName:c}=await s.json();await fetch(d,{method:"PUT",body:i}),l("Transcribing...");let u=await fetch("/api/transcribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:c,language:"auto"===e?"auto":e.toLowerCase(),decryptionKey:eH(r.key),iv:eH(r.iv)})});if(!u.ok){let e=await u.json();throw Error(e.message||"Transcription failed")}let{text:m,segments:f}=await u.json(),x=[],g=0;f.forEach(e=>{let t=e.text.trim().split(/\s+/),a=e.end-e.start,r=t.length/a,n=[];for(let e=0;e<t.length;e+=3)n.push(t.slice(e,e+3).join(" "));let i=e.start;n.forEach(e=>{let t=e.split(/\s+/).length,a=Math.max(.8,t/r),n=i;n<g&&(n=g),x.push({text:e,startTime:n,duration:a}),g=n+a,i+=a})});let v=h("text",0);x.forEach((e,t)=>{p(v,{type:"text",name:"Caption ".concat(t+1),content:e.text,duration:e.duration,startTime:e.startTime,trimStart:0,trimEnd:0,fontSize:65,fontFamily:"Arial",color:"#ffffff",textAlign:"center",fontWeight:"bold",fontStyle:"normal",textDecoration:"none",x:0,y:0,rotation:0,opacity:1})})}catch(e){o(e instanceof Error?e.message:"An unexpected error occurred")}finally{n(!1),l("")}};return(0,r.jsxs)(er,{ref:f,className:"flex flex-col justify-between",children:[(0,r.jsx)(eb.Zf,{title:"Language",children:(0,r.jsx)(eO,{selectedCountry:e,onSelect:t,containerRef:f,languages:eY})}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[s&&(0,r.jsx)("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-destructive",children:s})}),(0,r.jsxs)(M.$,{className:"w-full",onClick:()=>{u?x():c(!0)},disabled:a,children:[a&&(0,r.jsx)(S.A,{className:"mr-1 h-4 w-4 animate-spin"}),a?i:"Generate transcript"]}),(0,r.jsx)(eh.lG,{open:d,onOpenChange:c,children:(0,r.jsxs)(eh.Cf,{className:"sm:max-w-md",children:[(0,r.jsxs)(eh.c7,{children:[(0,r.jsxs)(eh.L3,{className:"flex items-center gap-2",children:[(0,r.jsx)(e$.A,{className:"h-5 w-5"}),"Audio Processing Notice"]}),(0,r.jsxs)(eh.rr,{className:"space-y-3",children:[(0,r.jsx)("p",{children:"To generate captions, we need to process your timeline audio using speech-to-text technology."}),(0,r.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(e$.A,{className:"h-4 w-4 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm",children:"Zero-knowledge encryption - we cannot decrypt your files even if we wanted to"})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(e$.A,{className:"h-4 w-4 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm",children:"Encryption keys generated randomly in your browser, never stored anywhere"})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm",children:"Audio encrypted before upload - raw audio never leaves your device"})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(eV.A,{className:"h-4 w-4 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm",children:"Everything permanently deleted within seconds after transcription"})]})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,r.jsx)("strong",{children:"True zero-knowledge privacy:"})," Encryption keys are generated randomly in your browser and never stored anywhere. It's cryptographically impossible for us, our cloud providers, or anyone else to decrypt your audio files."]})]})]}),(0,r.jsxs)(eh.Es,{className:"gap-2",children:[(0,r.jsx)(M.$,{variant:"outline",onClick:()=>c(!1),disabled:a,children:"Cancel"}),(0,r.jsx)(M.$,{onClick:()=>{localStorage.setItem(eW,"true"),m(!0),c(!1),x()},disabled:a,children:"Continue & Generate Captions"})]})]})})]})]})}function eK(){let{activeTab:e}=g(),t={media:(0,r.jsx)(Y,{}),sounds:(0,r.jsx)(ep,{}),text:(0,r.jsx)(el,{}),stickers:(0,r.jsx)("div",{className:"p-4 text-muted-foreground",children:"Stickers view coming soon..."}),effects:(0,r.jsx)("div",{className:"p-4 text-muted-foreground",children:"Effects view coming soon..."}),transitions:(0,r.jsx)("div",{className:"p-4 text-muted-foreground",children:"Transitions view coming soon..."}),captions:(0,r.jsx)(eZ,{}),filters:(0,r.jsx)("div",{className:"p-4 text-muted-foreground",children:"Filters view coming soon..."}),adjustment:(0,r.jsx)("div",{className:"p-4 text-muted-foreground",children:"Adjustment view coming soon..."}),settings:(0,r.jsx)(eT,{})};return(0,r.jsxs)("div",{className:"h-full flex bg-panel",children:[(0,r.jsx)(j,{}),(0,r.jsx)(q.Separator,{orientation:"vertical"}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:t[e]})]})}},31744:(e,t,a)=>{a.d(t,{E:()=>b});var r=a(28064),n=a(80196),i=a(91685),l=a(10952);function s(e){let{element:t}=e;return(0,r.jsx)("div",{className:"space-y-4 p-5",children:"Audio properties"})}function o(e){let{element:t}=e;return(0,r.jsx)("div",{className:"space-y-4 p-5",children:"Media properties"})}var d=a(74188),c=a(93146);let u=d.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("textarea",{className:(0,c.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-base shadow-xs placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-0 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-xs",a),ref:t,...n})});u.displayName="Textarea";var m=a(52801);let f=[{value:"Arial",label:"Arial",category:"system",hasClassName:!1},{value:"Helvetica",label:"Helvetica",category:"system",hasClassName:!1},{value:"Times New Roman",label:"Times New Roman",category:"system",hasClassName:!1},{value:"Georgia",label:"Georgia",category:"system",hasClassName:!1},{value:"Inter",label:"Inter",category:"google",weights:[400,700],hasClassName:!0},{value:"Roboto",label:"Roboto",category:"google",weights:[400,700],hasClassName:!0},{value:"Open Sans",label:"Open Sans",category:"google",hasClassName:!0},{value:"Playfair Display",label:"Playfair Display",category:"google",hasClassName:!0},{value:"Comic Neue",label:"Comic Neue",category:"google",hasClassName:!1}];function h(e){let{defaultValue:t,onValueChange:a,className:n}=e;return(0,r.jsxs)(m.l6,{defaultValue:t,onValueChange:a,children:[(0,r.jsx)(m.bq,{className:"w-full text-xs ".concat(n||""),children:(0,r.jsx)(m.yv,{placeholder:"Select a font"})}),(0,r.jsx)(m.gC,{children:f.map(e=>(0,r.jsx)(m.eb,{value:e.value,className:"text-xs",style:{fontFamily:e.value},children:e.label},e.value))})]})}var p=a(14138),x=a(84843),g=a(61309),v=a(34248);function j(e){let{element:t,trackId:a}=e,{updateTextElement:n}=(0,i.A)(),[l,s]=(0,d.useState)(t.fontSize.toString()),[o,c]=(0,d.useState)(Math.round(100*t.opacity).toString()),m=(e,t,a,r)=>{let n=parseInt(e,10);return isNaN(n)?r:Math.max(t,Math.min(a,n))};return(0,r.jsxs)("div",{className:"space-y-6 p-5",children:[(0,r.jsx)(u,{placeholder:"Name",defaultValue:t.content,className:"min-h-18 resize-none bg-background/50",onChange:e=>n(a,t.id,{content:e.target.value})}),(0,r.jsxs)(v.DC,{direction:"row",children:[(0,r.jsx)(v.Tq,{children:"Font"}),(0,r.jsx)(v.Wg,{children:(0,r.jsx)(h,{defaultValue:t.fontFamily,onValueChange:e=>n(a,t.id,{fontFamily:e})})})]}),(0,r.jsxs)(v.DC,{direction:"column",children:[(0,r.jsxs)(v.DC,{direction:"row",children:[(0,r.jsx)(v.Tq,{children:"Style"}),(0,r.jsx)(v.Wg,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.$,{variant:"bold"===t.fontWeight?"default":"outline",size:"sm",onClick:()=>n(a,t.id,{fontWeight:"bold"===t.fontWeight?"normal":"bold"}),className:"h-8 px-3 font-bold",children:"B"}),(0,r.jsx)(g.$,{variant:"italic"===t.fontStyle?"default":"outline",size:"sm",onClick:()=>n(a,t.id,{fontStyle:"italic"===t.fontStyle?"normal":"italic"}),className:"h-8 px-3 italic",children:"I"}),(0,r.jsx)(g.$,{variant:"underline"===t.textDecoration?"default":"outline",size:"sm",onClick:()=>n(a,t.id,{textDecoration:"underline"===t.textDecoration?"none":"underline"}),className:"h-8 px-3 underline",children:"U"}),(0,r.jsx)(g.$,{variant:"line-through"===t.textDecoration?"default":"outline",size:"sm",onClick:()=>n(a,t.id,{textDecoration:"line-through"===t.textDecoration?"none":"line-through"}),className:"h-8 px-3 line-through",children:"S"})]})})]}),(0,r.jsx)(v.Tq,{children:"Font size"}),(0,r.jsx)(v.Wg,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{value:[t.fontSize],min:8,max:300,step:1,onValueChange:e=>{let[r]=e;n(a,t.id,{fontSize:r}),s(r.toString())},className:"w-full"}),(0,r.jsx)(x.p,{type:"number",value:l,min:8,max:300,onChange:e=>(e=>{if(s(e),""!==e.trim()){let r=m(e,8,300,t.fontSize);n(a,t.id,{fontSize:r})}})(e.target.value),onBlur:()=>{let e=m(l,8,300,t.fontSize);s(e.toString()),n(a,t.id,{fontSize:e})},className:"w-12 !text-xs h-7 rounded-sm text-center   [appearance:textfield]   [&::-webkit-outer-spin-button]:appearance-none   [&::-webkit-inner-spin-button]:appearance-none"})]})})]}),(0,r.jsxs)(v.DC,{direction:"row",children:[(0,r.jsx)(v.Tq,{children:"Color"}),(0,r.jsx)(v.Wg,{children:(0,r.jsx)(x.p,{type:"color",value:t.color||"#ffffff",onChange:e=>{let r=e.target.value;n(a,t.id,{color:r})},className:"w-full cursor-pointer rounded-full"})})]}),(0,r.jsxs)(v.DC,{direction:"row",children:[(0,r.jsx)(v.Tq,{children:"Background"}),(0,r.jsx)(v.Wg,{children:(0,r.jsx)(x.p,{type:"color",value:"transparent"===t.backgroundColor?"#000000":t.backgroundColor||"#000000",onChange:e=>{let r=e.target.value;n(a,t.id,{backgroundColor:r})},className:"w-full cursor-pointer rounded-full"})})]}),(0,r.jsxs)(v.DC,{direction:"column",children:[(0,r.jsx)(v.Tq,{children:"Opacity"}),(0,r.jsx)(v.Wg,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{value:[100*t.opacity],min:0,max:100,step:1,onValueChange:e=>{let[r]=e;n(a,t.id,{opacity:r/100}),c(r.toString())},className:"w-full"}),(0,r.jsx)(x.p,{type:"number",value:o,min:0,max:100,onChange:e=>(e=>{if(c(e),""!==e.trim()){let r=m(e,0,100,Math.round(100*t.opacity));n(a,t.id,{opacity:r/100})}})(e.target.value),onBlur:()=>{let e=m(o,0,100,Math.round(100*t.opacity));c(e.toString()),n(a,t.id,{opacity:e/100})},className:"w-12 !text-xs h-7 rounded-sm text-center   [appearance:textfield]   [&::-webkit-outer-spin-button]:appearance-none   [&::-webkit-inner-spin-button]:appearance-none"})]})})]})]})}var y=a(24565);function b(){let{selectedElements:e,tracks:t}=(0,i.A)(),{mediaItems:a}=(0,n.B)();return(0,r.jsx)(r.Fragment,{children:e.length>0?(0,r.jsx)(l.F,{className:"h-full bg-panel rounded-sm",children:e.map(e=>{let{trackId:n,elementId:i}=e,l=t.find(e=>e.id===n),d=null==l?void 0:l.elements.find(e=>e.id===i);if((null==d?void 0:d.type)==="text")return(0,r.jsx)("div",{children:(0,r.jsx)(j,{element:d,trackId:n})},i);if((null==d?void 0:d.type)==="media"){let e=a.find(e=>e.id===d.mediaId);return(null==e?void 0:e.type)==="audio"?(0,r.jsx)(s,{element:d},i):(0,r.jsx)("div",{children:(0,r.jsx)(o,{element:d})},i)}return null})}):(0,r.jsx)(w,{})})}function w(){return(0,r.jsxs)("div",{className:"bg-panel h-full p-4 flex flex-col items-center justify-center gap-3",children:[(0,r.jsx)(y.A,{className:"w-10 h-10 text-muted-foreground",strokeWidth:1.5}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-center",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:"Its empty here"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-balance",children:"Click an element on the timeline to edit its properties"})]})]})}},34248:(e,t,a)=>{a.d(t,{DC:()=>s,Tq:()=>o,Wg:()=>d,Zf:()=>c});var r=a(28064),n=a(93146),i=a(90320),l=a(74188);function s(e){let{direction:t="row",children:a,className:i}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex gap-2","row"===t?"items-center justify-between gap-6":"flex-col gap-1.5",i),children:a})}function o(e){let{children:t,className:a}=e;return(0,r.jsx)("label",{className:(0,n.cn)("text-xs text-muted-foreground",a),children:t})}function d(e){let{children:t,className:a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex-1 text-sm",a),children:t})}function c(e){let{title:t,children:a,defaultExpanded:c=!0,className:u}=e,[m,f]=(0,l.useState)(c);return(0,r.jsxs)(s,{direction:"column",className:(0,n.cn)("gap-3",u),children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 cursor-pointer",onClick:()=>f(!m),children:[(0,r.jsx)(o,{className:"cursor-pointer",children:t}),(0,r.jsx)(i.A,{className:(0,n.cn)("size-3",!m&&"-rotate-90")})]}),m&&(0,r.jsx)(d,{children:a})]})}},46438:(e,t,a)=>{a.d(t,{Bc:()=>o,ZI:()=>m,k$:()=>c,m_:()=>d});var r=a(28064),n=a(24827),i=a(1005),l=a(74188),s=a(93146);let o=i.Provider,d=i.Root,c=i.Trigger,u=(0,n.F)("z-50 overflow-visible rounded-sm text-sm shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",{variants:{variant:{default:"bg-popover text-popover-foreground border px-3 py-1.5",destructive:"bg-destructive/10 text-destructive dark:bg-destructive/20 border-destructive [border-width:0.5px]",outline:"border-border",important:"bg-amber-100/90 text-amber-900 dark:bg-amber-900/20 dark:text-amber-300 border-amber-900 [border-width:0.5px]",promotions:"bg-red-100/90 text-red-900 dark:bg-red-900/20 dark:text-red-300 border-red-900 [border-width:0.5px]",personal:"bg-green-100/90 text-green-900 dark:bg-green-900/20 dark:text-green-300 border-green-900 [border-width:0.5px]",updates:"bg-purple-100/90 text-purple-900 dark:bg-purple-900/20 dark:text-purple-300 border-purple-900 [border-width:0.5px]",forums:"bg-blue-100/90 text-blue-900 dark:bg-blue-900/20 dark:text-blue-300 border-blue-900 [border-width:0.5px]",sidebar:"bg-white dark:bg-[#413F3E] p-2.5 flex flex-col gap-2"}},defaultVariants:{variant:"default"}}),m=l.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,variant:l,...o}=e;return(0,r.jsxs)(i.Content,{ref:t,sideOffset:n,className:(0,s.cn)(u({variant:l}),a),...o,children:["sidebar"===l&&(0,r.jsx)("svg",{width:"6",height:"10",viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute left-[-6px] top-1/2 -translate-y-1/2",children:(0,r.jsx)("path",{d:"M6 0L0 5L6 10V0Z",className:"fill-white/80 dark:fill-[#413F3E]"})}),o.children]})});m.displayName=i.Content.displayName},47165:(e,t,a)=>{a.d(t,{T:()=>l});var r=a(61557),n=a(80196),i=a(70028);async function l(e,t){let a=Array.from(e),l=[],s=a.length,o=0;for(let e of a){let a,d,c,u,m,f=(0,n.getFileType)(e);if(!f){r.oR.error("Unsupported file type: ".concat(e.name));continue}let h=URL.createObjectURL(e);try{if("image"===f){let t=await (0,n.getImageDimensions)(e);c=t.width,u=t.height}else if("video"===f)try{let t=await (0,i.G5)(e);d=t.duration,c=t.width,u=t.height,m=t.fps,a=await (0,i.I6)(e,1)}catch(r){let t=await (0,n.generateVideoThumbnail)(e);a=t.thumbnailUrl,c=t.width,u=t.height,d=await (0,n.getMediaDuration)(e)}else"audio"===f&&(d=await (0,n.getMediaDuration)(e));if(l.push({name:e.name,type:f,file:e,url:h,thumbnailUrl:a,duration:d,width:c,height:u,fps:m}),await new Promise(e=>setTimeout(e,0)),o+=1,t){let e=Math.round(o/s*100);t(e)}}catch(t){r.oR.error("Failed to process ".concat(e.name)),URL.revokeObjectURL(h)}}return l}},67034:(e,t,a)=>{a.d(t,{Separator:()=>s});var r=a(28064),n=a(74188),i=a(22276),l=a(93146);let s=n.forwardRef((e,t)=>{let{className:a,orientation:n="horizontal",decorative:s=!0,...o}=e;return(0,r.jsx)(i.b,{ref:t,decorative:s,orientation:n,className:(0,l.cn)("shrink-0 bg-border","horizontal"===n?"h-px w-full":"h-full w-px",a),...o})});s.displayName=i.b.displayName},68820:(e,t,a)=>{a.d(t,{HK:()=>l,WM:()=>o,wV:()=>s});var r=a(28064),n=a(11940),i=a(93146);let l=e=>{let{className:t,...a}=e;return(0,r.jsx)(n.YZ,{className:(0,i.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a})},s=n.Zk,o=e=>{let{withHandle:t,className:a,...l}=e;return(0,r.jsx)(n.TW,{className:(0,i.cn)("relative flex w-px items-center justify-center bg-transparent after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...l})}},70028:(e,t,a)=>{a.d(t,{G5:()=>u,I6:()=>c,Pt:()=>m});var r=a(19600),n=a(84945),i=a(3532),l=a(91685),s=a(80196);let o=null,d=async()=>{if(o)return o;o=new r.m;let e="".concat(i.J,"/ffmpeg");return await o.load({coreURL:await (0,n.KA)("".concat(e,"/ffmpeg-core.js"),"text/javascript"),wasmURL:await (0,n.KA)("".concat(e,"/ffmpeg-core.wasm"),"application/wasm")}),o},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=await d(),r="input.mp4",n="thumbnail.jpg";await a.writeFile(r,new Uint8Array(await e.arrayBuffer())),await a.exec(["-i",r,"-ss",t.toString(),"-vframes","1","-vf","scale=320:240","-q:v","2",n]);let i=new Blob([await a.readFile(n)],{type:"image/jpeg"});return await a.deleteFile(r),await a.deleteFile(n),URL.createObjectURL(i)},u=async e=>{let t=await d(),a="input.mp4";await t.writeFile(a,new Uint8Array(await e.arrayBuffer()));let r="",n=!0;t.on("log",e=>{let{message:t}=e;n&&(r+=t)});try{await t.exec(["-i",a,"-f","null","-"])}catch(e){throw n=!1,await t.deleteFile(a),Error("Failed to extract video info. The file may be corrupted or in an unsupported format.")}n=!1,await t.deleteFile(a);let i=r.match(/Duration: (\d+):(\d+):([\d.]+)/),l=0;if(i){let[,e,t,a]=i;l=3600*parseInt(e)+60*parseInt(t)+parseFloat(a)}let s=r.match(/Video:.* (\d+)x(\d+)[^,]*, ([\d.]+) fps/),o=0,c=0,u=0;return s&&(o=parseInt(s[1]),c=parseInt(s[2]),u=parseFloat(s[3])),{duration:l,width:o,height:c,fps:u}},m=async e=>{let t=new r.m;try{await t.load()}catch(e){throw Error("Unable to initialize audio processing. Please try again.")}let a=l.A.getState(),n=s.B.getState(),i=a.tracks,o=a.getTotalDuration();if(0===o)return new Blob([new ArrayBuffer(44)],{type:"audio/wav"});e&&t.on("progress",t=>{let{progress:a}=t;e(100*a)});let d=[];for(let e of i)if(!e.muted){for(let t of e.elements)if("media"===t.type){let a=n.mediaItems.find(e=>e.id===t.mediaId);if(!a)continue;("video"===a.type||"audio"===a.type)&&d.push({file:a.file,startTime:t.startTime,duration:t.duration,trimStart:t.trimStart,trimEnd:t.trimEnd,trackMuted:e.muted||!1})}}if(0===d.length){let e=Math.max(1,o);try{return await f(e)}catch(e){throw Error("Unable to generate audio for empty timeline.")}}let c=[],u=[];try{for(let e=0;e<d.length;e++){let a=d[e],r="input_".concat(e,".").concat(a.file.name.split(".").pop());c.push(r);try{await t.writeFile(r,new Uint8Array(await a.file.arrayBuffer()))}catch(e){throw Error("Unable to process file: ".concat(a.file.name,". The file may be corrupted or in an unsupported format."))}let n=a.trimStart,i=a.duration-a.trimStart-a.trimEnd,l="audio_".concat(e);u.push("[".concat(e,":a]atrim=start=").concat(n,":duration=").concat(i,",asetpts=PTS-STARTPTS,adelay=").concat(1e3*a.startTime,"|").concat(1e3*a.startTime,"[").concat(l,"]"))}let e=1===d.length?"[audio_0]aresample=44100,aformat=sample_fmts=s16:channel_layouts=stereo[out]":"".concat(u.map((e,t)=>"[audio_".concat(t,"]")).join(""),"amix=inputs=").concat(d.length,":duration=longest:dropout_transition=2,aresample=44100,aformat=sample_fmts=s16:channel_layouts=stereo[out]"),a=[...u,e].join(";"),r="timeline_audio.wav",n=[...c.flatMap(e=>["-i",e]),"-filter_complex",a,"-map","[out]","-t",o.toString(),"-c:a","pcm_s16le","-ar","44100",r];try{await t.exec(n)}catch(e){throw Error("Audio processing failed. Some audio files may be corrupted or incompatible.")}let i=await t.readFile(r);return new Blob([i],{type:"audio/wav"})}catch(e){for(let e of c)try{await t.deleteFile(e)}catch(e){}try{await t.deleteFile("timeline_audio.wav")}catch(e){}throw e}finally{for(let e of c)try{await t.deleteFile(e)}catch(e){}try{await t.deleteFile("timeline_audio.wav")}catch(e){}}},f=async e=>{let t=await d(),a="silent.wav";try{await t.exec(["-f","lavfi","-i","anullsrc=channel_layout=stereo:sample_rate=44100","-t",e.toString(),"-c:a","pcm_s16le",a]);let r=await t.readFile(a);return new Blob([r],{type:"audio/wav"})}catch(e){throw e}finally{try{await t.deleteFile(a)}catch(e){}}}},75141:(e,t,a)=>{a.d(t,{U:()=>s,Y:()=>i});var r=a(59467),n=a(20159);let i={tiktok:"TikTok"},l=[{name:"16:9",width:1920,height:1080},{name:"9:16",width:1080,height:1920},{name:"1:1",width:1080,height:1080},{name:"4:3",width:1440,height:1080}],s=(0,r.v)()((0,n.Zr)(e=>({isInitializing:!0,isPanelsReady:!1,canvasPresets:l,layoutGuide:{platform:null},setInitializing:t=>{e({isInitializing:t})},setPanelsReady:t=>{e({isPanelsReady:t})},initializeApp:async()=>{e({isInitializing:!0,isPanelsReady:!1}),e({isPanelsReady:!0,isInitializing:!1})},setLayoutGuide:t=>{e(e=>({layoutGuide:{...e.layoutGuide,...t}}))},toggleLayoutGuide:t=>{e(e=>({layoutGuide:{platform:e.layoutGuide.platform===t?null:t}}))}}),{name:"editor-settings",partialize:e=>({layoutGuide:e.layoutGuide})}))},81310:(e,t,a)=>{a.d(t,{PY:()=>n,YE:()=>i,uj:()=>l});var r=a(28064);function n(e){let{className:t}=e;return(0,r.jsx)("svg",{className:t,width:"20",height:"18",viewBox:"0 0 76 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M37.5274 0L75.0548 65H0L37.5274 0Z",fill:"currentColor"})})}function i(e){let{className:t="",size:a=32}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 345 243",fill:"none",className:t,children:[(0,r.jsxs)("g",{opacity:"0.5",children:[(0,r.jsx)("path",{d:"M203.75 4H39.25C19.782 4 4 19.782 4 39.25V203.75C4 223.218 19.782 239 39.25 239H203.75C223.218 239 239 223.218 239 203.75V39.25C239 19.782 223.218 4 203.75 4Z",fill:"#FFFC00"}),(0,r.jsx)("path",{d:"M97.1738 194.02C88.9121 188.053 82.4863 184.84 66.8809 187.594C64.5859 188.053 60.4551 189.43 59.9961 185.299C59.0781 182.086 59.0781 177.037 56.7832 176.578C42.5547 174.742 37.5059 171.988 35.2109 169.234C34.293 168.316 33.834 166.021 35.6699 165.562C59.9961 160.973 71.4707 137.564 73.7656 132.975C76.5195 126.09 71.9297 121.959 63.209 119.205C59.0781 117.828 52.1934 115.992 52.1934 111.402C52.1934 109.107 54.4883 107.73 56.7832 106.812C58.6191 106.354 60.4551 105.895 62.291 106.812C67.7988 109.107 72.8477 110.025 75.6016 107.73C75.6016 95.3379 72.3887 79.7324 77.4375 66.8809C83.4043 52.6523 98.0918 39.8008 121.5 39.8008C144.908 39.8008 159.596 52.6523 165.562 66.8809C170.611 79.7324 167.398 95.3379 167.398 107.73C170.152 110.025 175.201 109.107 180.709 106.812C182.545 105.895 184.381 106.354 186.217 106.812C188.512 107.73 190.807 109.107 190.807 111.402C190.807 115.992 183.922 117.828 179.791 119.205C171.07 121.959 166.48 126.09 169.234 132.975C171.529 137.564 183.004 160.973 207.33 165.562C209.166 166.021 208.707 168.316 207.789 169.234C205.494 171.988 200.445 174.742 186.217 176.578C183.922 177.037 183.922 182.086 183.004 185.299C182.545 189.43 178.414 188.053 176.119 187.594C160.514 184.84 154.088 188.053 145.826 194.02C139.065 199.872 130.442 203.126 121.5 203.199C111.861 203.658 104.059 199.527 97.1738 194.02Z",fill:"white"}),(0,r.jsx)("path",{d:"M203.75 4H39.25C19.782 4 4 19.782 4 39.25V203.75C4 223.218 19.782 239 39.25 239H203.75C223.218 239 239 223.218 239 203.75V39.25C239 19.782 223.218 4 203.75 4Z",stroke:"black",strokeWidth:"7"}),(0,r.jsx)("path",{d:"M97.1738 194.02C88.9121 188.053 82.4863 184.84 66.8809 187.594C64.5859 188.053 60.4551 189.43 59.9961 185.299C59.0781 182.086 59.0781 177.037 56.7832 176.578C42.5547 174.742 37.5059 171.988 35.2109 169.234C34.293 168.316 33.834 166.021 35.6699 165.562C59.9961 160.973 71.4707 137.564 73.7656 132.975C76.5195 126.09 71.9297 121.959 63.209 119.205C59.0781 117.828 52.1934 115.992 52.1934 111.402C52.1934 109.107 54.4883 107.73 56.7832 106.812C58.6191 106.354 60.4551 105.895 62.291 106.812C67.7988 109.107 72.8477 110.025 75.6016 107.73C75.6016 95.3379 72.3887 79.7324 77.4375 66.8809C83.4043 52.6523 98.0918 39.8008 121.5 39.8008C144.908 39.8008 159.596 52.6523 165.562 66.8809C170.611 79.7324 167.398 95.3379 167.398 107.73C170.152 110.025 175.201 109.107 180.709 106.812C182.545 105.895 184.381 106.354 186.217 106.812C188.512 107.73 190.807 109.107 190.807 111.402C190.807 115.992 183.922 117.828 179.791 119.205C171.07 121.959 166.48 126.09 169.234 132.975C171.529 137.564 183.004 160.973 207.33 165.562C209.166 166.021 208.707 168.316 207.789 169.234C205.494 171.988 200.445 174.742 186.217 176.578C183.922 177.037 183.922 182.086 183.004 185.299C182.545 189.43 178.414 188.053 176.119 187.594C160.514 184.84 154.088 188.053 145.826 194.02C139.065 199.872 130.442 203.126 121.5 203.199C111.861 203.658 104.059 199.527 97.1738 194.02Z",stroke:"black",strokeWidth:"7"})]}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M133.5 4H321.5C334.48 4 345 14.5205 345 27.5V215.5C345 228.48 334.48 239 321.5 239H133.5C120.52 239 110 228.48 110 215.5V27.5C110 14.5205 120.52 4 133.5 4Z",fill:"#010101"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M261.497 99.4086C271.784 106.758 284.388 111.083 297.999 111.083V84.9035C295.423 84.9045 292.854 84.6357 290.333 84.1016V104.709C276.723 104.709 264.121 100.384 253.831 93.0345V146.459C253.831 173.185 232.155 194.85 205.417 194.85C195.44 194.85 186.167 191.835 178.464 186.665C187.256 195.65 199.516 201.224 213.08 201.224C239.821 201.224 261.498 179.56 261.498 152.833L261.497 99.4086ZM270.953 72.9965C265.696 67.2559 262.244 59.8365 261.497 51.634V48.267H254.233C256.061 58.6916 262.298 67.5981 270.953 72.9965ZM195.376 166.157C192.438 162.308 190.851 157.598 190.858 152.756C190.858 140.533 200.773 130.622 213.005 130.622C215.285 130.621 217.551 130.97 219.723 131.659V104.894C217.185 104.547 214.622 104.399 212.061 104.454V125.286C209.887 124.597 207.62 124.247 205.34 124.249C193.107 124.249 183.193 134.159 183.193 146.384C183.193 155.027 188.149 162.512 195.376 166.157Z",fill:"#EE1D52"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M253.831 93.0345C264.121 100.384 276.723 104.709 290.333 104.709V84.1016C282.736 82.4848 276.011 78.5162 270.953 72.9965C262.298 67.5981 256.061 58.6916 254.233 48.267H235.152V152.832C235.108 165.022 225.21 174.892 213.004 174.892C205.811 174.892 199.422 171.465 195.376 166.157C188.149 162.512 183.193 155.027 183.193 146.384C183.193 134.159 193.107 124.249 205.34 124.249C207.683 124.249 209.942 124.614 212.061 125.286V104.454C185.792 104.996 164.665 126.449 164.665 152.833C164.665 166.003 169.926 177.942 178.464 186.665C186.167 191.835 195.44 194.85 205.417 194.85C232.155 194.85 253.831 173.185 253.831 146.459V93.0345Z",fill:"white"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M290.333 84.1016V78.5293C283.482 78.5396 276.766 76.6229 270.953 72.9965C276.099 78.6269 282.874 82.5087 290.333 84.1016ZM254.233 48.267C254.058 47.2708 253.924 46.2679 253.831 45.2608V41.8938H227.485V146.459C227.443 158.648 217.545 168.518 205.339 168.518C201.754 168.518 198.372 167.669 195.376 166.157C199.422 171.465 205.811 174.892 213.004 174.892C225.21 174.892 235.108 165.022 235.152 152.832V48.267H254.233ZM212.061 104.454L212.061 98.5212C209.859 98.2202 207.64 98.0698 205.418 98.071C178.676 98.071 157 119.736 157 146.459C157 163.214 165.518 177.979 178.464 186.665C169.926 177.942 164.666 166.002 164.666 152.832C164.666 126.449 185.791 104.996 212.061 104.454Z",fill:"#69C9D0"})]})}function l(e){let{className:t="",size:a=16}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 16 16",fill:"none",className:t,children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 12.6667C2.5 13.4951 3.17157 14.1667 4 14.1667H12C12.8284 14.1667 13.5 13.4951 13.5 12.6667V11.3333C13.5 10.5049 12.8284 9.83333 12 9.83333H4C3.17157 9.83333 2.5 10.5049 2.5 11.3333V12.6667ZM4 15.1667C2.61929 15.1667 1.5 14.0474 1.5 12.6667V11.3333C1.5 9.95262 2.61929 8.83333 4 8.83333H12C13.3807 8.83333 14.5 9.95262 14.5 11.3333V12.6667C14.5 14.0474 13.3807 15.1667 12 15.1667H4Z",fill:"white"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5.83333C1.72386 5.83333 1.5 5.60947 1.5 5.33333L1.5 4C1.5 2.2511 2.91777 0.833332 4.66667 0.833332L11.3333 0.833332C13.0822 0.833332 14.5 2.2511 14.5 4V5.33333C14.5 5.60947 14.2761 5.83333 14 5.83333C13.7239 5.83333 13.5 5.60947 13.5 5.33333V4C13.5 2.80338 12.53 1.83333 11.3333 1.83333L4.66667 1.83333C3.47005 1.83333 2.5 2.80338 2.5 4V5.33333C2.5 5.60947 2.27614 5.83333 2 5.83333Z",fill:"white"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.35355 3.64645C8.15829 3.45118 7.84171 3.45118 7.64645 3.64645L5.64645 5.64645C5.45118 5.84171 5.45118 6.15829 5.64645 6.35355C5.84171 6.54882 6.15829 6.54882 6.35355 6.35355L7.5 5.20711L7.5 9.33333C7.5 9.60948 7.72386 9.83333 8 9.83333C8.27614 9.83333 8.5 9.60948 8.5 9.33333V5.20711L9.64645 6.35355C9.84171 6.54882 10.1583 6.54882 10.3536 6.35355C10.5488 6.15829 10.5488 5.84171 10.3536 5.64645L8.35355 3.64645Z",fill:"white"})]})}},81925:(e,t,a)=>{a.d(t,{E:()=>s});var r=a(59467),n=a(91685),i=a(82337);let l=null,s=(0,r.v)((e,t)=>({isPlaying:!1,currentTime:0,duration:0,volume:1,muted:!1,previousVolume:1,speed:1,play:()=>{let a=t(),r=n.A.getState().getTotalDuration(),s=r>0?r:a.duration;if(s>0){var o,d;let e=Math.max(0,s-1/(null!=(d=null==(o=i.I.getState().activeProject)?void 0:o.fps)?d:30));a.currentTime>=e&&t().seek(0)}e({isPlaying:!0}),(e=>{l&&cancelAnimationFrame(l);let t=()=>{let r=e();if(r.isPlaying&&r.currentTime<r.duration){let e=performance.now(),t=(e-a)/1e3;a=e;let l=r.currentTime+t*r.speed,o=n.A.getState().getTotalDuration(),d=o>0?o:r.duration;if(l>=d){var s;let e=null==(s=i.I.getState().activeProject)?void 0:s.fps,t=Math.max(0,d-1/(null!=e?e:30));r.pause(),r.setCurrentTime(t),window.dispatchEvent(new CustomEvent("playback-seek",{detail:{time:t}}))}else r.setCurrentTime(l),window.dispatchEvent(new CustomEvent("playback-update",{detail:{time:l}}))}l=requestAnimationFrame(t)},a=performance.now();l=requestAnimationFrame(t)})(t)},pause:()=>{e({isPlaying:!1}),l&&(cancelAnimationFrame(l),l=null)},toggle:()=>{let{isPlaying:e}=t();e?t().pause():t().play()},seek:a=>{let{duration:r}=t(),n=Math.max(0,Math.min(r,a));e({currentTime:n});let i=new CustomEvent("playback-seek",{detail:{time:n}});window.dispatchEvent(i)},setVolume:t=>e(e=>({volume:Math.max(0,Math.min(1,t)),muted:0===t,previousVolume:t>0?t:e.previousVolume})),setSpeed:t=>{let a=Math.max(.1,Math.min(2,t));e({speed:a});let r=new CustomEvent("playback-speed",{detail:{speed:a}});window.dispatchEvent(r)},setDuration:t=>e({duration:t}),setCurrentTime:t=>e({currentTime:t}),mute:()=>{let{volume:a,previousVolume:r}=t();e({muted:!0,previousVolume:a>0?a:r,volume:0})},unmute:()=>{let{previousVolume:a}=t();e({muted:!1,volume:null!=a?a:1})},toggleMute:()=>{let{muted:e}=t();e?t().unmute():t().mute()}}))},86434:(e,t,a)=>{a.d(t,{Ip:()=>h,K5:()=>x,Rc:()=>m,kt:()=>p,tz:()=>u});var r=a(28064),n=a(74188),i=a(14219),l=a(37770),s=a(58090),o=a(57118),d=a(24827),c=a(93146);let u=i.Root,m=i.Trigger;i.Group,i.Portal,i.Sub,i.RadioGroup;let f=(0,d.F)("relative flex cursor-pointer select-none items-center gap-2 px-2 py-1.5 text-sm outline-hidden transition-opacity data-disabled:pointer-events-none data-disabled:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"focus:opacity-65 focus:text-accent-foreground",destructive:"text-destructive focus:text-destructive/80"}},defaultVariants:{variant:"default"}});n.forwardRef((e,t)=>{let{className:a,inset:n,children:s,variant:o="default",...d}=e;return(0,r.jsxs)(i.SubTrigger,{ref:t,className:(0,c.cn)(f({variant:o}),"data-[state=open]:bg-accent data-[state=open]:opacity-65",n&&"pl-8",a),...d,children:[s,(0,r.jsx)(l.A,{className:"ml-auto"})]})}).displayName=i.SubTrigger.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(i.SubContent,{ref:t,className:(0,c.cn)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=i.SubContent.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(i.Portal,{children:(0,r.jsx)(i.Content,{ref:t,className:(0,c.cn)("z-50 min-w-32 overflow-hidden rounded-md border p-1 bg-popover text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});h.displayName=i.Content.displayName;let p=n.forwardRef((e,t)=>{let{className:a,inset:n,variant:l="default",...s}=e;return(0,r.jsx)(i.Item,{ref:t,className:(0,c.cn)(f({variant:l}),n&&"pl-8",a),...s})});p.displayName=i.Item.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:l,variant:o="default",...d}=e;return(0,r.jsxs)(i.CheckboxItem,{ref:t,className:(0,c.cn)(f({variant:o}),"pl-8 pr-2",a),checked:l,...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.ItemIndicator,{children:(0,r.jsx)(s.A,{className:"h-4 w-4"})})}),n]})}).displayName=i.CheckboxItem.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,variant:l="default",...s}=e;return(0,r.jsxs)(i.RadioItem,{ref:t,className:(0,c.cn)(f({variant:l}),"pl-8 pr-2",a),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.ItemIndicator,{children:(0,r.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=i.RadioItem.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...l}=e;return(0,r.jsx)(i.Label,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...l})}).displayName=i.Label.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(i.Separator,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-foreground/10",a),...n})});x.displayName=i.Separator.displayName},87356:(e,t,a)=>{a.d(t,{x:()=>$});var r=a(28064),n=a(91685),i=a(80196),l=a(81925),s=a(75141),o=a(74188);function d(e){let{src:t,poster:a,className:n="",clipStartTime:i,trimStart:s,trimEnd:d,clipDuration:c,trackMuted:u=!1}=e,m=(0,o.useRef)(null),{isPlaying:f,currentTime:h,volume:p,speed:x,muted:g}=(0,l.E)(),v=i+(c-s-d),j=h>=i&&h<v;return(0,o.useEffect)(()=>{let e=m.current;if(!e||!j)return;let t=t=>{e.currentTime=Math.max(s,Math.min(c-d,t.detail.time-i+s))},a=t=>{let a=Math.max(s,Math.min(c-d,t.detail.time-i+s));Math.abs(e.currentTime-a)>.5&&(e.currentTime=a)},r=t=>{e.playbackRate=t.detail.speed};return window.addEventListener("playback-seek",t),window.addEventListener("playback-update",a),window.addEventListener("playback-speed",r),()=>{window.removeEventListener("playback-seek",t),window.removeEventListener("playback-update",a),window.removeEventListener("playback-speed",r)}},[i,s,d,c,j]),(0,o.useEffect)(()=>{let e=m.current;e&&(f&&j?e.play().catch(()=>{}):e.pause())},[f,j]),(0,o.useEffect)(()=>{let e=m.current;e&&(e.volume=p,e.muted=g||u,e.playbackRate=x)},[p,x,g,u]),(0,r.jsx)("video",{ref:m,src:t,poster:a,className:"max-w-full max-h-full object-contain ".concat(n),playsInline:!0,preload:"auto",controls:!1,disablePictureInPicture:!0,disableRemotePlayback:!0,style:{pointerEvents:"none"},onContextMenu:e=>e.preventDefault()})}function c(e){let{src:t,className:a="",clipStartTime:n,trimStart:i,trimEnd:s,clipDuration:d,trackMuted:c=!1}=e,u=(0,o.useRef)(null),{isPlaying:m,currentTime:f,volume:h,speed:p,muted:x}=(0,l.E)(),g=n+(d-i-s),v=f>=n&&f<g;return(0,o.useEffect)(()=>{let e=u.current;if(!e||!v)return;let t=t=>{e.currentTime=Math.max(i,Math.min(d-s,t.detail.time-n+i))},a=t=>{let a=Math.max(i,Math.min(d-s,t.detail.time-n+i));Math.abs(e.currentTime-a)>.5&&(e.currentTime=a)},r=t=>{e.playbackRate=t.detail.speed};return window.addEventListener("playback-seek",t),window.addEventListener("playback-update",a),window.addEventListener("playback-speed",r),()=>{window.removeEventListener("playback-seek",t),window.removeEventListener("playback-update",a),window.removeEventListener("playback-speed",r)}},[n,i,s,d,v]),(0,o.useEffect)(()=>{let e=u.current;e&&(m&&v&&!c?e.play().catch(()=>{}):e.pause())},[m,v,c]),(0,o.useEffect)(()=>{let e=u.current;e&&(e.volume=h,e.muted=x||c,e.playbackRate=p)},[h,p,x,c]),(0,r.jsx)("audio",{ref:u,src:t,className:a,preload:"auto",controls:!1,style:{display:"none"},onContextMenu:e=>e.preventDefault()})}var u=a(61309),m=a(62243),f=a(45440),h=a(47888),p=a(76085),x=a(34802),g=a(93146),v=a(4600);function j(e){let{time:t,duration:a,format:n="HH:MM:SS:FF",fps:i=30,onTimeChange:l,className:s,disabled:d=!1}=e,[c,u]=(0,o.useState)(!1),[m,f]=(0,o.useState)(""),[h,p]=(0,o.useState)(!1),x=(0,o.useRef)(null),j=(0,o.useRef)(!1),y=(0,v.s)(t,n,i),b=()=>{let e=(0,v.a)(m,n,i);if(null===e)return void p(!0);let t=Math.max(0,a?Math.min(a,e):e);null==l||l(t),u(!1),f(""),p(!1),j.current=!1};return((0,o.useEffect)(()=>{c&&x.current&&(x.current.focus(),x.current.select())},[c]),c)?(0,r.jsx)("input",{ref:x,type:"text",value:m,onChange:e=>{f(e.target.value),p(!1)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),j.current=!0,b()):"Escape"===e.key&&(e.preventDefault(),u(!1),f(""),p(!1),j.current=!1)},onBlur:()=>{!j.current&&c&&b()},className:(0,g.cn)("text-xs font-mono bg-transparent border-none outline-none","focus:bg-background focus:border focus:border-primary focus:px-1 focus:rounded","tabular-nums text-primary",h&&"text-destructive focus:border-destructive",s),style:{width:"".concat(y.length+1,"ch")},placeholder:y}):(0,r.jsx)("span",{onClick:()=>{d||(u(!0),f(y),p(!1),j.current=!1)},className:(0,g.cn)("text-xs font-mono tabular-nums text-primary cursor-pointer","hover:bg-muted/50 hover:rounded px-1 -mx-1 transition-colors",d&&"cursor-default hover:bg-transparent",s),title:d?void 0:"Click to edit time",children:y})}var y=a(13746),b=a.n(y),w=a(19947),N=a.n(w),C=a(82189),S=a.n(C),k=a(93237),E=a.n(k),T=a(53322),R=a.n(T);let A={Inter:b().className,Roboto:N().className,"Open Sans":S().className,"Playfair Display":E().className,"Comic Neue":R().className,Arial:"",Helvetica:"","Times New Roman":"",Georgia:""};b(),N(),S(),E(),R();var M=a(82337),P=a(91554);let I=P.Root,D=P.Trigger;P.Anchor;let L=o.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:i=4,...l}=e;return(0,r.jsx)(P.Portal,{children:(0,r.jsx)(P.Content,{ref:t,align:n,sideOffset:i,className:(0,g.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-hidden data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});L.displayName=P.Content.displayName;var z=a(14446),F=a(30461);function _(){return(0,r.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,r.jsx)(F.default,{src:"/opencut/platform-guides/tiktok-blueprint.png",alt:"TikTok layout guide",className:"absolute inset-0 w-full h-full object-contain",draggable:!1,fill:!0})})}function O(){let{layoutGuide:e}=(0,s.U)();return null===e.platform?null:"tiktok"===e.platform?(0,r.jsx)(_,{}):null}var B=a(20605);let U=(0,a(24827).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(B.Root,{ref:t,className:(0,g.cn)(U(),a),...n})});X.displayName=B.Root.displayName;var H=a(81310);function $(){let{tracks:e,getTotalDuration:t,updateTextElement:a}=(0,n.A)(),{mediaItems:s}=(0,i.B)(),{currentTime:u,toggle:m,setCurrentTime:f}=(0,l.E)(),{activeProject:h}=(0,M.I)(),p=(0,o.useRef)(null),x=(0,o.useRef)(null),[g,v]=(0,o.useState)({width:0,height:0}),[j,y]=(0,o.useState)(!1),b=(null==h?void 0:h.canvasSize)||M.l,[w,N]=(0,o.useState)({isDragging:!1,elementId:null,trackId:null,startX:0,startY:0,initialElementX:0,initialElementY:0,currentX:0,currentY:0,elementWidth:0,elementHeight:0});(0,o.useEffect)(()=>{let e=()=>{let e,t,a,r;if(!x.current)return;if(j)e=window.innerWidth-24,t=window.innerHeight-80-24;else{let a=x.current.getBoundingClientRect(),r=getComputedStyle(x.current),n=parseFloat(r.paddingTop),i=parseFloat(r.paddingBottom),l=parseFloat(r.paddingLeft),s=parseFloat(r.paddingRight),o=parseFloat(r.gap)||16,d=x.current.querySelector("[data-toolbar]"),c=d?d.getBoundingClientRect().height:0;e=a.width-l-s,t=a.height-n-i-c-(c>0?o:0)}let n=b.width/b.height;e/t>n?a=(r=t*(j?.95:1))*n:r=(a=e*(j?.95:1))/n,v({width:a,height:r})};e();let t=new ResizeObserver(e);return x.current&&t.observe(x.current),j&&window.addEventListener("resize",e),()=>{t.disconnect(),j&&window.removeEventListener("resize",e)}},[b.width,b.height,j]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&j&&y(!1)};return j?(document.addEventListener("keydown",e),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[j]),(0,o.useEffect)(()=>{let e=e=>{if(!w.isDragging)return;let t=e.clientX-w.startX,a=e.clientY-w.startY,r=g.width/b.width,n=w.initialElementX+t/r,i=w.initialElementY+a/r,l=w.elementWidth/r/2,s=w.elementHeight/r/2,o=Math.max(-b.width/2+l,Math.min(b.width/2-l,n)),d=Math.max(-b.height/2+s,Math.min(b.height/2-s,i));N(e=>({...e,currentX:o,currentY:d}))},t=()=>{w.isDragging&&w.trackId&&w.elementId&&a(w.trackId,w.elementId,{x:w.currentX,y:w.currentY}),N(e=>({...e,isDragging:!1}))};return w.isDragging&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.body.style.cursor="grabbing",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.body.style.cursor="",document.body.style.userSelect=""}},[w,g,b,a]);let C=(0,o.useCallback)(()=>{y(e=>!e)},[]),S=e.some(e=>e.elements.length>0),k=(()=>{let t=[];return[...e].reverse().forEach(e=>{e.elements.forEach(a=>{if(a.hidden)return;let r=a.startTime,n=a.startTime+(a.duration-a.trimStart-a.trimEnd);if(u>=r&&u<n){let r=null;"media"===a.type&&(r="test"===a.mediaId?null:s.find(e=>e.id===a.mediaId)||null),t.push({element:a,track:e,mediaItem:r})}})}),t})(),E=k.filter(e=>{let{element:t,mediaItem:a}=e;return"media"===t.type&&a&&("video"===a.type||"image"===a.type)&&"test"!==t.mediaId}),T=()=>{if(!(null==h?void 0:h.backgroundType)||"blur"!==h.backgroundType||0===E.length)return null;let{element:e,mediaItem:t}=E[0];if(!t)return null;let a=h.blurIntensity||8;return"video"===t.type?(0,r.jsx)("div",{className:"absolute inset-0 overflow-hidden",style:{filter:"blur(".concat(a,"px)"),transform:"scale(1.1)",transformOrigin:"center"},children:(0,r.jsx)(d,{src:t.url,poster:t.thumbnailUrl,clipStartTime:e.startTime,trimStart:e.trimStart,trimEnd:e.trimEnd,clipDuration:e.duration,className:"w-full h-full object-cover",trackMuted:!0})},"blur-".concat(e.id)):"image"===t.type?(0,r.jsx)("div",{className:"absolute inset-0 overflow-hidden",style:{filter:"blur(".concat(a,"px)"),transform:"scale(1.1)",transformOrigin:"center"},children:(0,r.jsx)("img",{src:t.url,alt:t.name,className:"w-full h-full object-cover",draggable:!1})},"blur-".concat(e.id)):null},R=(e,t)=>{let{element:a,mediaItem:n}=e;if("text"===a.type){let n=A[a.fontFamily]||"",i=g.width/b.width;return(0,r.jsx)("div",{className:"absolute cursor-grab",onMouseDown:t=>((e,t,a)=>{e.preventDefault(),e.stopPropagation();let r=e.currentTarget.getBoundingClientRect();N({isDragging:!0,elementId:t.id,trackId:a,startX:e.clientX,startY:e.clientY,initialElementX:t.x,initialElementY:t.y,currentX:t.x,currentY:t.y,elementWidth:r.width,elementHeight:r.height})})(t,a,e.track.id),style:{left:"".concat(50+(w.isDragging&&w.elementId===a.id?w.currentX:a.x)/b.width*100,"%"),top:"".concat(50+(w.isDragging&&w.elementId===a.id?w.currentY:a.y)/b.height*100,"%"),transform:"translate(-50%, -50%) rotate(".concat(a.rotation,"deg)"),opacity:a.opacity,zIndex:100+t},children:(0,r.jsx)("div",{className:n,style:{fontSize:"".concat(a.fontSize*i,"px"),color:a.color,backgroundColor:a.backgroundColor,textAlign:a.textAlign,fontWeight:a.fontWeight,fontStyle:a.fontStyle,textDecoration:a.textDecoration,padding:"".concat(4*i,"px ").concat(8*i,"px"),borderRadius:"".concat(2*i,"px"),whiteSpace:"nowrap",...""===n&&{fontFamily:a.fontFamily}},children:a.content})},a.id)}if("media"===a.type){if(!n||"test"===a.mediaId)return(0,r.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-blue-500/20 to-purple-500/20 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFAC"}),(0,r.jsx)("p",{className:"text-xs text-foreground",children:a.name})]})},a.id);if("video"===n.type)return(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)(d,{src:n.url,poster:n.thumbnailUrl,clipStartTime:a.startTime,trimStart:a.trimStart,trimEnd:a.trimEnd,clipDuration:a.duration,trackMuted:e.track.muted})},a.id);if("image"===n.type)return(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("img",{src:n.url,alt:n.name,className:"max-w-full max-h-full object-contain",draggable:!1})},a.id);if("audio"===n.type)return(0,r.jsx)("div",{className:"absolute inset-0",style:{pointerEvents:"none"},children:(0,r.jsx)(c,{src:n.url,clipStartTime:a.startTime,trimStart:a.trimStart,trimEnd:a.trimEnd,clipDuration:a.duration,trackMuted:e.track.muted})},a.id)}return null};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-full w-full flex flex-col min-h-0 min-w-0 bg-panel rounded-sm relative",children:(0,r.jsxs)("div",{ref:x,className:"flex-1 flex flex-col items-center justify-center min-h-0 min-w-0",children:[(0,r.jsx)("div",{className:"flex-1"}),S?(0,r.jsxs)("div",{ref:p,className:"relative overflow-hidden border",style:{width:g.width,height:g.height,background:(null==h?void 0:h.backgroundType)==="blur"?"transparent":(null==h?void 0:h.backgroundColor)||"#000000"},children:[T(),0===k.length?(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:"No elements at current time"}):k.map((e,t)=>R(e,t)),(0,r.jsx)(O,{})]}):null,(0,r.jsx)("div",{className:"flex-1"}),(0,r.jsx)(W,{hasAnyElements:S,onToggleExpanded:C,isExpanded:j,currentTime:u,setCurrentTime:f,toggle:m,getTotalDuration:t})]})}),j&&(0,r.jsx)(Y,{previewDimensions:g,activeProject:h,renderBlurBackground:T,activeElements:k,renderElement:R,blurBackgroundElements:E,hasAnyElements:S,toggleExpanded:C,currentTime:u,setCurrentTime:f,toggle:m,getTotalDuration:t})]})}function V(e){let{hasAnyElements:t,onToggleExpanded:a,currentTime:n,setCurrentTime:i,toggle:s,getTotalDuration:d}=e,{isPlaying:c,seek:y}=(0,l.E)(),{activeProject:b}=(0,M.I)(),[w,N]=(0,o.useState)(!1),C=d(),S=C>0?n/C*100:0;return(0,r.jsxs)("div",{"data-toolbar":!0,className:"flex items-center gap-2 p-1 pt-2 w-full text-foreground relative",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-[0.70rem] tabular-nums text-foreground/90",children:[(0,r.jsx)(j,{time:n,duration:C,format:"HH:MM:SS:FF",fps:(null==b?void 0:b.fps)||30,onTimeChange:y,disabled:!t,className:"text-foreground/90 hover:bg-white/10"}),(0,r.jsx)("span",{className:"opacity-50",children:"/"}),(0,r.jsx)("span",{children:(0,v.s)(C,"HH:MM:SS:FF",(null==b?void 0:b.fps)||30)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(u.$,{variant:"text",size:"icon",onClick:()=>{i(Math.max(0,n-1))},disabled:!t,className:"h-auto p-0 text-foreground",title:"Skip backward 1s",children:(0,r.jsx)(m.A,{className:"h-3 w-3"})}),(0,r.jsx)(u.$,{variant:"text",size:"icon",onClick:s,disabled:!t,className:"h-auto p-0 text-foreground hover:text-foreground/80",children:c?(0,r.jsx)(f.A,{className:"h-3 w-3"}):(0,r.jsx)(h.A,{className:"h-3 w-3"})}),(0,r.jsx)(u.$,{variant:"text",size:"icon",onClick:()=>{i(Math.min(C,n+1))},disabled:!t,className:"h-auto p-0 text-foreground hover:text-foreground/80",title:"Skip forward 1s",children:(0,r.jsx)(p.A,{className:"h-3 w-3"})})]}),(0,r.jsx)("div",{className:"flex-1 flex items-center gap-2",children:(0,r.jsxs)("div",{className:(0,g.cn)("relative h-1 rounded-full cursor-pointer flex-1 bg-foreground/20",!t&&"opacity-50 cursor-not-allowed"),onClick:t?e=>{if(!t)return;let a=e.currentTarget.getBoundingClientRect();i(Math.max(0,Math.min(Math.max(0,Math.min(1,(e.clientX-a.left)/a.width))*C,C)))}:void 0,onMouseDown:t?e=>{if(!t)return;e.preventDefault(),e.stopPropagation();let a=e.currentTarget.getBoundingClientRect();N(!0);let r=e=>{e.preventDefault(),i(Math.max(0,Math.min(Math.max(0,Math.min(1,(e.clientX-a.left)/a.width))*C,C)))},n=()=>{N(!1),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),document.body.style.userSelect=""};document.body.style.userSelect="none",document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),r(e.nativeEvent)}:void 0,style:{userSelect:"none"},children:[(0,r.jsx)("div",{className:(0,g.cn)("absolute top-0 left-0 h-full rounded-full bg-foreground",!w&&"duration-100"),style:{width:"".concat(S,"%")}}),(0,r.jsx)("div",{className:"absolute top-1/2 w-3 h-3 rounded-full -translate-y-1/2 -translate-x-1/2 shadow-xs bg-foreground border border-black/20",style:{left:"".concat(S,"%")}})]})}),(0,r.jsx)(u.$,{variant:"text",size:"icon",className:"size-4! text-foreground/80 hover:text-foreground",onClick:a,title:"Exit fullscreen (Esc)",children:(0,r.jsx)(x.A,{className:"size-4!"})})]})}function Y(e){let{previewDimensions:t,activeProject:a,renderBlurBackground:n,activeElements:i,renderElement:l,blurBackgroundElements:s,hasAnyElements:o,toggleExpanded:d,currentTime:c,setCurrentTime:u,toggle:m,getTotalDuration:f}=e;return(0,r.jsxs)("div",{className:"fixed inset-0 z-9999 flex flex-col",children:[(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center bg-background",children:(0,r.jsxs)("div",{className:"relative overflow-hidden border border-border m-3",style:{width:t.width,height:t.height,background:(null==a?void 0:a.backgroundType)==="blur"?"#1a1a1a":(null==a?void 0:a.backgroundColor)||"#1a1a1a"},children:[n(),0===i.length?(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white/60",children:"No elements at current time"}):i.map((e,t)=>l(e,t)),(0,r.jsx)(O,{})]})}),(0,r.jsx)("div",{className:"p-4 bg-background",children:(0,r.jsx)(V,{hasAnyElements:o,onToggleExpanded:d,currentTime:c,setCurrentTime:u,toggle:m,getTotalDuration:f})})]})}function W(e){let{hasAnyElements:t,onToggleExpanded:a,isExpanded:n,currentTime:i,setCurrentTime:o,toggle:d,getTotalDuration:c}=e,{isPlaying:m}=(0,l.E)(),{layoutGuide:p,toggleLayoutGuide:g}=(0,s.U)();return n?(0,r.jsx)(V,{hasAnyElements:t,onToggleExpanded:a,currentTime:i,setCurrentTime:o,toggle:d,getTotalDuration:c}):(0,r.jsx)("div",{"data-toolbar":!0,className:"flex justify-end gap-2 h-auto pb-5 pr-5 pt-4 w-full",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.$,{variant:"text",size:"icon",onClick:d,disabled:!t,className:"h-auto p-0",children:m?(0,r.jsx)(f.A,{className:"h-3 w-3"}):(0,r.jsx)(h.A,{className:"h-3 w-3"})}),(0,r.jsxs)(I,{children:[(0,r.jsx)(D,{asChild:!0,children:(0,r.jsx)(u.$,{variant:"text",size:"icon",className:"h-auto p-0 mr-1",title:"Toggle layout guide",children:(0,r.jsx)(H.YE,{className:"!size-6"})})}),(0,r.jsx)(L,{className:"w-80",children:(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium leading-none",children:"Layout guide"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Show platform-specific layout guides to help align your content with interface elements like profile pictures, usernames, and interaction buttons."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(z.S,{id:"none",checked:null===p.platform,onCheckedChange:()=>g(p.platform||"tiktok")}),(0,r.jsx)(X,{htmlFor:"none",children:"None"})]}),Object.entries(s.Y).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(z.S,{id:t,checked:p.platform===t,onCheckedChange:()=>g(t)}),(0,r.jsx)(X,{htmlFor:t,children:a})]},t)})]})]})})]}),(0,r.jsx)(u.$,{variant:"text",size:"icon",className:"size-4!",onClick:a,title:"Enter fullscreen",children:(0,r.jsx)(x.A,{className:"size-4!"})})]})})}},87819:(e,t,a)=>{a.d(t,{M:()=>d});var r=a(28064),n=a(66981),i=a(61309),l=a(15700),s=a(74188),o=a(40124);function d(){let[e,t]=(0,s.useState)(0),[a,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{localStorage.getItem("hasSeenOnboarding")||i(!0)},[]);let l=()=>{t(e+1)},o=()=>{i(!1),localStorage.setItem("hasSeenOnboarding","true")},d=()=>{switch(e){case 0:return"Welcome to OpenCut Beta! \uD83C\uDF89";case 1:return" This is a super early beta!";case 2:return"\uD83E\uDD8B Have fun testing!";default:return"OpenCut Onboarding"}};return(0,r.jsx)(n.lG,{open:a,onOpenChange:o,children:(0,r.jsxs)(n.Cf,{className:"sm:max-w-[425px] !outline-none",children:[(0,r.jsx)(n.L3,{children:(0,r.jsx)("span",{className:"sr-only",children:d()})}),(()=>{switch(e){case 0:return(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(c,{title:"Welcome to OpenCut Beta! \uD83C\uDF89"}),(0,r.jsx)(u,{description:"You're among the first to try OpenCut - the fully open source CapCut alternative."})]}),(0,r.jsx)(m,{onClick:l,children:"Next"})]});case 1:return(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(c,{title:d()}),(0,r.jsx)(u,{description:"OpenCut started just one month ago. There's still a ton of things to do to make this editor amazing."}),(0,r.jsx)(u,{description:"If you're curious, check out our roadmap [here](https://opencut.app/roadmap)"})]}),(0,r.jsx)(m,{onClick:l,children:"Next"})]});case 2:return(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(c,{title:d()}),(0,r.jsx)(u,{description:"Join our [Discord](https://discord.gg/zmR9N35cjK), chat with cool people and share feedback to help make OpenCut the best editor ever."})]}),(0,r.jsx)(m,{onClick:o,children:"Finish"})]});default:return null}})()]})})}function c(e){let{title:t}=e;return(0,r.jsx)("h2",{className:"text-lg md:text-xl font-bold",children:t})}function u(e){let{description:t}=e;return(0,r.jsx)("div",{className:"text-muted-foreground",children:(0,r.jsx)(o.oz,{components:{p:e=>{let{children:t}=e;return(0,r.jsx)("p",{className:"mb-0",children:t})},a:e=>{let{href:t,children:a}=e;return(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:text-foreground/80 underline",children:a})}},children:t})})}function m(e){let{children:t,onClick:a}=e;return(0,r.jsxs)(i.$,{onClick:a,variant:"default",className:"w-full",children:[t,(0,r.jsx)(l.A,{className:"w-4 h-4"})]})}},89100:(e,t,a)=>{a.d(t,{z:()=>s});var r=a(74188),n=a(81925),i=a(91685),l=a(61557);let s=()=>{let{isPlaying:e,currentTime:t,play:a,pause:s,seek:o}=(0,n.E)(),{selectedElements:d,tracks:c,splitElement:u,splitAndKeepLeft:m,splitAndKeepRight:f,separateAudio:h}=(0,i.A)();(0,r.useCallback)(()=>{if(1!==d.length)return void l.oR.error("Select exactly one element to split");let{trackId:e,elementId:a}=d[0],r=c.find(t=>t.id===e),n=null==r?void 0:r.elements.find(e=>e.id===a);if(!n)return;let i=n.startTime,s=n.startTime+(n.duration-n.trimStart-n.trimEnd);if(t<=i||t>=s)return void l.oR.error("Playhead must be within selected element");u(e,a,t)},[d,c,t,u]),(0,r.useCallback)(()=>{if(1!==d.length)return void l.oR.error("Select exactly one element");let{trackId:e,elementId:a}=d[0],r=c.find(t=>t.id===e),n=null==r?void 0:r.elements.find(e=>e.id===a);if(!n)return;let i=n.startTime,s=n.startTime+(n.duration-n.trimStart-n.trimEnd);if(t<=i||t>=s)return void l.oR.error("Playhead must be within selected element");m(e,a,t)},[d,c,t,m]),(0,r.useCallback)(()=>{if(1!==d.length)return void l.oR.error("Select exactly one element");let{trackId:e,elementId:a}=d[0],r=c.find(t=>t.id===e),n=null==r?void 0:r.elements.find(e=>e.id===a);if(!n)return;let i=n.startTime,s=n.startTime+(n.duration-n.trimStart-n.trimEnd);if(t<=i||t>=s)return void l.oR.error("Playhead must be within selected element");f(e,a,t)},[d,c,t,f]),(0,r.useCallback)(()=>{if(1!==d.length)return void l.oR.error("Select exactly one media element to separate audio");let{trackId:e,elementId:t}=d[0],a=c.find(t=>t.id===e);if(!a||"media"!==a.type)return void l.oR.error("Select a media element to separate audio");h(e,t)},[d,c,h])}},99829:(e,t,a)=>{a.d(t,{X:()=>U});var r=a(28064),n=a(61309),i=a(90320),l=a(65803),s=a(80647),o=a(23392),d=a(27940),c=a(91685),u=a(15467),m=a(4600),f=a(82337),h=a(30651),p=a(74188),x=a(61557),g=a(13893),v=a(93146);let j={"toggle-play":{description:"Play/Pause",category:"Playback"},"stop-playback":{description:"Stop playback",category:"Playback"},"seek-forward":{description:"Seek forward 1 second",category:"Playback"},"seek-backward":{description:"Seek backward 1 second",category:"Playback"},"frame-step-forward":{description:"Frame step forward",category:"Navigation"},"frame-step-backward":{description:"Frame step backward",category:"Navigation"},"jump-forward":{description:"Jump forward 5 seconds",category:"Navigation"},"jump-backward":{description:"Jump backward 5 seconds",category:"Navigation"},"goto-start":{description:"Go to timeline start",category:"Navigation"},"goto-end":{description:"Go to timeline end",category:"Navigation"},"split-element":{description:"Split element at playhead",category:"Editing"},"delete-selected":{description:"Delete selected elements",category:"Editing"},"select-all":{description:"Select all elements",category:"Selection"},"duplicate-selected":{description:"Duplicate selected element",category:"Selection"},"toggle-snapping":{description:"Toggle snapping",category:"Editing"},undo:{description:"Undo",category:"History"},redo:{description:"Redo",category:"History"}};var y=a(66981);let b=e=>{let{shortcut:t,isRecording:a,onStartRecording:n}=e,i=t.keys.filter(e=>!(e.includes("Cmd")&&t.keys.includes(e.replace("Cmd","Ctrl"))));return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t.icon&&(0,r.jsx)("div",{className:"text-muted-foreground",children:t.icon}),(0,r.jsx)("span",{className:"text-sm",children:t.description})]}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:i.map((e,l)=>(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"flex items-center",children:e.split("+").map((e,i)=>{let s="".concat(t.id,"-").concat(l,"-").concat(i);return(0,r.jsx)(w,{isRecording:a,onStartRecording:()=>n(t),children:e},s)})}),l<i.length-1&&(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"or"})]},e))})]})},w=e=>{let{children:t,isRecording:a,onStartRecording:i}=e;return(0,r.jsx)(n.$,{variant:"text",size:"sm",className:"inline-flex font-sans text-xs rounded px-2 min-w-6 min-h-6 leading-none items-center justify-center shadow-xs border mr-1 cursor-pointer hover:bg-opacity-80 ".concat(a?"border-primary bg-primary/10":"border bg-accent"),onClick:e=>{e.preventDefault(),e.stopPropagation(),i()},title:a?"Press any key combination...":"Click to edit shortcut",children:t})},N=()=>{let[e,t]=(0,p.useState)(!1),[a,i]=(0,p.useState)(null),{updateKeybinding:l,removeKeybinding:s,getKeybindingString:o,validateKeybinding:d,getKeybindingsForAction:c,setIsRecording:u,resetToDefaults:m,isRecording:f}=(0,g.y)(),{shortcuts:w}=(()=>{let{keybindings:e}=(0,g.y)();return{shortcuts:(0,p.useMemo)(()=>{let t=[],a={};return Object.entries(e).forEach(e=>{let[t,r]=e;r&&(a[r]||(a[r]=[]),a[r].push(t.replace("ctrl",(0,v.C7)()).replace("alt",(0,v.bT)()).replace("shift","Shift").replace("left","").replace("right","").replace("up","").replace("down","").replace("space","Space").replace("home","Home").replace("end","End").replace("delete","Delete").replace("backspace","Backspace").replace("-","+")))}),Object.entries(a).forEach(e=>{let[a,r]=e,n=j[a];n&&t.push({id:a,keys:r,description:n.description,category:n.category,action:a})}),t.sort((e,t)=>e.category!==t.category?e.category.localeCompare(t.category):e.description.localeCompare(t.description))},[e])}})(),N=Array.from(new Set(w.map(e=>e.category)));(0,p.useEffect)(()=>{if(!f||!a)return;let e=e=>{e.preventDefault(),e.stopPropagation();let t=o(e);if(t){let e=d(t,a.action);if(e){x.oR.error('Key "'.concat(t,'" is already bound to "').concat(e.existingAction,'"')),i(null);return}c(a.action).forEach(e=>s(e)),l(t,a.action),u(!1),i(null)}},t=()=>{i(null),u(!1)};return document.addEventListener("keydown",e),document.addEventListener("click",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("click",t)}},[a,o,l,s,d,c,u,f]);let C=e=>{i(e),u(!0)};return(0,r.jsxs)(y.lG,{open:e,onOpenChange:t,children:[(0,r.jsx)(y.zM,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"text",size:"sm",className:"gap-2",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),"Shortcuts"]})}),(0,r.jsxs)(y.Cf,{className:"max-w-2xl overflow-y-auto",children:[(0,r.jsxs)(y.c7,{children:[(0,r.jsxs)(y.L3,{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-5 h-5"}),"Keyboard Shortcuts"]}),(0,r.jsx)(y.rr,{children:"Speed up your video editing workflow with these keyboard shortcuts. Click any shortcut key to edit it."})]}),(0,r.jsx)("div",{className:"space-y-6",children:N.map(e=>(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h3",{className:"text-xs text-muted-foreground uppercase tracking-wide font-medium",children:e}),(0,r.jsx)("div",{className:"space-y-0.5",children:w.filter(t=>t.category===e).map(e=>(0,r.jsx)(b,{shortcut:e,isRecording:e.action===(null==a?void 0:a.action),onStartRecording:C},e.action))})]},e))}),(0,r.jsx)(y.Es,{children:(0,r.jsx)(n.$,{size:"sm",className:"mt-4",variant:"destructive",onClick:m,children:"Reset to Default"})})]})]})};var C=a(54678),S=a(35021),k=a.n(S),E=a(97215),T=a(44775),R=a(93442),A=a(59726),M=a(81009),P=a(60331),I=a(81925),D=a(81310),L=a(81409),z=a(85495),F=a(9466);let _={default:"Default",media:"Media",inspector:"Inspector","vertical-preview":"Vertical Preview"},O={default:"Media, preview, and inspector on top row, timeline on bottom",media:"Full height media on left, preview and inspector on top row",inspector:"Full height inspector on right, media and preview on top row","vertical-preview":"Full height preview on right for vertical videos"};function B(){let{activePreset:e,setActivePreset:t,resetPreset:a}=(0,F.v)();return(0,r.jsxs)(C.rI,{children:[(0,r.jsx)(C.ty,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"secondary",size:"sm",className:"h-8 px-2 flex items-center gap-1 text-xs",title:"Panel Presets",children:[(0,r.jsx)(L.A,{className:"h-4 w-4"}),(0,r.jsx)(i.A,{className:"h-3 w-3"})]})}),(0,r.jsxs)(C.SQ,{align:"start",className:"w-64",children:[(0,r.jsx)("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Panel Presets"}),(0,r.jsx)(C.mB,{}),Object.keys(_).map(i=>(0,r.jsxs)(C._2,{onClick:()=>{t(i)},className:"flex items-start justify-between gap-2 py-2 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-sm",children:_[i]}),e===i&&(0,r.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 leading-tight",children:O[i]})]}),(0,r.jsx)(n.$,{variant:"secondary",size:"icon",className:"h-6 w-6 shrink-0 opacity-60 hover:opacity-100",onClick:e=>{e.stopPropagation(),a(i)},title:"Reset ".concat(_[i]," preset"),children:(0,r.jsx)(z.A,{className:"h-3 w-3"})})]},i))]})]})}function U(){let{getTotalDuration:e}=(0,c.A)(),{currentTime:t}=(0,I.E)(),{activeProject:a,renameProject:h,deleteProject:x}=(0,f.I)(),[g,v]=(0,p.useState)(!1),[j,y]=(0,p.useState)(!1);(0,A.useRouter)();let{theme:b,setTheme:w}=(0,P.D)(),S=async e=>{if(a&&e.trim()&&e!==a.name)try{await h(a.id,e.trim()),y(!1)}catch(e){}},D=(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(C.rI,{children:[(0,r.jsx)(C.ty,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"secondary",className:"h-auto py-1.5 px-2.5 flex items-center justify-center",children:[(0,r.jsx)(i.A,{className:"text-muted-foreground"}),(0,r.jsx)("span",{className:"text-[0.85rem] mr-2",children:null==a?void 0:a.name})]})}),(0,r.jsxs)(C.SQ,{align:"start",className:"w-40 z-100",children:[(0,r.jsxs)(C._2,{className:"flex items-center gap-1.5",onClick:()=>(0,E.vv)(),children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),"Projects"]}),(0,r.jsxs)(C._2,{className:"flex items-center gap-1.5",onClick:()=>y(!0),children:[(0,r.jsx)(s.A,{className:"h-4 w-4"}),"Rename project"]}),(0,r.jsxs)(C._2,{variant:"destructive",className:"flex items-center gap-1.5",onClick:()=>v(!0),children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),"Delete Project"]}),(0,r.jsx)(C.mB,{}),(0,r.jsx)(C._2,{asChild:!0,children:(0,r.jsxs)(k(),{href:"https://discord.gg/zmR9N35cjK",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5",children:[(0,r.jsx)(M.O4U,{className:"h-4 w-4"}),"Discord"]})})]})]}),(0,r.jsx)(T.U,{isOpen:j,onOpenChange:y,onConfirm:S,projectName:(null==a?void 0:a.name)||""}),(0,r.jsx)(R.B,{isOpen:g,onOpenChange:v,onConfirm:()=>{a&&(x(a.id),v(!1),(0,E.vv)())},projectName:(null==a?void 0:a.name)||""})]}),L=(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,r.jsx)("span",{className:"text-foreground tabular-nums",children:(0,m.s)(t,"HH:MM:SS:FF",(null==a?void 0:a.fps)||30)}),(0,r.jsx)("span",{className:"text-foreground/50",children:"/"}),(0,r.jsx)("span",{className:"text-foreground/50 tabular-nums",children:(0,m.s)(e(),"HH:MM:SS:FF",(null==a?void 0:a.fps)||30)})]}),z=(0,r.jsxs)("nav",{className:"flex items-center gap-2",children:[(0,r.jsx)(B,{}),(0,r.jsx)(N,{}),(0,r.jsx)(X,{}),(0,r.jsxs)(n.$,{size:"icon",variant:"text",className:"h-7",onClick:()=>w("dark"===b?"light":"dark"),children:[(0,r.jsx)(d.A,{className:"!size-[1.1rem]"}),(0,r.jsx)("span",{className:"sr-only",children:"dark"===b?"Light":"Dark"})]})]});return(0,r.jsx)(u.H,{leftContent:D,centerContent:L,rightContent:z,className:"bg-background h-[3.2rem] px-3 items-center mt-0.5"})}function X(){return(0,r.jsx)("button",{className:"flex items-center gap-1.5 bg-[#38BDF8] text-white rounded-md px-[0.1rem] py-[0.1rem] cursor-pointer hover:brightness-95 transition-all duration-200",onClick:()=>{window.open("https://youtube.com/watch?v=dQw4w9WgXcQ","_blank")},children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5 bg-linear-270 from-[#2567EC] to-[#37B6F7] rounded-[0.8rem] px-4 py-1 relative shadow-[0_1px_3px_0px_rgba(0,0,0,0.45)]",children:[(0,r.jsx)(D.uj,{className:"z-50"}),(0,r.jsx)("span",{className:"text-[0.875rem] z-50",children:"Export"}),(0,r.jsx)("div",{className:"absolute w-full h-full left-0 top-0 bg-linear-to-t from-white/0 to-white/50 z-10 rounded-[0.8rem] flex items-center justify-center",children:(0,r.jsx)("div",{className:"absolute w-[calc(100%-4px)] h-[calc(100%-4px)] top-[0.12rem] bg-linear-270 from-[#2567EC] to-[#37B6F7] z-50 rounded-lg"})})]})})}}}]);
//# sourceMappingURL=50-7a65131e42685524.js.map