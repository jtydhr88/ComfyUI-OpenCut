"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9810],{99810:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var t=a(92737),i=a(20713),u=a(86568),n=a(22621),r=a(9403),v=a(89138),s=a(16098),o=a(86763),f=a(28664);let d=(0,n.nY)("serverConfig",()=>{let e=(0,t.KR)({}),l=(0,i.EW)(()=>Object.values(e.value)),a=(0,i.EW)(()=>l.value.filter(e=>e.initialValue!==e.value)),u=(0,i.EW)(()=>l.value.reduce((e,l)=>{var a;let t=(null==(a=l.category)?void 0:a[0])??"General";return e[t]=e[t]||[],e[t].push(l),e},{})),n=(0,i.EW)(()=>Object.fromEntries(l.value.map(e=>[e.id,e.value===e.defaultValue||null===e.value||void 0===e.value?void 0:e.value]))),r=(0,i.EW)(()=>Object.fromEntries(Object.entries(Object.assign({},...l.value.map(e=>e.value===e.defaultValue||null===e.value||void 0===e.value?{}:e.getValue?e.getValue(e.value):{[e.id]:e.value}))).map(([e,l])=>!0===l?[e,""]:[e,l.toString()]))),v=(0,i.EW)(()=>Object.entries(r.value).map(([e,l])=>[`--${e}`,l]).flat().filter(e=>""!==e).join(" "));return{serverConfigById:e,serverConfigs:l,modifiedConfigs:a,serverConfigsByCategory:u,serverConfigValues:n,launchArgs:r,commandLineArgs:v,revertChanges:()=>{for(let e of a.value)e.value=e.initialValue},loadServerConfig:function(l,a){for(let t of l){let l=a[t.id]??t.defaultValue;e.value[t.id]={...t,value:l,initialValue:l}}}}}),c={class:"flex flex-col gap-2"},p={class:"flex justify-end gap-2"},g={class:"flex items-center justify-between"},C=(0,i.pM)({__name:"ServerConfigPanel",setup(e){let l=(0,f.P)(),a=d(),{serverConfigsByCategory:C,serverConfigValues:m,launchArgs:b,commandLineArgs:k,modifiedConfigs:y}=(0,n.bP)(a),E=()=>{a.revertChanges()},V=async()=>{await (0,f.j)().restartApp()};(0,i.wB)(b,async e=>{await l.set("Comfy.Server.LaunchArgs",e)}),(0,i.wB)(m,async e=>{await l.set("Comfy.Server.ServerConfigValues",e)});let{copyToClipboard:_}=(0,f.an)(),h=async()=>{await _(k.value)},{t:R}=(0,o.s9)();return(e,l)=>{let a=(0,i.g2)("i-lucide:terminal");return(0,i.uX)(),(0,i.Wv)(f.a7,{value:"Server-Config",class:"server-config-panel"},{header:(0,i.k6)(()=>[(0,i.Lk)("div",c,[(0,t.R1)(y).length>0?((0,i.uX)(),(0,i.Wv)((0,t.R1)(s.A),{key:0,severity:"info","pt:text":"w-full"},{default:(0,i.k6)(()=>[(0,i.Lk)("p",null,(0,u.v_)(e.$t("serverConfig.modifiedConfigs")),1),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,t.R1)(y),e=>((0,i.uX)(),(0,i.CE)("li",{key:e.id},(0,u.v_)(e.name)+": "+(0,u.v_)(e.initialValue)+" â†’ "+(0,u.v_)(e.value),1))),128))]),(0,i.Lk)("div",p,[(0,i.bF)((0,t.R1)(r.A),{label:e.$t("serverConfig.revertChanges"),outlined:"",onClick:E},null,8,["label"]),(0,i.bF)((0,t.R1)(r.A),{label:e.$t("serverConfig.restart"),outlined:"",severity:"danger",onClick:V},null,8,["label"])])]),_:1})):(0,i.Q3)("",!0),(0,t.R1)(k)?((0,i.uX)(),(0,i.Wv)((0,t.R1)(s.A),{key:1,severity:"secondary","pt:text":"w-full"},{icon:(0,i.k6)(()=>[(0,i.bF)(a,{class:"text-xl font-bold"})]),default:(0,i.k6)(()=>[(0,i.Lk)("div",g,[(0,i.Lk)("p",null,(0,u.v_)((0,t.R1)(k)),1),(0,i.bF)((0,t.R1)(r.A),{icon:"pi pi-clipboard",severity:"secondary",text:"",onClick:h})])]),_:1})):(0,i.Q3)("",!0)])]),default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.entries((0,t.R1)(C)),([l,a],n)=>((0,i.uX)(),(0,i.CE)("div",{key:l},[n>0?((0,i.uX)(),(0,i.Wv)((0,t.R1)(v.A),{key:0})):(0,i.Q3)("",!0),(0,i.Lk)("h3",null,(0,u.v_)(e.$t(`serverConfigCategories.${l}`,l)),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.name,class:"mb-4"},[(0,i.bF)(f.ao,{id:e.id,formValue:e.value,"onUpdate:formValue":l=>e.value=l,item:{...e,name:R(`serverConfigItems.${e.id}.name`,e.name),tooltip:e.tooltip?R(`serverConfigItems.${e.id}.tooltip`,e.tooltip):void 0},"label-class":{"text-highlight":e.initialValue!==e.value}},null,8,["id","formValue","onUpdate:formValue","item","label-class"])]))),128))]))),128))]),_:1})}}})}}]);
//# sourceMappingURL=9810.580b047246f3eaa0.js.map