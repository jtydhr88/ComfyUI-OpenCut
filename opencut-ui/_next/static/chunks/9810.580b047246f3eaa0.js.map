{"version":3,"file":"static/chunks/9810.580b047246f3eaa0.js","mappings":"iOAOA,MAA6B,QAAW,qBACxC,MAA2B,QAAG,GAAG,EACjC,EAAwB,QAAQ,KAChC,wBAEA,EAA0B,QAAQ,CAClC,IACA,kBACA,2BASA,EAAkC,QAAQ,KAC1C,eACA,QACA,MACA,oDAGA,OAFA,cACA,aACA,CACA,CAAO,CACP,KAGA,EAA6B,QAAQ,KACrC,mBACA,eACA,CACA,KACA,0EACA,IAIA,EAAqB,QAAQ,KAU7B,mBACA,eAVA,cACA,EAAQ,IACR,eACA,2DACA,GAEA,gCAAmE,mBAInE,aACA,OACA,OAEA,oBAIA,EAA0B,QAAQ,KAClC,2CAAwE,EAAI,0CAY5E,OACA,mBACA,gBACA,kBACA,0BACA,qBACA,aACA,kBACA,cAnEA,KACA,qBACA,wBAkEA,iBAnBA,cACA,gBACA,6BACA,gBACA,KACA,QACA,cACA,CACA,CACA,CAWA,CACA,CAAC,EACD,GAAqB,6BACrB,GAAqB,gCACrB,GAAqB,2CACrB,EAAkC,QAAe,EACjD,2BACA,SACA,MAAyB,OAAe,GACxC,MACA,CACA,0BACA,qBACA,aACA,kBACA,kBACA,CAAM,CAAE,OAAW,IACnB,OACA,iBACA,EACA,YACA,MAAY,OAAW,eACvB,EACI,QAAK,aACT,wCACA,CAAK,EACD,QAAK,aACT,gDACA,CAAK,EACL,oBAAY,GAAkB,CAAE,OAAkB,GAClD,YACA,gBACA,EACA,GAAY,GAAI,CAAE,OAAO,GAQzB,cACA,MAA4C,QAAgB,sBAC5D,MAAa,QAAS,GAAI,QAAW,CAAC,IAAW,EACjD,sBACA,2BACA,CAAO,EACP,OAAgB,QAAO,MACb,QAAkB,UAChB,QAAK,cAAgC,QAAS,GAAI,QAAW,CAAC,QAAK,CAAC,GAAO,GACvF,MACA,gBACA,kBACA,CAAa,EACb,QAAuB,QAAO,MACd,QAAkB,UAAY,QAAe,0CAC7C,QAAkB,aACf,QAAS,KAAQ,QAAkB,CAAC,IAAQ,MAAQ,QAAU,CAAC,QAAK,QAC5D,QAAS,GAAI,QAAkB,OAC1D,SACqB,CAAE,QAAe,cAAuB,QAAe,uBAAgC,QAAe,eACxG,MACnB,EACgB,QAAkB,UAChB,QAAW,CAAC,QAAK,CAAC,GAAM,GAC1C,yCACA,YACA,SACA,CAAmB,mBACD,QAAW,CAAC,QAAK,CAAC,GAAM,GAC1C,mCACA,YACA,kBACA,SACA,CAAmB,mBACnB,EACA,EACA,GACA,EAAa,EAAK,QAAkB,QACxB,QAAK,KAAqB,QAAS,GAAI,QAAW,CAAC,QAAK,CAAC,GAAO,GAC5E,MACA,qBACA,kBACA,CAAa,EACb,KAAoB,QAAO,MACX,QAAW,IAAkC,0BAA4B,EACzF,EACA,QAAuB,QAAO,MACd,QAAkB,UAChB,QAAkB,UAAY,QAAe,CAAC,QAAK,QACnD,QAAW,CAAC,QAAK,CAAC,GAAM,GAC1C,uBACA,qBACA,QACA,SACA,CAAmB,EACnB,EACA,EACA,GACA,EAAa,EAAK,QAAkB,QACpC,EACA,EACA,QAAiB,QAAO,OACb,QAAS,KAAQ,QAAkB,CAAC,IAAQ,MAAQ,QAAU,gBAAgB,QAAK,iBAC3E,QAAS,GAAI,QAAkB,QAAU,MAAY,EACxE,IAAuB,SAAS,GAAI,QAAW,CAAC,QAAK,CAAC,GAAO,GAAK,OAAQ,EAAK,QAAkB,QACnF,QAAkB,WAAa,QAAe,gCAAmC,EAAM,UACtF,QAAS,KAAQ,QAAkB,CAAC,IAAQ,MAAQ,QAAU,OACtD,QAAS,GAAI,QAAkB,QACtD,WACA,YACA,CAAiB,EACC,QAAW,CAAC,IAAQ,EACtC,QACA,kBACA,kCACA,KAjFA,CACA,GAgFA,EA/EA,4BAAqC,KAAQ,eAC7C,yCA8EA,EA9EuD,GAAQ,2BAC/D,EA8EA,eACA,0CAEA,CAAmB,sEACnB,IACe,MACf,IACW,MACX,EACA,GACA,CAAO,CACP,CACA,CACA,CAAC","sources":["webpack://_N_E/../../node_modules/.bun/@comfyorg+comfyui-frontend@.+comfyorg-comfyui-frontend-1.26.2.tgz+e5b32ef95522b1e7/node_modules/@comfyorg/comfyui-frontend/lib/ServerConfigPanel-B2cC5ewA.js"],"sourcesContent":["import { ref, computed, defineComponent, watch, resolveComponent, openBlock, createBlock, withCtx, createElementVNode, unref, toDisplayString, createElementBlock, Fragment, renderList, createVNode, createCommentVNode } from \"vue\";\nimport { defineStore, storeToRefs } from \"pinia\";\nimport Button from \"primevue/button\";\nimport Divider from \"primevue/divider\";\nimport Message from \"primevue/message\";\nimport { useI18n } from \"vue-i18n\";\nimport { P as useSettingStore, an as useCopyToClipboard, a7 as _sfc_main$1, ao as FormItem, j as electronAPI } from \"./lib-index-DdMUP0fe.js\";\nconst useServerConfigStore = defineStore(\"serverConfig\", () => {\n  const serverConfigById = ref({});\n  const serverConfigs = computed(() => {\n    return Object.values(serverConfigById.value);\n  });\n  const modifiedConfigs = computed(\n    () => {\n      return serverConfigs.value.filter((config) => {\n        return config.initialValue !== config.value;\n      });\n    }\n  );\n  const revertChanges = () => {\n    for (const config of modifiedConfigs.value) {\n      config.value = config.initialValue;\n    }\n  };\n  const serverConfigsByCategory = computed(() => {\n    return serverConfigs.value.reduce(\n      (acc, config) => {\n        var _a;\n        const category = ((_a = config.category) == null ? void 0 : _a[0]) ?? \"General\";\n        acc[category] = acc[category] || [];\n        acc[category].push(config);\n        return acc;\n      },\n      {}\n    );\n  });\n  const serverConfigValues = computed(() => {\n    return Object.fromEntries(\n      serverConfigs.value.map((config) => {\n        return [\n          config.id,\n          config.value === config.defaultValue || config.value === null || config.value === void 0 ? void 0 : config.value\n        ];\n      })\n    );\n  });\n  const launchArgs = computed(() => {\n    const args = Object.assign(\n      {},\n      ...serverConfigs.value.map((config) => {\n        if (config.value === config.defaultValue || config.value === null || config.value === void 0) {\n          return {};\n        }\n        return config.getValue ? config.getValue(config.value) : { [config.id]: config.value };\n      })\n    );\n    return Object.fromEntries(\n      Object.entries(args).map(([key, value]) => {\n        if (value === true) {\n          return [key, \"\"];\n        }\n        return [key, value.toString()];\n      })\n    );\n  });\n  const commandLineArgs = computed(() => {\n    return Object.entries(launchArgs.value).map(([key, value]) => [`--${key}`, value]).flat().filter((arg) => arg !== \"\").join(\" \");\n  });\n  function loadServerConfig(configs, values) {\n    for (const config of configs) {\n      const value = values[config.id] ?? config.defaultValue;\n      serverConfigById.value[config.id] = {\n        ...config,\n        value,\n        initialValue: value\n      };\n    }\n  }\n  return {\n    serverConfigById,\n    serverConfigs,\n    modifiedConfigs,\n    serverConfigsByCategory,\n    serverConfigValues,\n    launchArgs,\n    commandLineArgs,\n    revertChanges,\n    loadServerConfig\n  };\n});\nconst _hoisted_1 = { class: \"flex flex-col gap-2\" };\nconst _hoisted_2 = { class: \"flex justify-end gap-2\" };\nconst _hoisted_3 = { class: \"flex items-center justify-between\" };\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"ServerConfigPanel\",\n  setup(__props) {\n    const settingStore = useSettingStore();\n    const serverConfigStore = useServerConfigStore();\n    const {\n      serverConfigsByCategory,\n      serverConfigValues,\n      launchArgs,\n      commandLineArgs,\n      modifiedConfigs\n    } = storeToRefs(serverConfigStore);\n    const revertChanges = () => {\n      serverConfigStore.revertChanges();\n    };\n    const restartApp = async () => {\n      await electronAPI().restartApp();\n    };\n    watch(launchArgs, async (newVal) => {\n      await settingStore.set(\"Comfy.Server.LaunchArgs\", newVal);\n    });\n    watch(serverConfigValues, async (newVal) => {\n      await settingStore.set(\"Comfy.Server.ServerConfigValues\", newVal);\n    });\n    const { copyToClipboard } = useCopyToClipboard();\n    const copyCommandLineArgs = async () => {\n      await copyToClipboard(commandLineArgs.value);\n    };\n    const { t } = useI18n();\n    const translateItem = (item) => {\n      return {\n        ...item,\n        name: t(`serverConfigItems.${item.id}.name`, item.name),\n        tooltip: item.tooltip ? t(`serverConfigItems.${item.id}.tooltip`, item.tooltip) : void 0\n      };\n    };\n    return (_ctx, _cache) => {\n      const _component_i_lucide58terminal = resolveComponent(\"i-lucide:terminal\");\n      return openBlock(), createBlock(_sfc_main$1, {\n        value: \"Server-Config\",\n        class: \"server-config-panel\"\n      }, {\n        header: withCtx(() => [\n          createElementVNode(\"div\", _hoisted_1, [\n            unref(modifiedConfigs).length > 0 ? (openBlock(), createBlock(unref(Message), {\n              key: 0,\n              severity: \"info\",\n              \"pt:text\": \"w-full\"\n            }, {\n              default: withCtx(() => [\n                createElementVNode(\"p\", null, toDisplayString(_ctx.$t(\"serverConfig.modifiedConfigs\")), 1),\n                createElementVNode(\"ul\", null, [\n                  (openBlock(true), createElementBlock(Fragment, null, renderList(unref(modifiedConfigs), (config) => {\n                    return openBlock(), createElementBlock(\"li\", {\n                      key: config.id\n                    }, toDisplayString(config.name) + \": \" + toDisplayString(config.initialValue) + \" â†’ \" + toDisplayString(config.value), 1);\n                  }), 128))\n                ]),\n                createElementVNode(\"div\", _hoisted_2, [\n                  createVNode(unref(Button), {\n                    label: _ctx.$t(\"serverConfig.revertChanges\"),\n                    outlined: \"\",\n                    onClick: revertChanges\n                  }, null, 8, [\"label\"]),\n                  createVNode(unref(Button), {\n                    label: _ctx.$t(\"serverConfig.restart\"),\n                    outlined: \"\",\n                    severity: \"danger\",\n                    onClick: restartApp\n                  }, null, 8, [\"label\"])\n                ])\n              ]),\n              _: 1\n            })) : createCommentVNode(\"\", true),\n            unref(commandLineArgs) ? (openBlock(), createBlock(unref(Message), {\n              key: 1,\n              severity: \"secondary\",\n              \"pt:text\": \"w-full\"\n            }, {\n              icon: withCtx(() => [\n                createVNode(_component_i_lucide58terminal, { class: \"text-xl font-bold\" })\n              ]),\n              default: withCtx(() => [\n                createElementVNode(\"div\", _hoisted_3, [\n                  createElementVNode(\"p\", null, toDisplayString(unref(commandLineArgs)), 1),\n                  createVNode(unref(Button), {\n                    icon: \"pi pi-clipboard\",\n                    severity: \"secondary\",\n                    text: \"\",\n                    onClick: copyCommandLineArgs\n                  })\n                ])\n              ]),\n              _: 1\n            })) : createCommentVNode(\"\", true)\n          ])\n        ]),\n        default: withCtx(() => [\n          (openBlock(true), createElementBlock(Fragment, null, renderList(Object.entries(unref(serverConfigsByCategory)), ([label, items], i) => {\n            return openBlock(), createElementBlock(\"div\", { key: label }, [\n              i > 0 ? (openBlock(), createBlock(unref(Divider), { key: 0 })) : createCommentVNode(\"\", true),\n              createElementVNode(\"h3\", null, toDisplayString(_ctx.$t(`serverConfigCategories.${label}`, label)), 1),\n              (openBlock(true), createElementBlock(Fragment, null, renderList(items, (item) => {\n                return openBlock(), createElementBlock(\"div\", {\n                  key: item.name,\n                  class: \"mb-4\"\n                }, [\n                  createVNode(FormItem, {\n                    id: item.id,\n                    formValue: item.value,\n                    \"onUpdate:formValue\": ($event) => item.value = $event,\n                    item: translateItem(item),\n                    \"label-class\": {\n                      \"text-highlight\": item.initialValue !== item.value\n                    }\n                  }, null, 8, [\"id\", \"formValue\", \"onUpdate:formValue\", \"item\", \"label-class\"])\n                ]);\n              }), 128))\n            ]);\n          }), 128))\n        ]),\n        _: 1\n      });\n    };\n  }\n});\nexport {\n  _sfc_main as default\n};\n//# sourceMappingURL=ServerConfigPanel-B2cC5ewA.js.map\n"],"names":[],"sourceRoot":"","ignoreList":[0]}